"use strict";function parallax(){var e=$(".devices"),o=$("img.desktop"),n=$("img.laptop"),t=$("img.mobile"),a=e.width(),r=e.height();$(window).resize(function(){a=e.width(),r=e.height()}),$(window).on("mousemove deviceorientation",function(e){function s(e){TweenLite.to(e.el,1,{css:{transform:"translateX("+d/e.posLeft+"px) translateY("+u/e.posTop+"px)"},ease:Expo.easeOut,overwrite:"all"})}var i=window.matchMedia("(max-width: 767px)").matches,c=i?Math.round(50*e.originalEvent.gamma):e.pageX,l=i?Math.round(50*e.originalEvent.beta):e.pageY,d=a/2-c,u=r/2-l;$("#deviceOrientation").text("gamma: "+e.originalEvent.gamma+" beta: "+e.originalEvent.beta);for(var m=[{el:o,posLeft:75,posTop:35},{el:n,posLeft:45,posTop:15},{el:t,posLeft:55,posTop:25}],p=0;p<m.length;p++)s(m[p])})}var $document=$(document),$body=$("body"),$barbaWrapper=$("#barba-wrapper"),pageTransitions=function(){var e=Barba.BaseView.extend({namespace:"homepage",onEnter:function(){$document.trigger("homepageOnEnter"),$body.addClass("home"),$body.attr("id","home")},onEnterCompleted:function(){$document.trigger("homepageOnEnterCompleted"),$body.removeClass().addClass("home")},onLeave:function(){$document.trigger("homepageOnLeave")},onLeaveCompleted:function(){$document.trigger("homepageOnLeaveCompleted")}}),o=Barba.BaseView.extend({namespace:"projects",onEnter:function(){$document.trigger("projectsOnEnter"),$body.addClass("projects"),$body.attr("id","projects")},onEnterCompleted:function(){$document.trigger("projectsOnEnterCompleted"),$body.removeClass().addClass("projects")},onLeave:function(){$document.trigger("projectsOnLeave")},onLeaveCompleted:function(){$document.trigger("projectsOnLeaveCompleted")}}),n=Barba.BaseView.extend({namespace:"about",onEnter:function(){$document.trigger("aboutOnEnter"),$body.addClass("about"),$body.attr("id","about")},onEnterCompleted:function(){$document.trigger("aboutOnEnterCompleted"),$body.removeClass().addClass("about")},onLeave:function(){$document.trigger("aboutOnLeave")},onLeaveCompleted:function(){$document.trigger("aboutOnLeaveCompleted")}});e.init(),o.init(),n.init(),Barba.Pjax.start(),Barba.Prefetch.init();var t=750,a=Barba.BaseTransition.extend({start:function(){Promise.all([this.newContainerLoading,this.transitionOut()]).then(this.transitionIn.bind(this))},transitionOut:function(){var e=$(this.oldContainer);e.removeClass("transition-in").addClass("transition-out"),setTimeout(function(){return e.show().promise()},t)},transitionIn:function(){var e=this,o=this,n=$(this.newContainer);setTimeout(function(){$(e.oldContainer).hide(),$(e.oldContainer).show(),o.done()},t),n.css({visibility:"visible"}),n.addClass("transition-in").removeClass("transition-out")}});Barba.Pjax.getTransition=function(){return a},Barba.Dispatcher.on("newPageReady",function(e,o){switch(!0){case"projects"===o.namespace&&"projects"===e.namespace:$barbaWrapper.addClass("tertiary-transition"),setTimeout(function(){window.scrollTo(0,0)},t);break;case"homepage"===e.namespace:$barbaWrapper.removeClass("fade-in"),setTimeout(function(){window.scrollTo(0,0),$barbaWrapper.addClass("fade-in")},t),console.log("homepage");break;default:$barbaWrapper.removeClass(),setTimeout(function(){window.scrollTo(0,0)},t)}})};$(function(){return pageTransitions()});var about=function(){$document.on("aboutOnEnter",function(){console.log("aboutOnEnter")}),$document.on("aboutOnEnterCompleted",function(){console.log("aboutOnEnterCompleted")}),$document.on("aboutOnLeave",function(){console.log("aboutOnLeave")}),$document.on("aboutOnLeaveCompleted",function(){console.log("aboutOnLeaveCompleted")})};$(function(){return about()}),$(document).on("homepageOnEnterCompleted",function(){$(".carousel").slick({infinite:!0,variableWidth:!0,slidesToShow:1,prevArrow:$(".prev"),nextArrow:$(".next")})});var homePage=function(){$document.on("homepageOnEnter",function(){console.log("homepageOnEnter")}),$document.on("homepageOnEnterCompleted",function(){console.log("homepageOnEnterCompleted")}),$document.on("homepageOnLeave",function(){console.log("homepageOnLeave")}),$document.on("homepageOnLeaveCompleted",function(){console.log("homepageOnLeaveCompleted")})};$(function(){return homePage()}),$(document).on("homepageOnEnterCompleted",function(){parallax()});var projects=function(){$document.on("projectsOnEnter",function(){console.log("projectsOnEnter")}),$document.on("projectsOnEnterCompleted",function(){console.log("projectsOnEnterCompleted")}),$document.on("projectsOnLeave",function(){console.log("projectsOnLeave")}),$document.on("projectsOnLeaveCompleted",function(){console.log("projectsOnLeaveCompleted")})};$(function(){return projects()});var settings={section:".scroll-section",easing:"easeOutExpo",scrollSpeed:1e3,offset:0,standardScrollElements:"body:not(.home)",scrollbars:!0,setHeights:!0,overflowScroll:!0,updateHash:!1,touchScroll:!0,before:function(e,o){$(".scroll-section").eq(e).removeClass("active previous next").addClass("active").siblings(".scroll-section").removeClass("active"),$(".scroll-section").eq(e-1).removeClass("active previous next").addClass("previous").siblings(".scroll-section").removeClass("previous"),$(".scroll-section").eq(e+1).removeClass("active previous next").addClass("next").siblings(".scroll-section").removeClass("next")}};$("body").hasClass("home")&&$.scrollify(settings),$(document).on("homepageOnEnterCompleted",function(){$.scrollify(settings)}),$(document).on("homepageOnLeaveCompleted",function(){$.scrollify.destroy()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl9iYXJiYVRyYW5zaXRpb25zLmpzIiwicGFyYWxsYXguanMiLCJhYm91dC5qcyIsImNhcm91c2Vscy5qcyIsImhvbWUuanMiLCJwcm9qZWN0cy5qcyIsInNjcm9sbGlmeS5qcyJdLCJuYW1lcyI6WyJwYXJhbGxheCIsIiRjb250YWluZXIiLCIkIiwiJGRlc2t0b3AiLCIkbGFwdG9wIiwiJG1vYmlsZSIsImNvbnRhaW5lcl93Iiwid2lkdGgiLCJjb250YWluZXJfaCIsImhlaWdodCIsIndpbmRvdyIsInJlc2l6ZSIsIm9uIiwiZXZlbnQiLCJ0cmFuc2xhdGVUd2VlbiIsImFyZ3MiLCJUd2VlbkxpdGUiLCJ0byIsImVsIiwiY3NzIiwidHJhbnNmb3JtIiwibGVmdCIsInBvc0xlZnQiLCJ0b3AiLCJwb3NUb3AiLCJlYXNlIiwiRXhwbyIsImVhc2VPdXQiLCJvdmVyd3JpdGUiLCJpc01vYmlsZSIsIm1hdGNoTWVkaWEiLCJtYXRjaGVzIiwicG9zX3giLCJNYXRoIiwicm91bmQiLCJvcmlnaW5hbEV2ZW50IiwiZ2FtbWEiLCJwYWdlWCIsInBvc195IiwiYmV0YSIsInBhZ2VZIiwidGV4dCIsInBhcmFsbGF4UHJvcHNBcnJheSIsImkiLCJsZW5ndGgiLCIkZG9jdW1lbnQiLCJkb2N1bWVudCIsIiRib2R5IiwiJGJhcmJhV3JhcHBlciIsInBhZ2VUcmFuc2l0aW9ucyIsIkhvbWVwYWdlIiwiQmFyYmEiLCJCYXNlVmlldyIsImV4dGVuZCIsIm5hbWVzcGFjZSIsIm9uRW50ZXIiLCJ0cmlnZ2VyIiwiYWRkQ2xhc3MiLCJhdHRyIiwib25FbnRlckNvbXBsZXRlZCIsInJlbW92ZUNsYXNzIiwib25MZWF2ZSIsIm9uTGVhdmVDb21wbGV0ZWQiLCJQcm9qZWN0cyIsIkFib3V0IiwiaW5pdCIsIlBqYXgiLCJzdGFydCIsIlByZWZldGNoIiwic3BlZWQiLCJ0cmFuc2l0aW9uIiwiQmFzZVRyYW5zaXRpb24iLCJQcm9taXNlIiwiYWxsIiwidGhpcyIsIm5ld0NvbnRhaW5lckxvYWRpbmciLCJ0cmFuc2l0aW9uT3V0IiwidGhlbiIsInRyYW5zaXRpb25JbiIsImJpbmQiLCIkZWxPbGQiLCJvbGRDb250YWluZXIiLCJzZXRUaW1lb3V0Iiwic2hvdyIsInByb21pc2UiLCJfdGhpczIiLCJfdGhpcyIsIiRlbE5ldyIsIm5ld0NvbnRhaW5lciIsImhpZGUiLCJkb25lIiwidmlzaWJpbGl0eSIsImdldFRyYW5zaXRpb24iLCJEaXNwYXRjaGVyIiwiY3VycmVudFN0YXR1cyIsIm9sZFN0YXR1cyIsInNjcm9sbFRvIiwiY29uc29sZSIsImxvZyIsImFib3V0Iiwic2xpY2siLCJpbmZpbml0ZSIsInZhcmlhYmxlV2lkdGgiLCJzbGlkZXNUb1Nob3ciLCJwcmV2QXJyb3ciLCJuZXh0QXJyb3ciLCJob21lUGFnZSIsInByb2plY3RzIiwic2V0dGluZ3MiLCJzZWN0aW9uIiwiZWFzaW5nIiwic2Nyb2xsU3BlZWQiLCJvZmZzZXQiLCJzdGFuZGFyZFNjcm9sbEVsZW1lbnRzIiwic2Nyb2xsYmFycyIsInNldEhlaWdodHMiLCJvdmVyZmxvd1Njcm9sbCIsInVwZGF0ZUhhc2giLCJ0b3VjaFNjcm9sbCIsImJlZm9yZSIsInBhbmVscyIsImVxIiwic2libGluZ3MiLCJoYXNDbGFzcyIsInNjcm9sbGlmeSIsImRlc3Ryb3kiXSwibWFwcGluZ3MiOiJBQUFBLFlDQUEsU0FBQUEsWUFDQSxHQUFBQyxHQUFBQyxFQUFBLFlBQ0FDLEVBQUFELEVBQUEsZUFDQUUsRUFBQUYsRUFBQSxjQUNBRyxFQUFBSCxFQUFBLGNBQ0FJLEVBQUFMLEVBQUFNLFFBQ0FDLEVBQUFQLEVBQUFRLFFBRUFQLEdBQUFRLFFBQUFDLE9BQUEsV0FDQUwsRUFBQUwsRUFBQU0sUUFDQUMsRUFBQVAsRUFBQVEsV0FHQVAsRUFBQVEsUUFBQUUsR0FBQSw4QkFBQSxTQUFBQyxHQVNBLFFBQUFDLEdBQUFDLEdBQ0FDLFVBQUFDLEdBQUFGLEVBQUFHLEdBQUEsR0FDQUMsS0FDQUMsVUFBQSxjQUFBQyxFQUFBTixFQUFBTyxRQUFBLGtCQUFB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RyxHQUFBLFdBQ0EsTUFBQXdHLGNIaURBeEcsRUFBQTRDLFVBQUFsQyxHQUFBLDJCQUFBLFdBQ0FaLFlJdEVBLElBQUEyRyxVQUFBLFdBRUE5RCxVQUFBakMsR0FBQSxrQkFBQSxXQUNBcUYsUUFBQUMsSUFBQSxxQkFHQXJELFVBQUFqQyxHQUFBLDJCQUFBLFdBQ0FxRixRQUFBQyxJQUFBLDhCQUdBckQsVUFBQWpDLEdBQUEsa0JBQUEsV0FDQXFGLFFBQUFDLElBQUEscUJBR0FyRCxVQUFBakMsR0FBQSwyQkFBQSxXQUNBcUYsUUFBQUMsSUFBQSw4QkFJQWhHLEdBQUEsV0FDQSxNQUFBeUcsYUNwQkEsSUFBQUMsV0FDQUMsUUFBQSxrQkFDQUMsT0FBQSxjQUNBQyxZQUFBLElBQ0FDLE9BQUEsRUFDQUMsdUJBQUEsa0JBQ0FDLFlBQUEsRUFDQUMsWUFBQSxFQUNBQyxnQkFBQSxFQUNBQyxZQUFBLEVBQ0FDLGFBQUEsRUFDQUMsT0FBQSxTQUFBNUUsRUFBQTZFLEdBQ0F0SCxFQUFBLG1CQUFBdUgsR0FBQTlFLEdBQ0FpQixZQUFBLHdCQUNBSCxTQUFBLFVBQ0FpRSxTQUFBLG1CQUNBOUQsWUFBQSxVQUVBMUQsRUFBQSxtQkFBQXVILEdBQUE5RSxFQUFBLEdBQ0FpQixZQUFBLHdCQUNBSCxTQUFBLFlBQ0FpRSxTQUFBLG1CQUNBOUQsWUFBQSxZQUVBMUQsRUFBQSxtQkFBQXVILEdBQUE5RSxFQUFBLEdBQ0FpQixZQUFBLHdCQUNBSCxTQUFBLFFBQ0FpRSxTQUFBLG1CQUNBOUQsWUFBQSxTQUlBMUQsR0FBQSxRQUFBeUgsU0FBQSxTQUNBekgsRUFBQTBILFVBQUFoQixVQUdBMUcsRUFBQTRDLFVBQUFsQyxHQUFBLDJCQUFBLFdBQ0FWLEVBQUEwSCxVQUFBaEIsWUFHQTFHLEVBQUE0QyxVQUFBbEMsR0FBQSwyQkFBQSxXQUNBVixFQUFBMEgsVUFBQUMiLCJmaWxlIjoic2NyaXB0cy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnZhciAkZG9jdW1lbnQgPSAkKGRvY3VtZW50KTtcbnZhciAkYm9keSA9ICQoJ2JvZHknKTtcbnZhciAkYmFyYmFXcmFwcGVyID0gJCgnI2JhcmJhLXdyYXBwZXInKTtcblxudmFyIHBhZ2VUcmFuc2l0aW9ucyA9IGZ1bmN0aW9uKCkge1xuXG4gIHZhciBIb21lcGFnZSA9IEJhcmJhLkJhc2VWaWV3LmV4dGVuZCh7XG4gICAgbmFtZXNwYWNlOiAnaG9tZXBhZ2UnLFxuICAgIG9uRW50ZXI6IGZ1bmN0aW9uIG9uRW50ZXIoKSB7XG4gICAgICAkZG9jdW1lbnQudHJpZ2dlcignaG9tZXBhZ2VPbkVudGVyJyk7XG4gICAgICAkYm9keS5hZGRDbGFzcygnaG9tZScpO1xuICAgICAgJGJvZHkuYXR0cignaWQnLCAnaG9tZScpO1xuICAgIH0sXG4gICAgb25FbnRlckNvbXBsZXRlZDogZnVuY3Rpb24gb25FbnRlckNvbXBsZXRlZCgpIHtcbiAgICAgICRkb2N1bWVudC50cmlnZ2VyKCdob21lcGFnZU9uRW50ZXJDb21wbGV0ZWQnKTtcbiAgICAgICRib2R5LnJlbW92ZUNsYXNzKCkuYWRkQ2xhc3MoJ2hvbWUnKTtcbiAgICB9LFxuICAgIG9uTGVhdmU6IGZ1bmN0aW9uIG9uTGVhdmUoKSB7XG4gICAgICAkZG9jdW1lbnQudHJpZ2dlcignaG9tZXBhZ2VPbkxlYXZlJyk7XG4gICAgfSxcbiAgICBvbkxlYXZlQ29tcGxldGVkOiBmdW5jdGlvbiBvbkxlYXZlQ29tcGxldGVkKCkge1xuICAgICAgJGRvY3VtZW50LnRyaWdnZXIoJ2hvbWVwYWdlT25MZWF2ZUNvbXBsZXRlZCcpO1xuICAgIH1cbiAgfSk7XG5cbiAgdmFyIFByb2plY3RzID0gQmFyYmEuQmFzZVZpZXcuZXh0ZW5kKHtcbiAgICBuYW1lc3BhY2U6ICdwcm9qZWN0cycsXG4gICAgb25FbnRlcjogZnVuY3Rpb24gb25FbnRlcigpIHtcbiAgICAgICRkb2N1bWVudC50cmlnZ2VyKCdwcm9qZWN0c09uRW50ZXInKTtcbiAgICAgICRib2R5LmFkZENsYXNzKCdwcm9qZWN0cycpO1xuICAgICAgJGJvZHkuYXR0cignaWQnLCAncHJvamVjdHMnKTtcbiAgICB9LFxuICAgIG9uRW50ZXJDb21wbGV0ZWQ6IGZ1bmN0aW9uIG9uRW50ZXJDb21wbGV0ZWQoKSB7XG4gICAgICAkZG9jdW1lbnQudHJpZ2dlcigncHJvamVjdHNPbkVudGVyQ29tcGxldGVkJyk7XG4gICAgICAkYm9keS5yZW1vdmVDbGFzcygpLmFkZENsYXNzKCdwcm9qZWN0cycpO1xuICAgIH0sXG4gICAgb25MZWF2ZTogZnVuY3Rpb24gb25MZWF2ZSgpIHtcbiAgICAgICRkb2N1bWVudC50cmlnZ2VyKCdwcm9qZWN0c09uTGVhdmUnKTtcbiAgICB9LFxuICAgIG9uTGVhdmVDb21wbGV0ZWQ6IGZ1bmN0aW9uIG9uTGVhdmVDb21wbGV0ZWQoKSB7XG4gICAgICAkZG9jdW1lbnQudHJpZ2dlcigncHJvamVjdHNPbkxlYXZlQ29tcGxldGVkJyk7XG4gICAgfVxuICB9KTtcblxuICB2YXIgQWJvdXQgPSBCYXJiYS5CYXNlVmlldy5leHRlbmQoe1xuICAgIG5hbWVzcGFjZTogJ2Fib3V0JyxcbiAgICBvbkVudGVyOiBmdW5jdGlvbiBvbkVudGVyKCkge1xuICAgICAgJGRvY3VtZW50LnRyaWdnZXIoJ2Fib3V0T25FbnRlcicpO1xuICAgICAgJGJvZHkuYWRkQ2xhc3MoJ2Fib3V0Jyk7XG4gICAgICAkYm9keS5hdHRyKCdpZCcsICdhYm91dCcpO1xuICAgIH0sXG4gICAgb25FbnRlckNvbXBsZXRlZDogZnVuY3Rpb24gb25FbnRlckNvbXBsZXRlZCgpIHtcbiAgICAgICRkb2N1bWVudC50cmlnZ2VyKCdhYm91dE9uRW50ZXJDb21wbGV0ZWQnKTtcbiAgICAgICRib2R5LnJlbW92ZUNsYXNzKCkuYWRkQ2xhc3MoJ2Fib3V0Jyk7XG4gICAgfSxcbiAgICBvbkxlYXZlOiBmdW5jdGlvbiBvbkxlYXZlKCkge1xuICAgICAgJGRvY3VtZW50LnRyaWdnZXIoJ2Fib3V0T25MZWF2ZScpO1xuICAgIH0sXG4gICAgb25MZWF2ZUNvbXBsZXRlZDogZnVuY3Rpb24gb25MZWF2ZUNvbXBsZXRlZCgpIHtcbiAgICAgICRkb2N1bWVudC50cmlnZ2VyKCdhYm91dE9uTGVhdmVDb21wbGV0ZWQnKTtcbiAgICB9XG4gIH0pO1xuXG4gIEhvbWVwYWdlLmluaXQoKTtcbiAgUHJvamVjdHMuaW5pdCgpO1xuICBBYm91dC5pbml0KCk7XG5cbiAgQmFyYmEuUGpheC5zdGFydCgpO1xuICBCYXJiYS5QcmVmZXRjaC5pbml0KCk7XG5cbiAgdmFyIHNwZWVkID0gNzUwO1xuXG4gIHZhciB0cmFuc2l0aW9uID0gQmFyYmEuQmFzZVRyYW5zaXRpb24uZXh0ZW5kKHtcbiAgICBzdGFydDogZnVuY3Rpb24gc3RhcnQoKSB7XG4gICAgICBQcm9taXNlLmFsbChbdGhpcy5uZXdDb250YWluZXJMb2FkaW5nLCB0aGlzLnRyYW5zaXRpb25PdXQoKV0pLnRoZW4odGhpcy50cmFuc2l0aW9uSW4uYmluZCh0aGlzKSk7XG4gICAgfSxcbiAgICB0cmFuc2l0aW9uT3V0OiBmdW5jdGlvbiB0cmFuc2l0aW9uT3V0KCkge1xuICAgICAgdmFyICRlbE9sZCA9ICQodGhpcy5vbGRDb250YWluZXIpO1xuXG4gICAgICAkZWxPbGQucmVtb3ZlQ2xhc3MoJ3RyYW5zaXRpb24taW4nKS5hZGRDbGFzcygndHJhbnNpdGlvbi1vdXQnKTtcblxuICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAkZWxPbGQuc2hvdygpLnByb21pc2UoKTtcbiAgICAgIH0sIHNwZWVkKTtcbiAgICB9LFxuICAgIHRyYW5zaXRpb25JbjogZnVuY3Rpb24gdHJhbnNpdGlvbkluKCkge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICB2YXIgJGVsTmV3ID0gJCh0aGlzLm5ld0NvbnRhaW5lcik7XG5cbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAkKF90aGlzMi5vbGRDb250YWluZXIpLmhpZGUoKTtcbiAgICAgICAgJChfdGhpczIub2xkQ29udGFpbmVyKS5zaG93KCk7XG4gICAgICAgIF90aGlzLmRvbmUoKTtcbiAgICAgIH0sIHNwZWVkKTtcblxuICAgICAgJGVsTmV3LmNzcyh7XG4gICAgICAgIHZpc2liaWxpdHk6ICd2aXNpYmxlJ1xuICAgICAgfSk7XG5cbiAgICAgICRlbE5ldy5hZGRDbGFzcygndHJhbnNpdGlvbi1pbicpLnJlbW92ZUNsYXNzKCd0cmFuc2l0aW9uLW91dCcpO1xuICAgIH1cbiAgfSk7XG5cbiAgQmFyYmEuUGpheC5nZXRUcmFuc2l0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0cmFuc2l0aW9uO1xuICB9O1xuXG4gIEJhcmJhLkRpc3BhdGNoZXIub24oJ25ld1BhZ2VSZWFkeScsIGZ1bmN0aW9uIChjdXJyZW50U3RhdHVzLCBvbGRTdGF0dXMpIHtcblxuICAgIHN3aXRjaCAodHJ1ZSkge1xuXG4gICAgICBjYXNlIG9sZFN0YXR1cy5uYW1lc3BhY2UgPT09ICdwcm9qZWN0cycgJiYgY3VycmVudFN0YXR1cy5uYW1lc3BhY2UgPT09ICdwcm9qZWN0cyc6XG4gICAgICAgICRiYXJiYVdyYXBwZXIuYWRkQ2xhc3MoJ3RlcnRpYXJ5LXRyYW5zaXRpb24nKTtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgd2luZG93LnNjcm9sbFRvKDAsIDApO1xuICAgICAgICB9LCBzcGVlZCk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIGN1cnJlbnRTdGF0dXMubmFtZXNwYWNlID09PSAnaG9tZXBhZ2UnOlxuICAgICAgICAkYmFyYmFXcmFwcGVyLnJlbW92ZUNsYXNzKCdmYWRlLWluJyk7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHdpbmRvdy5zY3JvbGxUbygwLCAwKTtcbiAgICAgICAgICAkYmFyYmFXcmFwcGVyLmFkZENsYXNzKCdmYWRlLWluJyk7XG4gICAgICAgIH0sIHNwZWVkKTtcbiAgICAgICAgY29uc29sZS5sb2coJ2hvbWVwYWdlJyk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICAkYmFyYmFXcmFwcGVyLnJlbW92ZUNsYXNzKCk7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHdpbmRvdy5zY3JvbGxUbygwLCAwKTtcbiAgICAgICAgfSwgc3BlZWQpO1xuICAgIH1cbiAgfSk7XG59O1xuXG4kKGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHBhZ2VUcmFuc2l0aW9ucygpO1xufSk7XG4iLCJmdW5jdGlvbiBwYXJhbGxheCgpIHtcbiAgdmFyICRjb250YWluZXIgPSAkKCcuZGV2aWNlcycpO1xuICB2YXIgJGRlc2t0b3AgPSAkKCdpbWcuZGVza3RvcCcpO1xuICB2YXIgJGxhcHRvcCA9ICQoJ2ltZy5sYXB0b3AnKTtcbiAgdmFyICRtb2JpbGUgPSAkKCdpbWcubW9iaWxlJyk7XG4gIHZhciBjb250YWluZXJfdyA9ICRjb250YWluZXIud2lkdGgoKTtcbiAgdmFyIGNvbnRhaW5lcl9oID0gJGNvbnRhaW5lci5oZWlnaHQoKTtcblxuICAkKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uICgpIHtcbiAgICBjb250YWluZXJfdyA9ICRjb250YWluZXIud2lkdGgoKTtcbiAgICBjb250YWluZXJfaCA9ICRjb250YWluZXIuaGVpZ2h0KCk7XG4gIH0pO1xuXG4gICQod2luZG93KS5vbignbW91c2Vtb3ZlIGRldmljZW9yaWVudGF0aW9uJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgdmFyIGlzTW9iaWxlID0gd2luZG93Lm1hdGNoTWVkaWEoJyhtYXgtd2lkdGg6IDc2N3B4KScpLm1hdGNoZXM7XG4gICAgdmFyIHBvc194ID0gaXNNb2JpbGUgPyBNYXRoLnJvdW5kKGV2ZW50Lm9yaWdpbmFsRXZlbnQuZ2FtbWEgKiA1MCkgOiBldmVudC5wYWdlWDtcbiAgICB2YXIgcG9zX3kgPSBpc01vYmlsZSA/IE1hdGgucm91bmQoZXZlbnQub3JpZ2luYWxFdmVudC5iZXRhICogNTApIDogZXZlbnQucGFnZVk7XG4gICAgdmFyIGxlZnQgPSBjb250YWluZXJfdyAvIDIgLSBwb3NfeDtcbiAgICB2YXIgdG9wID0gY29udGFpbmVyX2ggLyAyIC0gcG9zX3k7XG5cbiAgICAkKCcjZGV2aWNlT3JpZW50YXRpb24nKS50ZXh0KCdnYW1tYTogJyArIGV2ZW50Lm9yaWdpbmFsRXZlbnQuZ2FtbWEgKyAnIGJldGE6ICcgKyBldmVudC5vcmlnaW5hbEV2ZW50LmJldGEpO1xuXG4gICAgZnVuY3Rpb24gdHJhbnNsYXRlVHdlZW4oYXJncykge1xuICAgICAgVHdlZW5MaXRlLnRvKGFyZ3MuZWwsIDEsIHtcbiAgICAgICAgY3NzOiB7XG4gICAgICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlWCgnICsgbGVmdCAvIGFyZ3MucG9zTGVmdCArICdweCkgdHJhbnNsYXRlWSgnICsgdG9wIC8gYXJncy5wb3NUb3AgKyAncHgpJ1xuICAgICAgICB9LFxuICAgICAgICBlYXNlOiBFeHBvLmVhc2VPdXQsXG4gICAgICAgIG92ZXJ3cml0ZTogJ2FsbCdcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHZhciBwYXJhbGxheFByb3BzQXJyYXkgPSBbXG4gICAgICB7IGVsOiAkZGVza3RvcCwgcG9zTGVmdDogNzUsIHBvc1RvcDogMzV9LFxuICAgICAgeyBlbDogJGxhcHRvcCwgcG9zTGVmdDogNDUsIHBvc1RvcDogMTV9LFxuICAgICAgeyBlbDogJG1vYmlsZSwgcG9zTGVmdDogNTUsIHBvc1RvcDogMjV9XG4gICAgXTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFyYWxsYXhQcm9wc0FycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICB0cmFuc2xhdGVUd2VlbihwYXJhbGxheFByb3BzQXJyYXlbaV0pO1xuICAgIH1cbiAgfSk7XG4gIC8vXG4gIC8vdmFyIGN1cnNvck9uRGl2ID0gZmFsc2U7XG4gIC8vXG4gIC8vJChkb2N1bWVudCkub24oe1xuICAvLyAgICBtb3VzZWVudGVyOiBmdW5jdGlvbigpe1xuICAvLyAgICAgIGN1cnNvck9uRGl2ID0gdHJ1ZTtcbiAgLy8gICAgfSxcbiAgLy8gICAgbW91c2VsZWF2ZTogZnVuY3Rpb24oKXtcbiAgLy8gICAgICBjdXJzb3JPbkRpdiA9IGZhbHNlO1xuICAvLyAgICB9XG4gIC8vICB9LFxuICAvLyAgJy5jaXJjbGUnXG4gIC8vKTtcbiAgLy9cbiAgLy8kKGRvY3VtZW50KS5tb3VzZW1vdmUoZnVuY3Rpb24oZSkge1xuICAvL1xuICAvLyAgaWYgKGN1cnNvck9uRGl2KSB7XG4gIC8vICAgICQoJy5jdXN0b20tY3Vyc29yJykucG9zaXRpb24oe1xuICAvLyAgICAgIG15OiAnbGVmdCBjZW50ZXInLFxuICAvLyAgICAgIG9mOiBlLFxuICAvLyAgICAgIGNvbGxpc2lvbjogJ25vbmUnXG4gIC8vICAgIH0pO1xuICAvLyAgfVxuICAvL1xuICAvL30pO1xufVxuXG4kKGRvY3VtZW50KS5vbignaG9tZXBhZ2VPbkVudGVyQ29tcGxldGVkJywgZnVuY3Rpb24oKSB7XG4gIHBhcmFsbGF4KCk7XG59KTtcbiIsInZhciBhYm91dCA9IGZ1bmN0aW9uKCkge1xuXG4gICRkb2N1bWVudC5vbignYWJvdXRPbkVudGVyJywgZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coJ2Fib3V0T25FbnRlcicpO1xuICB9KTtcblxuICAkZG9jdW1lbnQub24oJ2Fib3V0T25FbnRlckNvbXBsZXRlZCcsIGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKCdhYm91dE9uRW50ZXJDb21wbGV0ZWQnKTtcbiAgfSk7XG5cbiAgJGRvY3VtZW50Lm9uKCdhYm91dE9uTGVhdmUnLCBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygnYWJvdXRPbkxlYXZlJyk7XG4gIH0pO1xuXG4gICRkb2N1bWVudC5vbignYWJvdXRPbkxlYXZlQ29tcGxldGVkJywgZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coJ2Fib3V0T25MZWF2ZUNvbXBsZXRlZCcpO1xuICB9KTtcbn07XG5cbiQoZnVuY3Rpb24gKCkge1xuICByZXR1cm4gYWJvdXQoKTtcbn0pO1xuIiwiJChkb2N1bWVudCkub24oJ2hvbWVwYWdlT25FbnRlckNvbXBsZXRlZCcsIGZ1bmN0aW9uKCkge1xuICAkKCcuY2Fyb3VzZWwnKS5zbGljayh7XG4gICAgaW5maW5pdGU6IHRydWUsXG4gICAgdmFyaWFibGVXaWR0aDogdHJ1ZSxcbiAgICBzbGlkZXNUb1Nob3c6IDEsXG4gICAgcHJldkFycm93OiAkKCcucHJldicpLFxuICAgIG5leHRBcnJvdzogJCgnLm5leHQnKVxuICB9KTtcbn0pO1xuIiwidmFyIGhvbWVQYWdlID0gZnVuY3Rpb24oKSB7XG5cbiAgJGRvY3VtZW50Lm9uKCdob21lcGFnZU9uRW50ZXInLCBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygnaG9tZXBhZ2VPbkVudGVyJyk7XG4gIH0pO1xuXG4gICRkb2N1bWVudC5vbignaG9tZXBhZ2VPbkVudGVyQ29tcGxldGVkJywgZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coJ2hvbWVwYWdlT25FbnRlckNvbXBsZXRlZCcpO1xuICB9KTtcblxuICAkZG9jdW1lbnQub24oJ2hvbWVwYWdlT25MZWF2ZScsIGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKCdob21lcGFnZU9uTGVhdmUnKTtcbiAgfSk7XG5cbiAgJGRvY3VtZW50Lm9uKCdob21lcGFnZU9uTGVhdmVDb21wbGV0ZWQnLCBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygnaG9tZXBhZ2VPbkxlYXZlQ29tcGxldGVkJyk7XG4gIH0pO1xufTtcblxuJChmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBob21lUGFnZSgpO1xufSk7XG4iLCJ2YXIgcHJvamVjdHMgPSBmdW5jdGlvbigpIHtcblxuICAkZG9jdW1lbnQub24oJ3Byb2plY3RzT25FbnRlcicsIGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKCdwcm9qZWN0c09uRW50ZXInKTtcbiAgfSk7XG5cbiAgJGRvY3VtZW50Lm9uKCdwcm9qZWN0c09uRW50ZXJDb21wbGV0ZWQnLCBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygncHJvamVjdHNPbkVudGVyQ29tcGxldGVkJyk7XG4gIH0pO1xuXG4gICRkb2N1bWVudC5vbigncHJvamVjdHNPbkxlYXZlJywgZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coJ3Byb2plY3RzT25MZWF2ZScpO1xuICB9KTtcblxuICAkZG9jdW1lbnQub24oJ3Byb2plY3RzT25MZWF2ZUNvbXBsZXRlZCcsIGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKCdwcm9qZWN0c09uTGVhdmVDb21wbGV0ZWQnKTtcbiAgfSk7XG59O1xuXG4kKGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHByb2plY3RzKCk7XG59KTtcbiIsInZhciBzZXR0aW5ncyA9IHtcbiAgc2VjdGlvbiA6ICcuc2Nyb2xsLXNlY3Rpb24nLFxuICBlYXNpbmc6ICdlYXNlT3V0RXhwbycsXG4gIHNjcm9sbFNwZWVkOiAxMDAwLFxuICBvZmZzZXQgOiAwLFxuICBzdGFuZGFyZFNjcm9sbEVsZW1lbnRzOiAnYm9keTpub3QoLmhvbWUpJyxcbiAgc2Nyb2xsYmFyczogdHJ1ZSxcbiAgc2V0SGVpZ2h0czogdHJ1ZSxcbiAgb3ZlcmZsb3dTY3JvbGw6IHRydWUsXG4gIHVwZGF0ZUhhc2g6IGZhbHNlLFxuICB0b3VjaFNjcm9sbDogdHJ1ZSxcbiAgYmVmb3JlOmZ1bmN0aW9uKGksIHBhbmVscykge1xuICAgICQoJy5zY3JvbGwtc2VjdGlvbicpLmVxKGkpXG4gICAgICAucmVtb3ZlQ2xhc3MoJ2FjdGl2ZSBwcmV2aW91cyBuZXh0JylcbiAgICAgIC5hZGRDbGFzcygnYWN0aXZlJylcbiAgICAgIC5zaWJsaW5ncygnLnNjcm9sbC1zZWN0aW9uJylcbiAgICAgIC5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG5cbiAgICAkKCcuc2Nyb2xsLXNlY3Rpb24nKS5lcShpIC0gMSlcbiAgICAgIC5yZW1vdmVDbGFzcygnYWN0aXZlIHByZXZpb3VzIG5leHQnKVxuICAgICAgLmFkZENsYXNzKCdwcmV2aW91cycpXG4gICAgICAuc2libGluZ3MoJy5zY3JvbGwtc2VjdGlvbicpXG4gICAgICAucmVtb3ZlQ2xhc3MoJ3ByZXZpb3VzJyk7XG5cbiAgICAkKCcuc2Nyb2xsLXNlY3Rpb24nKS5lcShpICsgMSlcbiAgICAgIC5yZW1vdmVDbGFzcygnYWN0aXZlIHByZXZpb3VzIG5leHQnKVxuICAgICAgLmFkZENsYXNzKCduZXh0JylcbiAgICAgIC5zaWJsaW5ncygnLnNjcm9sbC1zZWN0aW9uJylcbiAgICAgIC5yZW1vdmVDbGFzcygnbmV4dCcpO1xuICB9XG59O1xuXG5pZigkKCdib2R5JykuaGFzQ2xhc3MoJ2hvbWUnKSkge1xuICAkLnNjcm9sbGlmeShzZXR0aW5ncyk7XG59XG5cbiQoZG9jdW1lbnQpLm9uKCdob21lcGFnZU9uRW50ZXJDb21wbGV0ZWQnLCBmdW5jdGlvbigpIHtcbiAgJC5zY3JvbGxpZnkoc2V0dGluZ3MpO1xufSk7XG5cbiQoZG9jdW1lbnQpLm9uKCdob21lcGFnZU9uTGVhdmVDb21wbGV0ZWQnLCBmdW5jdGlvbigpIHtcbiAgJC5zY3JvbGxpZnkuZGVzdHJveSgpO1xufSk7XG5cblxuIl19
