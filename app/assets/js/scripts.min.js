"use strict";function directionAwareButton(){$(".btn").on("mouseenter",function(e){var o=$(this).offset(),n=e.pageX-o.left,t=e.pageY-o.top;$(this).find("span").css({top:t,left:n})}).on("mouseout",function(e){var o=$(this).offset(),n=e.pageX-o.left,t=e.pageY-o.top;$(this).find("span").css({top:t,left:n})})}function parallax(){var e=$(".devices"),o=$("img.desktop"),n=$("img.laptop"),t=$("img.mobile"),a=e.width(),i=e.height();$(window).resize(function(){a=e.width(),i=e.height()}),$(window).on("mousemove deviceorientation",function(e){function r(e){TweenLite.to(e.el,1,{css:{transform:"translateX("+d/e.posLeft+"px) translateY("+u/e.posTop+"px)"},ease:Expo.easeOut,overwrite:"all"})}var s=window.matchMedia("(max-width: 767px)").matches,c=s?Math.round(50*e.originalEvent.gamma):e.pageX,l=s?Math.round(50*e.originalEvent.beta):e.pageY,d=a/2-c,u=i/2-l;$("#deviceOrientation").text("gamma: "+e.originalEvent.gamma+" beta: "+e.originalEvent.beta);for(var m=[{el:o,posLeft:75,posTop:35},{el:n,posLeft:45,posTop:15},{el:t,posLeft:55,posTop:25}],p=0;p<m.length;p++)r(m[p])})}function paginationArrowsMove(){$(".pagination a").each(function(e){$(this).click(function(o){o.preventDefault(),$.scrollify.move(e)})}),$(".arrow-down").click(function(){$.scrollify.next()}),$(".arrow-up").click(function(){$.scrollify.previous()})}var $document=$(document),$body=$("body"),$barbaWrapper=$("#barba-wrapper"),pageTransitions=function(){var e=Barba.BaseView.extend({namespace:"homepage",onEnter:function(){$document.trigger("homepageOnEnter"),$body.addClass("home"),$body.attr("id","home")},onEnterCompleted:function(){$document.trigger("homepageOnEnterCompleted"),$body.removeClass().addClass("home")},onLeave:function(){$document.trigger("homepageOnLeave")},onLeaveCompleted:function(){$document.trigger("homepageOnLeaveCompleted")}}),o=Barba.BaseView.extend({namespace:"projects",onEnter:function(){$document.trigger("projectsOnEnter"),$body.addClass("projects"),$body.attr("id","projects")},onEnterCompleted:function(){$document.trigger("projectsOnEnterCompleted"),$body.removeClass().addClass("projects")},onLeave:function(){$document.trigger("projectsOnLeave")},onLeaveCompleted:function(){$document.trigger("projectsOnLeaveCompleted")}}),n=Barba.BaseView.extend({namespace:"about",onEnter:function(){$document.trigger("aboutOnEnter"),$body.addClass("about"),$body.attr("id","about")},onEnterCompleted:function(){$document.trigger("aboutOnEnterCompleted"),$body.removeClass().addClass("about")},onLeave:function(){$document.trigger("aboutOnLeave")},onLeaveCompleted:function(){$document.trigger("aboutOnLeaveCompleted")}}),t=Barba.BaseView.extend({namespace:"contact",onEnter:function(){$document.trigger("contactOnEnter"),$body.addClass("contact"),$body.attr("id","contact")},onEnterCompleted:function(){$document.trigger("contactOnEnterCompleted"),$body.removeClass().addClass("contact")},onLeave:function(){$document.trigger("contactOnLeave")},onLeaveCompleted:function(){$document.trigger("contactOnLeaveCompleted")}});e.init(),o.init(),n.init(),t.init(),Barba.Pjax.start(),Barba.Prefetch.init();var a=750,i=Barba.BaseTransition.extend({start:function(){Promise.all([this.newContainerLoading,this.transitionOut()]).then(this.transitionIn.bind(this))},transitionOut:function(){var e=$(this.oldContainer);e.removeClass("transition-in").addClass("transition-out"),setTimeout(function(){return e.show().promise()},a)},transitionIn:function(){var e=this,o=this,n=$(this.newContainer);setTimeout(function(){$(e.oldContainer).hide(),$(e.oldContainer).show(),o.done()},a),n.css({visibility:"visible"}),n.addClass("transition-in").removeClass("transition-out")}});Barba.Pjax.getTransition=function(){return i},Barba.Dispatcher.on("newPageReady",function(e,o){switch(setTimeout(function(){window.scrollTo(0,0)},a),$($document).trigger("allPagesEnter"),console.log("allPagesEnter"),!0){case"projects"===o.namespace&&"projects"===e.namespace:$barbaWrapper.addClass("tertiary-transition"),setTimeout(function(){window.scrollTo(0,0)},a);break;case"homepage"===e.namespace:$barbaWrapper.removeClass("fade-in"),setTimeout(function(){window.scrollTo(0,0),$barbaWrapper.addClass("fade-in")},a),console.log("homepage");break;default:$barbaWrapper.removeClass(),setTimeout(function(){window.scrollTo(0,0)},a)}})};$(function(){return pageTransitions()});var about=function(){$document.on("aboutOnEnter",function(){console.log("aboutOnEnter")}),$document.on("aboutOnEnterCompleted",function(){console.log("aboutOnEnterCompleted")}),$document.on("aboutOnLeave",function(){console.log("aboutOnLeave")}),$document.on("aboutOnLeaveCompleted",function(){console.log("aboutOnLeaveCompleted")})};$(function(){return about()}),directionAwareButton(),$($document).on("allPagesEnter",function(){directionAwareButton()}),$(document).on("homepageOnEnterCompleted",function(){$(".carousel").slick({infinite:!0,variableWidth:!0,slidesToShow:1,prevArrow:$(".arrow-prev"),nextArrow:$(".arrow-next")}),$(".slick-active").addClass("active"),$(".carousel").on("afterChange",function(){$(this).find(".slide.slick-active").addClass("animate").siblings().removeClass("animate")}),$(".carousel .slick-active").addClass("animate")});var contact=function(){$document.on("contactOnEnter",function(){console.log("contactOnEnter")}),$document.on("contactOnEnterCompleted",function(){console.log("contactOnEnterCompleted")}),$document.on("contactOnLeave",function(){console.log("contactOnLeave")}),$document.on("contactOnLeaveCompleted",function(){console.log("contactOnLeaveCompleted")})};$(function(){return contact()});var homePage=function(){function e(){$("section.intro").addClass("landing-animation"),setTimeout(function(){$("section.intro").removeClass("landing-animation")},2e3)}$("body").hasClass("home")&&e(),$document.on("homepageOnEnter",function(){console.log("homepageOnEnter"),e()}),$document.on("homepageOnEnterCompleted",function(){console.log("homepageOnEnterCompleted")}),$document.on("homepageOnLeave",function(){console.log("homepageOnLeave")}),$document.on("homepageOnLeaveCompleted",function(){console.log("homepageOnLeaveCompleted")})};$("body").hasClass("home")&&$(function(){return homePage()}),$.fn.isOnScreen=function(){var e={top:$(window).scrollTop()};e.bottom=e.top+$(window).height();var o=this.offset();return o.bottom=this.offset().top+this.outerHeight(),!(e.bottom<o.top||e.top>o.bottom)},$(window).on("scroll",function(){$(".project .img").each(function(){$(this).isOnScreen()===!0?$(this).addClass("in-viewport"):$(this).removeClass("in-viewport")})}),$(document).on("homepageOnEnterCompleted",function(){parallax()});var projects=function(){$document.on("projectsOnEnter",function(){console.log("projectsOnEnter")}),$document.on("projectsOnEnterCompleted",function(){console.log("projectsOnEnterCompleted")}),$document.on("projectsOnLeave",function(){console.log("projectsOnLeave")}),$document.on("projectsOnLeaveCompleted",function(){console.log("projectsOnLeaveCompleted")})};$(function(){return projects()});var settings={section:".scroll-section",easing:"easeOutExpo",scrollSpeed:1e3,offset:0,standardScrollElements:"body:not(.home)",scrollbars:!0,setHeights:!0,overflowScroll:!0,updateHash:!1,touchScroll:!0,before:function(e,o){var n=o[e].attr("data-section-name");$(".pagination .active").removeClass("active"),$(".pagination").find('a[href="#'+n+'"]').addClass("active"),$(".scroll-section").eq(e).removeClass("active previous next").addClass("active").siblings(".scroll-section").removeClass("active"),$(".scroll-section").eq(e-1).removeClass("active previous next").addClass("previous").siblings(".scroll-section").removeClass("previous"),$(".scroll-section").eq(e+1).removeClass("active previous next").addClass("next").siblings(".scroll-section").removeClass("next"),e===o.length-1?$(".arrow-down").addClass("disabled"):0===e?$(".arrow-up").addClass("disabled"):$(".arrow-up, .arrow-down").removeClass("disabled")}};$("body").hasClass("home")&&($.scrollify(settings),window.scrollTo(0,0),$.scrollify.move(0)),$(document).on("homepageOnEnter",function(){window.scrollTo(0,0),$.scrollify.move(0),paginationArrowsMove()}),$(document).on("homepageOnEnterCompleted",function(){$.scrollify(settings)}),$(document).on("homepageOnLeaveCompleted",function(){$.scrollify.destroy()});var morphEls=function(){function e(e){var o=Snap(e.el),n=o.select("path"),t={toSpeed:e.toSpeed,fromSpeed:e.fromSpeed,from:n.attr("d"),to:e.el.getAttribute("data-morph-active")};e.el.addEventListener("mouseover",function(){n.animate({path:t.to},t.toSpeed,e.easeIn)}),e.el.addEventListener("mouseout",function(){n.animate({path:t.from},t.fromSpeed,e.easeOut)})}for(var o=[{el:document.querySelector(".arrow-up"),easeIn:mina.easein,easeOut:mina.easeout,toSpeed:300,fromSpeed:150},{el:document.querySelector(".arrow-down"),easeIn:mina.easein,easeOut:mina.easeout,toSpeed:300,fromSpeed:150},{el:document.querySelector(".arrow-next"),easeIn:mina.easein,easeOut:mina.bounce,toSpeed:300,fromSpeed:500},{el:document.querySelector(".arrow-prev"),easeIn:mina.easein,easeOut:mina.bounce,toSpeed:300,fromSpeed:500}],n=0;n<o.length;n++)e(o[n])};$("body").hasClass("home")&&morphEls(),$(document).on("homepageOnEnter",function(){morphEls()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl9iYXJiYVRyYW5zaXRpb25zLmpzIiwiYnV0dG9uRWZmZWN0LmpzIiwicGFyYWxsYXguanMiLCJzY3JvbGxpZnkuanMiLCJhYm91dC5qcyIsImNhcm91c2Vscy5qcyIsImNvbnRhY3QuanMiLCJob21lLmpzIiwiaXNJblZpZXdwb3J0LmpzIiwicHJvamVjdHMuanMiLCJzbmFwRWxlbWVudHMuanMiXSwibmFtZXMiOlsiZGlyZWN0aW9uQXdhcmVCdXR0b24iLCIkIiwib24iLCJlIiwicGFyZW50T2Zmc2V0IiwidGhpcyIsIm9mZnNldCIsInJlbFgiLCJwYWdlWCIsImxlZnQiLCJyZWxZIiwicGFnZVkiLCJ0b3AiLCJmaW5kIiwiY3NzIiwicGFyYWxsYXgiLCIkY29udGFpbmVyIiwiJGRlc2t0b3AiLCIkbGFwdG9wIiwiJG1vYmlsZSIsImNvbnRhaW5lcl93Iiwid2lkdGgiLCJjb250YWluZXJfaCIsImhlaWdodCIsIndpbmRvdyIsInJlc2l6ZSIsImV2ZW50IiwidHJhbnNsYXRlVHdlZW4iLCJhcmdzIiwiVHdlZW5MaXRlIiwidG8iLCJlbCIsInRyYW5zZm9ybSIsInBvc0xlZnQiLCJwb3NUb3AiLCJlYXNlIiwiRXhwbyIsImVhc2VPdXQiLCJvdmVyd3JpdGUiLCJpc01vYmlsZSIsIm1hdGNoTWVkaWEiLCJtYXRjaGVzIiwicG9zX3giLCJNYXRoIiwicm91bmQiLCJvcmlnaW5hbEV2ZW50IiwiZ2FtbWEiLCJwb3NfeSIsImJldGEiLCJ0ZXh0IiwicGFyYWxsYXhQcm9wc0FycmF5IiwiaSIsImxlbmd0aCIsInBhZ2luYXRpb25BcnJvd3NNb3ZlIiwiZWFjaCIsImNsaWNrIiwicHJldmVudERlZmF1bHQiLCJzY3JvbGxpZnkiLCJtb3ZlIiwibmV4dCIsInByZXZpb3VzIiwiJGRvY3VtZW50IiwiZG9jdW1lbnQiLCIkYm9keSIsIiRiYXJiYVdyYXBwZXIiLCJwYWdlVHJhbnNpdGlvbnMiLCJIb21lcGFnZSIsIkJhcmJhIiwiQmFzZVZpZXciLCJleHRlbmQiLCJuYW1lc3BhY2UiLCJvbkVudGVyIiwidHJpZ2dlciIsImFkZENsYXNzIiwiYXR0ciIsIm9uRW50ZXJDb21wbGV0ZWQiLCJyZW1vdmVDbGFzcyIsIm9uTGVhdmUiLCJvbkxlYXZlQ29tcGxldGVkIiwiUHJvamVjdHMiLCJBYm91dCIsIkNvbnRhY3QiLCJpbml0IiwiUGpheCIsInN0YXJ0IiwiUHJlZmV0Y2giLCJzcGVlZCIsInRyYW5zaXRpb24iLCJCYXNlVHJhbnNpdGlvbiIsIlByb21pc2UiLCJhbGwiLCJuZXdDb250YWluZXJMb2FkaW5nIiwidHJhbnNpdGlvbk91dCIsInRoZW4iLCJ0cmFuc2l0aW9uSW4iLCJiaW5kIiwiJGVsT2xkIiwib2xkQ29udGFpbmVyIiwic2V0VGltZW91dCIsInNob3ciLCJwcm9taXNlIiwiX3RoaXMyIiwiX3RoaXMiLCIkZWxOZXciLCJuZXdDb250YWluZXIiLCJoaWRlIiwiZG9uZSIsInZpc2liaWxpdHkiLCJnZXRUcmFuc2l0aW9uIiwiRGlzcGF0Y2hlciIsImN1cnJlbnRTdGF0dXMiLCJvbGRTdGF0dXMiLCJzY3JvbGxUbyIsImNvbnNvbGUiLCJsb2ciLCJhYm91dCIsInNsaWNrIiwiaW5maW5pdGUiLCJ2YXJpYWJsZVdpZHRoIiwic2xpZGVzVG9TaG93IiwicHJldkFycm93IiwibmV4dEFycm93Iiwic2libGluZ3MiLCJjb250YWN0IiwiaG9tZVBhZ2UiLCJsYW5kaW5nUGFnZUludHJvQW5pbWF0aW9uIiwiaGFzQ2xhc3MiLCJmbiIsImlzT25TY3JlZW4iLCJ2aWV3cG9ydCIsInNjcm9sbFRvcCIsImJvdHRvbSIsImJvdW5kcyIsIm91dGVySGVpZ2h0IiwicHJvamVjdHMiLCJzZXR0aW5ncyIsInNlY3Rpb24iLCJlYXNpbmciLCJzY3JvbGxTcGVlZCIsInN0YW5kYXJkU2Nyb2xsRWxlbWVudHMiLCJzY3JvbGxiYXJzIiwic2V0SGVpZ2h0cyIsIm92ZXJmbG93U2Nyb2xsIiwidXBkYXRlSGFzaCIsInRvdWNoU2Nyb2xsIiwiYmVmb3JlIiwicGFuZWxzIiwicmVmIiwiZXEiLCJkZXN0cm95IiwibW9ycGhFbHMiLCJzbmFwTW9ycGhIb3ZlciIsInMiLCJTbmFwIiwicGF0aCIsInNlbGVjdCIsInBhdGhDb25maWciLCJ0b1NwZWVkIiwiZnJvbVNwZWVkIiwiZnJvbSIsImdldEF0dHJpYnV0ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJhbmltYXRlIiwiZWFzZUluIiwic25hcEVscyIsInF1ZXJ5U2VsZWN0b3IiLCJtaW5hIiwiZWFzZWluIiwiZWFzZW91dCIsImJvdW5jZSJdLCJtYXBwaW5ncyI6IkFBQUEsWUNBQSxTQUFBQSx3QkFDQUMsRUFBQSxRQUNBQyxHQUFBLGFBQUEsU0FBQUMsR0FDQSxHQUFBQyxHQUFBSCxFQUFBSSxNQUFBQyxTQUNBQyxFQUFBSixFQUFBSyxNQUFBSixFQUFBSyxLQUNBQyxFQUFBUCxFQUFBUSxNQUFBUCxFQUFBUSxHQUNBWCxHQUFBSSxNQUFBUSxLQUFBLFFBQUFDLEtBQUFGLElBQUFGLEVBQUFELEtBQUFGLE1BRUFMLEdBQUEsV0FBQSxTQUFBQyxHQUNBLEdBQUFDLEdBQUFILEVBQUFJLE1BQUFDLFNBQ0FDLEVBQUFKLEVBQUFLLE1BQUFKLEVBQUFLLEtBQ0FDLEVBQUFQLEVBQUFRLE1BQUFQLEVBQUFRLEdBQ0FYLEdBQUFJLE1BQUFRLEtBQUEsUUFBQUMsS0FBQUYsSUFBQUYsRUFBQUQsS0FBQUYsTUNaQSxRQUFBUSxZQUNBLEdBQUFDLEdBQUFmLEVBQUEsWUFDQWdCLEVBQUFoQixFQUFBLGVBQ0FpQixFQUFBakIsRUFBQSxjQUNBa0IsRUFBQWxCLEVBQUEsY0FDQW1CLEVBQUFKLEVBQUFLLFFBQ0FDLEVBQUFOLEVBQUFPLFFBRUF0QixHQUFBdUIsUUFBQUMsT0FBQSxXQUNBTCxFQUFBSixFQUFBSyxRQUNBQyxFQUFBTixFQUFBTyxXQUdBdEIsRUFBQXVCLFFBQUF0QixHQUFBLDhCQUFBLFNBQUF3QixHQVNBLFFBQUFDLEdBQUFDLEdBQ0FDLFVBQUFDLEdBQUFGLEVBQUFHLEdBQUEsR0FDQWpCLEtBQ0FrQixVQUFBLGNBQUF2QixFQUFBbUIs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RUFBQUYsRUFBQUcsT0FBQSxRQUVBQyxHQUNBQyxRQUFBakksRUFBQWlJLFFBQ0FDLFVBQUFsSSxFQUFBa0ksVUFDQUMsS0FBQUwsRUFBQWhGLEtBQUEsS0FDQTVDLEdBQUFGLEVBQUFHLEdBQUFpSSxhQUFBLHFCQUdBcEksR0FBQUcsR0FBQWtJLGlCQUFBLFlBQUEsV0FDQVAsRUFBQVEsU0FBQVIsS0FBQUUsRUFBQTlILElBQUE4SCxFQUFBQyxRQUFBakksRUFBQXVJLFVBR0F2SSxFQUFBRyxHQUFBa0ksaUJBQUEsV0FBQSxXQUNBUCxFQUFBUSxTQUFBUixLQUFBRSxFQUFBRyxNQUFBSCxFQUFBRSxVQUFBbEksRUFBQVMsV0FXQSxJQUFBLEdBUEErSCxLQUNBckksR0FBQStCLFNBQUF1RyxjQUFBLGFBQUFGLE9BQUFHLEtBQUFDLE9BQUFsSSxRQUFBaUksS0FBQUUsUUFBQVgsUUFBQSxJQUFBQyxVQUFBLE1BQ0EvSCxHQUFBK0IsU0FBQXVHLGNBQUEsZUFBQUYsT0FBQUcsS0FBQUMsT0FBQWxJLFFBQUFpSSxLQUFBRSxRQUFBWCxRQUFBLElBQUFDLFVBQUEsTUFDQS9ILEdBQUErQixTQUFBdUcsY0FBQSxlQUFBRixPQUFBRyxLQUFBQyxPQUFBbEksUUFBQWlJLEtBQUFHLE9BQUFaLFFBQUEsSUFBQUMsVUFBQSxNQUNBL0gsR0FBQStCLFNBQUF1RyxjQUFBLGVBQUFGLE9BQUFHLEtBQUFDLE9BQUFsSSxRQUFBaUksS0FBQUcsT0FBQVosUUFBQSxJQUFBQyxVQUFBLE1BR0EzRyxFQUFBLEVBQUFBLEVBQUFpSCxFQUFBaEgsT0FBQUQsSUFDQW9HLEVBQUFhLEVBQUFqSCxJQUlBbEQsR0FBQSxRQUFBNkgsU0FBQSxTQUNBd0IsV0FHQXJKLEVBQUE2RCxVQUFBNUQsR0FBQSxrQkFBQSxXQUNBb0oiLCJmaWxlIjoic2NyaXB0cy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnZhciAkZG9jdW1lbnQgPSAkKGRvY3VtZW50KTtcbnZhciAkYm9keSA9ICQoJ2JvZHknKTtcbnZhciAkYmFyYmFXcmFwcGVyID0gJCgnI2JhcmJhLXdyYXBwZXInKTtcblxudmFyIHBhZ2VUcmFuc2l0aW9ucyA9IGZ1bmN0aW9uKCkge1xuXG4gIHZhciBIb21lcGFnZSA9IEJhcmJhLkJhc2VWaWV3LmV4dGVuZCh7XG4gICAgbmFtZXNwYWNlOiAnaG9tZXBhZ2UnLFxuICAgIG9uRW50ZXI6IGZ1bmN0aW9uIG9uRW50ZXIoKSB7XG4gICAgICAkZG9jdW1lbnQudHJpZ2dlcignaG9tZXBhZ2VPbkVudGVyJyk7XG4gICAgICAkYm9keS5hZGRDbGFzcygnaG9tZScpO1xuICAgICAgJGJvZHkuYXR0cignaWQnLCAnaG9tZScpO1xuICAgIH0sXG4gICAgb25FbnRlckNvbXBsZXRlZDogZnVuY3Rpb24gb25FbnRlckNvbXBsZXRlZCgpIHtcbiAgICAgICRkb2N1bWVudC50cmlnZ2VyKCdob21lcGFnZU9uRW50ZXJDb21wbGV0ZWQnKTtcbiAgICAgICRib2R5LnJlbW92ZUNsYXNzKCkuYWRkQ2xhc3MoJ2hvbWUnKTtcbiAgICB9LFxuICAgIG9uTGVhdmU6IGZ1bmN0aW9uIG9uTGVhdmUoKSB7XG4gICAgICAkZG9jdW1lbnQudHJpZ2dlcignaG9tZXBhZ2VPbkxlYXZlJyk7XG4gICAgfSxcbiAgICBvbkxlYXZlQ29tcGxldGVkOiBmdW5jdGlvbiBvbkxlYXZlQ29tcGxldGVkKCkge1xuICAgICAgJGRvY3VtZW50LnRyaWdnZXIoJ2hvbWVwYWdlT25MZWF2ZUNvbXBsZXRlZCcpO1xuICAgIH1cbiAgfSk7XG5cbiAgdmFyIFByb2plY3RzID0gQmFyYmEuQmFzZVZpZXcuZXh0ZW5kKHtcbiAgICBuYW1lc3BhY2U6ICdwcm9qZWN0cycsXG4gICAgb25FbnRlcjogZnVuY3Rpb24gb25FbnRlcigpIHtcbiAgICAgICRkb2N1bWVudC50cmlnZ2VyKCdwcm9qZWN0c09uRW50ZXInKTtcbiAgICAgICRib2R5LmFkZENsYXNzKCdwcm9qZWN0cycpO1xuICAgICAgJGJvZHkuYXR0cignaWQnLCAncHJvamVjdHMnKTtcbiAgICB9LFxuICAgIG9uRW50ZXJDb21wbGV0ZWQ6IGZ1bmN0aW9uIG9uRW50ZXJDb21wbGV0ZWQoKSB7XG4gICAgICAkZG9jdW1lbnQudHJpZ2dlcigncHJvamVjdHNPbkVudGVyQ29tcGxldGVkJyk7XG4gICAgICAkYm9keS5yZW1vdmVDbGFzcygpLmFkZENsYXNzKCdwcm9qZWN0cycpO1xuICAgIH0sXG4gICAgb25MZWF2ZTogZnVuY3Rpb24gb25MZWF2ZSgpIHtcbiAgICAgICRkb2N1bWVudC50cmlnZ2VyKCdwcm9qZWN0c09uTGVhdmUnKTtcbiAgICB9LFxuICAgIG9uTGVhdmVDb21wbGV0ZWQ6IGZ1bmN0aW9uIG9uTGVhdmVDb21wbGV0ZWQoKSB7XG4gICAgICAkZG9jdW1lbnQudHJpZ2dlcigncHJvamVjdHNPbkxlYXZlQ29tcGxldGVkJyk7XG4gICAgfVxuICB9KTtcblxuICB2YXIgQWJvdXQgPSBCYXJiYS5CYXNlVmlldy5leHRlbmQoe1xuICAgIG5hbWVzcGFjZTogJ2Fib3V0JyxcbiAgICBvbkVudGVyOiBmdW5jdGlvbiBvbkVudGVyKCkge1xuICAgICAgJGRvY3VtZW50LnRyaWdnZXIoJ2Fib3V0T25FbnRlcicpO1xuICAgICAgJGJvZHkuYWRkQ2xhc3MoJ2Fib3V0Jyk7XG4gICAgICAkYm9keS5hdHRyKCdpZCcsICdhYm91dCcpO1xuICAgIH0sXG4gICAgb25FbnRlckNvbXBsZXRlZDogZnVuY3Rpb24gb25FbnRlckNvbXBsZXRlZCgpIHtcbiAgICAgICRkb2N1bWVudC50cmlnZ2VyKCdhYm91dE9uRW50ZXJDb21wbGV0ZWQnKTtcbiAgICAgICRib2R5LnJlbW92ZUNsYXNzKCkuYWRkQ2xhc3MoJ2Fib3V0Jyk7XG4gICAgfSxcbiAgICBvbkxlYXZlOiBmdW5jdGlvbiBvbkxlYXZlKCkge1xuICAgICAgJGRvY3VtZW50LnRyaWdnZXIoJ2Fib3V0T25MZWF2ZScpO1xuICAgIH0sXG4gICAgb25MZWF2ZUNvbXBsZXRlZDogZnVuY3Rpb24gb25MZWF2ZUNvbXBsZXRlZCgpIHtcbiAgICAgICRkb2N1bWVudC50cmlnZ2VyKCdhYm91dE9uTGVhdmVDb21wbGV0ZWQnKTtcbiAgICB9XG4gIH0pO1xuXG4gIHZhciBDb250YWN0ID0gQmFyYmEuQmFzZVZpZXcuZXh0ZW5kKHtcbiAgICBuYW1lc3BhY2U6ICdjb250YWN0JyxcbiAgICBvbkVudGVyOiBmdW5jdGlvbiBvbkVudGVyKCkge1xuICAgICAgJGRvY3VtZW50LnRyaWdnZXIoJ2NvbnRhY3RPbkVudGVyJyk7XG4gICAgICAkYm9keS5hZGRDbGFzcygnY29udGFjdCcpO1xuICAgICAgJGJvZHkuYXR0cignaWQnLCAnY29udGFjdCcpO1xuICAgIH0sXG4gICAgb25FbnRlckNvbXBsZXRlZDogZnVuY3Rpb24gb25FbnRlckNvbXBsZXRlZCgpIHtcbiAgICAgICRkb2N1bWVudC50cmlnZ2VyKCdjb250YWN0T25FbnRlckNvbXBsZXRlZCcpO1xuICAgICAgJGJvZHkucmVtb3ZlQ2xhc3MoKS5hZGRDbGFzcygnY29udGFjdCcpO1xuICAgIH0sXG4gICAgb25MZWF2ZTogZnVuY3Rpb24gb25MZWF2ZSgpIHtcbiAgICAgICRkb2N1bWVudC50cmlnZ2VyKCdjb250YWN0T25MZWF2ZScpO1xuICAgIH0sXG4gICAgb25MZWF2ZUNvbXBsZXRlZDogZnVuY3Rpb24gb25MZWF2ZUNvbXBsZXRlZCgpIHtcbiAgICAgICRkb2N1bWVudC50cmlnZ2VyKCdjb250YWN0T25MZWF2ZUNvbXBsZXRlZCcpO1xuICAgIH1cbiAgfSk7XG5cbiAgSG9tZXBhZ2UuaW5pdCgpO1xuICBQcm9qZWN0cy5pbml0KCk7XG4gIEFib3V0LmluaXQoKTtcbiAgQ29udGFjdC5pbml0KCk7XG5cbiAgQmFyYmEuUGpheC5zdGFydCgpO1xuICBCYXJiYS5QcmVmZXRjaC5pbml0KCk7XG5cbiAgdmFyIHNwZWVkID0gNzUwO1xuXG4gIHZhciB0cmFuc2l0aW9uID0gQmFyYmEuQmFzZVRyYW5zaXRpb24uZXh0ZW5kKHtcbiAgICBzdGFydDogZnVuY3Rpb24gc3RhcnQoKSB7XG4gICAgICBQcm9taXNlLmFsbChbdGhpcy5uZXdDb250YWluZXJMb2FkaW5nLCB0aGlzLnRyYW5zaXRpb25PdXQoKV0pLnRoZW4odGhpcy50cmFuc2l0aW9uSW4uYmluZCh0aGlzKSk7XG4gICAgfSxcbiAgICB0cmFuc2l0aW9uT3V0OiBmdW5jdGlvbiB0cmFuc2l0aW9uT3V0KCkge1xuICAgICAgdmFyICRlbE9sZCA9ICQodGhpcy5vbGRDb250YWluZXIpO1xuXG4gICAgICAkZWxPbGQucmVtb3ZlQ2xhc3MoJ3RyYW5zaXRpb24taW4nKS5hZGRDbGFzcygndHJhbnNpdGlvbi1vdXQnKTtcblxuICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAkZWxPbGQuc2hvdygpLnByb21pc2UoKTtcbiAgICAgIH0sIHNwZWVkKTtcbiAgICB9LFxuICAgIHRyYW5zaXRpb25JbjogZnVuY3Rpb24gdHJhbnNpdGlvbkluKCkge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICB2YXIgJGVsTmV3ID0gJCh0aGlzLm5ld0NvbnRhaW5lcik7XG5cbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAkKF90aGlzMi5vbGRDb250YWluZXIpLmhpZGUoKTtcbiAgICAgICAgJChfdGhpczIub2xkQ29udGFpbmVyKS5zaG93KCk7XG4gICAgICAgIF90aGlzLmRvbmUoKTtcbiAgICAgIH0sIHNwZWVkKTtcblxuICAgICAgJGVsTmV3LmNzcyh7XG4gICAgICAgIHZpc2liaWxpdHk6ICd2aXNpYmxlJ1xuICAgICAgfSk7XG5cbiAgICAgICRlbE5ldy5hZGRDbGFzcygndHJhbnNpdGlvbi1pbicpLnJlbW92ZUNsYXNzKCd0cmFuc2l0aW9uLW91dCcpO1xuICAgIH1cbiAgfSk7XG5cbiAgQmFyYmEuUGpheC5nZXRUcmFuc2l0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0cmFuc2l0aW9uO1xuICB9O1xuXG4gIEJhcmJhLkRpc3BhdGNoZXIub24oJ25ld1BhZ2VSZWFkeScsIGZ1bmN0aW9uIChjdXJyZW50U3RhdHVzLCBvbGRTdGF0dXMpIHtcblxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgd2luZG93LnNjcm9sbFRvKDAsIDApO1xuICAgIH0sIHNwZWVkKTtcblxuICAgICQoJGRvY3VtZW50KS50cmlnZ2VyKCdhbGxQYWdlc0VudGVyJyk7XG4gICAgY29uc29sZS5sb2coJ2FsbFBhZ2VzRW50ZXInKTtcblxuICAgIHN3aXRjaCAodHJ1ZSkge1xuXG4gICAgICBjYXNlIG9sZFN0YXR1cy5uYW1lc3BhY2UgPT09ICdwcm9qZWN0cycgJiYgY3VycmVudFN0YXR1cy5uYW1lc3BhY2UgPT09ICdwcm9qZWN0cyc6XG4gICAgICAgICRiYXJiYVdyYXBwZXIuYWRkQ2xhc3MoJ3RlcnRpYXJ5LXRyYW5zaXRpb24nKTtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgd2luZG93LnNjcm9sbFRvKDAsIDApO1xuICAgICAgICB9LCBzcGVlZCk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIGN1cnJlbnRTdGF0dXMubmFtZXNwYWNlID09PSAnaG9tZXBhZ2UnOlxuICAgICAgICAkYmFyYmFXcmFwcGVyLnJlbW92ZUNsYXNzKCdmYWRlLWluJyk7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHdpbmRvdy5zY3JvbGxUbygwLCAwKTtcbiAgICAgICAgICAkYmFyYmFXcmFwcGVyLmFkZENsYXNzKCdmYWRlLWluJyk7XG4gICAgICAgIH0sIHNwZWVkKTtcbiAgICAgICAgY29uc29sZS5sb2coJ2hvbWVwYWdlJyk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICAkYmFyYmFXcmFwcGVyLnJlbW92ZUNsYXNzKCk7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHdpbmRvdy5zY3JvbGxUbygwLCAwKTtcbiAgICAgICAgfSwgc3BlZWQpO1xuICAgIH1cbiAgfSk7XG59O1xuXG4kKGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHBhZ2VUcmFuc2l0aW9ucygpO1xufSk7XG4iLCJmdW5jdGlvbiBkaXJlY3Rpb25Bd2FyZUJ1dHRvbigpIHtcbiAgJCgnLmJ0bicpXG4gICAgLm9uKCdtb3VzZWVudGVyJywgZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIHBhcmVudE9mZnNldCA9ICQodGhpcykub2Zmc2V0KCksXG4gICAgICAgIHJlbFggPSBlLnBhZ2VYIC0gcGFyZW50T2Zmc2V0LmxlZnQsXG4gICAgICAgIHJlbFkgPSBlLnBhZ2VZIC0gcGFyZW50T2Zmc2V0LnRvcDtcbiAgICAgICQodGhpcykuZmluZCgnc3BhbicpLmNzcyh7dG9wOnJlbFksIGxlZnQ6cmVsWH0pXG4gICAgfSlcbiAgICAub24oJ21vdXNlb3V0JywgZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIHBhcmVudE9mZnNldCA9ICQodGhpcykub2Zmc2V0KCksXG4gICAgICAgIHJlbFggPSBlLnBhZ2VYIC0gcGFyZW50T2Zmc2V0LmxlZnQsXG4gICAgICAgIHJlbFkgPSBlLnBhZ2VZIC0gcGFyZW50T2Zmc2V0LnRvcDtcbiAgICAgICQodGhpcykuZmluZCgnc3BhbicpLmNzcyh7dG9wOnJlbFksIGxlZnQ6cmVsWH0pXG4gICAgfSk7XG59XG5cbmRpcmVjdGlvbkF3YXJlQnV0dG9uKCk7XG5cbiQoJGRvY3VtZW50KS5vbignYWxsUGFnZXNFbnRlcicsIGZ1bmN0aW9uKCkge1xuICBkaXJlY3Rpb25Bd2FyZUJ1dHRvbigpO1xufSk7XG4iLCJmdW5jdGlvbiBwYXJhbGxheCgpIHtcbiAgdmFyICRjb250YWluZXIgPSAkKCcuZGV2aWNlcycpO1xuICB2YXIgJGRlc2t0b3AgPSAkKCdpbWcuZGVza3RvcCcpO1xuICB2YXIgJGxhcHRvcCA9ICQoJ2ltZy5sYXB0b3AnKTtcbiAgdmFyICRtb2JpbGUgPSAkKCdpbWcubW9iaWxlJyk7XG4gIHZhciBjb250YWluZXJfdyA9ICRjb250YWluZXIud2lkdGgoKTtcbiAgdmFyIGNvbnRhaW5lcl9oID0gJGNvbnRhaW5lci5oZWlnaHQoKTtcblxuICAkKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uICgpIHtcbiAgICBjb250YWluZXJfdyA9ICRjb250YWluZXIud2lkdGgoKTtcbiAgICBjb250YWluZXJfaCA9ICRjb250YWluZXIuaGVpZ2h0KCk7XG4gIH0pO1xuXG4gICQod2luZG93KS5vbignbW91c2Vtb3ZlIGRldmljZW9yaWVudGF0aW9uJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgdmFyIGlzTW9iaWxlID0gd2luZG93Lm1hdGNoTWVkaWEoJyhtYXgtd2lkdGg6IDc2N3B4KScpLm1hdGNoZXM7XG4gICAgdmFyIHBvc194ID0gaXNNb2JpbGUgPyBNYXRoLnJvdW5kKGV2ZW50Lm9yaWdpbmFsRXZlbnQuZ2FtbWEgKiA1MCkgOiBldmVudC5wYWdlWDtcbiAgICB2YXIgcG9zX3kgPSBpc01vYmlsZSA/IE1hdGgucm91bmQoZXZlbnQub3JpZ2luYWxFdmVudC5iZXRhICogNTApIDogZXZlbnQucGFnZVk7XG4gICAgdmFyIGxlZnQgPSBjb250YWluZXJfdyAvIDIgLSBwb3NfeDtcbiAgICB2YXIgdG9wID0gY29udGFpbmVyX2ggLyAyIC0gcG9zX3k7XG5cbiAgICAkKCcjZGV2aWNlT3JpZW50YXRpb24nKS50ZXh0KCdnYW1tYTogJyArIGV2ZW50Lm9yaWdpbmFsRXZlbnQuZ2FtbWEgKyAnIGJldGE6ICcgKyBldmVudC5vcmlnaW5hbEV2ZW50LmJldGEpO1xuXG4gICAgZnVuY3Rpb24gdHJhbnNsYXRlVHdlZW4oYXJncykge1xuICAgICAgVHdlZW5MaXRlLnRvKGFyZ3MuZWwsIDEsIHtcbiAgICAgICAgY3NzOiB7XG4gICAgICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlWCgnICsgbGVmdCAvIGFyZ3MucG9zTGVmdCArICdweCkgdHJhbnNsYXRlWSgnICsgdG9wIC8gYXJncy5wb3NUb3AgKyAncHgpJ1xuICAgICAgICB9LFxuICAgICAgICBlYXNlOiBFeHBvLmVhc2VPdXQsXG4gICAgICAgIG92ZXJ3cml0ZTogJ2FsbCdcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHZhciBwYXJhbGxheFByb3BzQXJyYXkgPSBbXG4gICAgICB7IGVsOiAkZGVza3RvcCwgcG9zTGVmdDogNzUsIHBvc1RvcDogMzV9LFxuICAgICAgeyBlbDogJGxhcHRvcCwgcG9zTGVmdDogNDUsIHBvc1RvcDogMTV9LFxuICAgICAgeyBlbDogJG1vYmlsZSwgcG9zTGVmdDogNTUsIHBvc1RvcDogMjV9XG4gICAgXTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFyYWxsYXhQcm9wc0FycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICB0cmFuc2xhdGVUd2VlbihwYXJhbGxheFByb3BzQXJyYXlbaV0pO1xuICAgIH1cbiAgfSk7XG59XG5cbiQoZG9jdW1lbnQpLm9uKCdob21lcGFnZU9uRW50ZXJDb21wbGV0ZWQnLCBmdW5jdGlvbigpIHtcbiAgcGFyYWxsYXgoKTtcbn0pO1xuIiwidmFyIHNldHRpbmdzID0ge1xuICBzZWN0aW9uIDogJy5zY3JvbGwtc2VjdGlvbicsXG4gIGVhc2luZzogJ2Vhc2VPdXRFeHBvJyxcbiAgc2Nyb2xsU3BlZWQ6IDEwMDAsXG4gIG9mZnNldCA6IDAsXG4gIHN0YW5kYXJkU2Nyb2xsRWxlbWVudHM6ICdib2R5Om5vdCguaG9tZSknLFxuICBzY3JvbGxiYXJzOiB0cnVlLFxuICBzZXRIZWlnaHRzOiB0cnVlLFxuICBvdmVyZmxvd1Njcm9sbDogdHJ1ZSxcbiAgdXBkYXRlSGFzaDogZmFsc2UsXG4gIHRvdWNoU2Nyb2xsOiB0cnVlLFxuICBiZWZvcmU6ZnVuY3Rpb24oaSwgcGFuZWxzKSB7XG5cbiAgICB2YXIgcmVmID0gcGFuZWxzW2ldLmF0dHIoJ2RhdGEtc2VjdGlvbi1uYW1lJyk7XG4gICAgJCgnLnBhZ2luYXRpb24gLmFjdGl2ZScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAkKCcucGFnaW5hdGlvbicpLmZpbmQoJ2FbaHJlZj1cIiMnICsgcmVmICsgJ1wiXScpLmFkZENsYXNzKCdhY3RpdmUnKTtcblxuICAgICQoJy5zY3JvbGwtc2VjdGlvbicpLmVxKGkpXG4gICAgICAucmVtb3ZlQ2xhc3MoJ2FjdGl2ZSBwcmV2aW91cyBuZXh0JylcbiAgICAgIC5hZGRDbGFzcygnYWN0aXZlJylcbiAgICAgIC5zaWJsaW5ncygnLnNjcm9sbC1zZWN0aW9uJylcbiAgICAgIC5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG5cbiAgICAkKCcuc2Nyb2xsLXNlY3Rpb24nKS5lcShpIC0gMSlcbiAgICAgIC5yZW1vdmVDbGFzcygnYWN0aXZlIHByZXZpb3VzIG5leHQnKVxuICAgICAgLmFkZENsYXNzKCdwcmV2aW91cycpXG4gICAgICAuc2libGluZ3MoJy5zY3JvbGwtc2VjdGlvbicpXG4gICAgICAucmVtb3ZlQ2xhc3MoJ3ByZXZpb3VzJyk7XG5cbiAgICAkKCcuc2Nyb2xsLXNlY3Rpb24nKS5lcShpICsgMSlcbiAgICAgIC5yZW1vdmVDbGFzcygnYWN0aXZlIHByZXZpb3VzIG5leHQnKVxuICAgICAgLmFkZENsYXNzKCduZXh0JylcbiAgICAgIC5zaWJsaW5ncygnLnNjcm9sbC1zZWN0aW9uJylcbiAgICAgIC5yZW1vdmVDbGFzcygnbmV4dCcpO1xuXG4gICAgaWYgKGkgPT09IHBhbmVscy5sZW5ndGggLSAxKSB7XG4gICAgICAkKCcuYXJyb3ctZG93bicpLmFkZENsYXNzKCdkaXNhYmxlZCcpO1xuICAgIH0gZWxzZSBpZiAoaSA9PT0gMCkge1xuICAgICAgJCgnLmFycm93LXVwJykuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICQoJy5hcnJvdy11cCwgLmFycm93LWRvd24nKS5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcbiAgICB9XG4gIH1cbn07XG5cbmZ1bmN0aW9uIHBhZ2luYXRpb25BcnJvd3NNb3ZlKCkge1xuICAkKCcucGFnaW5hdGlvbiBhJykuZWFjaChmdW5jdGlvbiAoaSkge1xuICAgICQodGhpcykuY2xpY2soZnVuY3Rpb24gKGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICQuc2Nyb2xsaWZ5Lm1vdmUoaSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gICQoJy5hcnJvdy1kb3duJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICQuc2Nyb2xsaWZ5Lm5leHQoKTtcbiAgfSk7XG5cbiAgJCgnLmFycm93LXVwJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICQuc2Nyb2xsaWZ5LnByZXZpb3VzKCk7XG4gIH0pO1xufVxuXG5cbmlmKCQoJ2JvZHknKS5oYXNDbGFzcygnaG9tZScpKSB7XG4gICQuc2Nyb2xsaWZ5KHNldHRpbmdzKTtcbiAgd2luZG93LnNjcm9sbFRvKDAsIDApO1xuICAkLnNjcm9sbGlmeS5tb3ZlKDApO1xufVxuXG4kKGRvY3VtZW50KS5vbignaG9tZXBhZ2VPbkVudGVyJywgZnVuY3Rpb24oKSB7XG4gIHdpbmRvdy5zY3JvbGxUbygwLCAwKTtcbiAgJC5zY3JvbGxpZnkubW92ZSgwKTtcbiAgcGFnaW5hdGlvbkFycm93c01vdmUoKTtcbn0pO1xuXG4kKGRvY3VtZW50KS5vbignaG9tZXBhZ2VPbkVudGVyQ29tcGxldGVkJywgZnVuY3Rpb24oKSB7XG4gICQuc2Nyb2xsaWZ5KHNldHRpbmdzKTtcbn0pO1xuXG4kKGRvY3VtZW50KS5vbignaG9tZXBhZ2VPbkxlYXZlQ29tcGxldGVkJywgZnVuY3Rpb24oKSB7XG4gICQuc2Nyb2xsaWZ5LmRlc3Ryb3koKTtcbn0pO1xuXG5cbiIsInZhciBhYm91dCA9IGZ1bmN0aW9uKCkge1xuXG4gICRkb2N1bWVudC5vbignYWJvdXRPbkVudGVyJywgZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coJ2Fib3V0T25FbnRlcicpO1xuICB9KTtcblxuICAkZG9jdW1lbnQub24oJ2Fib3V0T25FbnRlckNvbXBsZXRlZCcsIGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKCdhYm91dE9uRW50ZXJDb21wbGV0ZWQnKTtcbiAgfSk7XG5cbiAgJGRvY3VtZW50Lm9uKCdhYm91dE9uTGVhdmUnLCBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygnYWJvdXRPbkxlYXZlJyk7XG4gIH0pO1xuXG4gICRkb2N1bWVudC5vbignYWJvdXRPbkxlYXZlQ29tcGxldGVkJywgZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coJ2Fib3V0T25MZWF2ZUNvbXBsZXRlZCcpO1xuICB9KTtcbn07XG5cbiQoZnVuY3Rpb24gKCkge1xuICByZXR1cm4gYWJvdXQoKTtcbn0pO1xuIiwiJChkb2N1bWVudCkub24oJ2hvbWVwYWdlT25FbnRlckNvbXBsZXRlZCcsIGZ1bmN0aW9uKCkge1xuICAkKCcuY2Fyb3VzZWwnKS5zbGljayh7XG4gICAgaW5maW5pdGU6IHRydWUsXG4gICAgdmFyaWFibGVXaWR0aDogdHJ1ZSxcbiAgICBzbGlkZXNUb1Nob3c6IDEsXG4gICAgcHJldkFycm93OiAkKCcuYXJyb3ctcHJldicpLFxuICAgIG5leHRBcnJvdzogJCgnLmFycm93LW5leHQnKVxuICB9KTtcblxuICAkKCcuc2xpY2stYWN0aXZlJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuXG4gICQoJy5jYXJvdXNlbCcpLm9uKCdhZnRlckNoYW5nZScsIGZ1bmN0aW9uKCkge1xuICAgICQodGhpcykuZmluZCgnLnNsaWRlLnNsaWNrLWFjdGl2ZScpLmFkZENsYXNzKCdhbmltYXRlJylcbiAgICAgIC5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhbmltYXRlJyk7XG4gIH0pO1xuXG4gICQoJy5jYXJvdXNlbCAuc2xpY2stYWN0aXZlJykuYWRkQ2xhc3MoJ2FuaW1hdGUnKTtcblxufSk7XG4iLCJ2YXIgY29udGFjdCA9IGZ1bmN0aW9uKCkge1xuXG4gICRkb2N1bWVudC5vbignY29udGFjdE9uRW50ZXInLCBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygnY29udGFjdE9uRW50ZXInKTtcbiAgfSk7XG5cbiAgJGRvY3VtZW50Lm9uKCdjb250YWN0T25FbnRlckNvbXBsZXRlZCcsIGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKCdjb250YWN0T25FbnRlckNvbXBsZXRlZCcpO1xuICB9KTtcblxuICAkZG9jdW1lbnQub24oJ2NvbnRhY3RPbkxlYXZlJywgZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coJ2NvbnRhY3RPbkxlYXZlJyk7XG4gIH0pO1xuXG4gICRkb2N1bWVudC5vbignY29udGFjdE9uTGVhdmVDb21wbGV0ZWQnLCBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygnY29udGFjdE9uTGVhdmVDb21wbGV0ZWQnKTtcbiAgfSk7XG59O1xuXG4kKGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIGNvbnRhY3QoKTtcbn0pO1xuIiwidmFyIGhvbWVQYWdlID0gZnVuY3Rpb24oKSB7XG5cbiAgZnVuY3Rpb24gbGFuZGluZ1BhZ2VJbnRyb0FuaW1hdGlvbigpIHtcbiAgICAkKCdzZWN0aW9uLmludHJvJykuYWRkQ2xhc3MoJ2xhbmRpbmctYW5pbWF0aW9uJyk7XG5cbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgJCgnc2VjdGlvbi5pbnRybycpLnJlbW92ZUNsYXNzKCdsYW5kaW5nLWFuaW1hdGlvbicpO1xuICAgIH0sIDIwMDApXG4gIH1cblxuICBpZiAoJCgnYm9keScpLmhhc0NsYXNzKCdob21lJykpIHtcbiAgICBsYW5kaW5nUGFnZUludHJvQW5pbWF0aW9uKCk7XG4gIH1cblxuICAkZG9jdW1lbnQub24oJ2hvbWVwYWdlT25FbnRlcicsIGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKCdob21lcGFnZU9uRW50ZXInKTtcbiAgICBsYW5kaW5nUGFnZUludHJvQW5pbWF0aW9uKCk7XG4gIH0pO1xuXG4gICRkb2N1bWVudC5vbignaG9tZXBhZ2VPbkVudGVyQ29tcGxldGVkJywgZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coJ2hvbWVwYWdlT25FbnRlckNvbXBsZXRlZCcpO1xuICB9KTtcblxuICAkZG9jdW1lbnQub24oJ2hvbWVwYWdlT25MZWF2ZScsIGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKCdob21lcGFnZU9uTGVhdmUnKTtcbiAgfSk7XG5cbiAgJGRvY3VtZW50Lm9uKCdob21lcGFnZU9uTGVhdmVDb21wbGV0ZWQnLCBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygnaG9tZXBhZ2VPbkxlYXZlQ29tcGxldGVkJyk7XG4gIH0pO1xufTtcblxuXG5pZiAoJCgnYm9keScpLmhhc0NsYXNzKCdob21lJykpIHtcbiAgJChmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGhvbWVQYWdlKCk7XG4gIH0pO1xufVxuIiwiJC5mbi5pc09uU2NyZWVuID0gZnVuY3Rpb24gKCkge1xuICB2YXIgdmlld3BvcnQgPSB7XG4gICAgdG9wOiAkKHdpbmRvdykuc2Nyb2xsVG9wKClcbiAgfTtcblxuICB2aWV3cG9ydC5ib3R0b20gPSB2aWV3cG9ydC50b3AgKyAkKHdpbmRvdykuaGVpZ2h0KCk7XG5cbiAgdmFyIGJvdW5kcyA9IHRoaXMub2Zmc2V0KCk7XG4gIGJvdW5kcy5ib3R0b20gPSB0aGlzLm9mZnNldCgpLnRvcCArIHRoaXMub3V0ZXJIZWlnaHQoKTtcblxuICByZXR1cm4gISh2aWV3cG9ydC5ib3R0b20gPCBib3VuZHMudG9wIHx8IHZpZXdwb3J0LnRvcCA+IGJvdW5kcy5ib3R0b20pO1xufTtcblxuJCh3aW5kb3cpLm9uKCdzY3JvbGwnLCBmdW5jdGlvbiAoKSB7XG5cbiAgJCgnLnByb2plY3QgLmltZycpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICQodGhpcykuaXNPblNjcmVlbigpID09PSB0cnVlID8gJCh0aGlzKS5hZGRDbGFzcygnaW4tdmlld3BvcnQnKSA6ICQodGhpcykucmVtb3ZlQ2xhc3MoJ2luLXZpZXdwb3J0Jyk7XG4gIH0pO1xufSk7XG4iLCJ2YXIgcHJvamVjdHMgPSBmdW5jdGlvbigpIHtcblxuICAkZG9jdW1lbnQub24oJ3Byb2plY3RzT25FbnRlcicsIGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKCdwcm9qZWN0c09uRW50ZXInKTtcbiAgfSk7XG5cbiAgJGRvY3VtZW50Lm9uKCdwcm9qZWN0c09uRW50ZXJDb21wbGV0ZWQnLCBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygncHJvamVjdHNPbkVudGVyQ29tcGxldGVkJyk7XG4gIH0pO1xuXG4gICRkb2N1bWVudC5vbigncHJvamVjdHNPbkxlYXZlJywgZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coJ3Byb2plY3RzT25MZWF2ZScpO1xuICB9KTtcblxuICAkZG9jdW1lbnQub24oJ3Byb2plY3RzT25MZWF2ZUNvbXBsZXRlZCcsIGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKCdwcm9qZWN0c09uTGVhdmVDb21wbGV0ZWQnKTtcbiAgfSk7XG59O1xuXG4kKGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHByb2plY3RzKCk7XG59KTtcbiIsInZhciBtb3JwaEVscyA9IGZ1bmN0aW9uKCkge1xuICBmdW5jdGlvbiBzbmFwTW9ycGhIb3ZlcihhcmdzKSB7XG4gICAgdmFyIHMgPSBTbmFwKGFyZ3MuZWwpO1xuICAgIHZhciBwYXRoID0gcy5zZWxlY3QoJ3BhdGgnKTtcblxuICAgIHZhciBwYXRoQ29uZmlnID0ge1xuICAgICAgdG9TcGVlZDogYXJncy50b1NwZWVkLFxuICAgICAgZnJvbVNwZWVkOiBhcmdzLmZyb21TcGVlZCxcbiAgICAgIGZyb206IHBhdGguYXR0cignZCcpLFxuICAgICAgdG86IGFyZ3MuZWwuZ2V0QXR0cmlidXRlKCdkYXRhLW1vcnBoLWFjdGl2ZScpXG4gICAgfTtcblxuICAgIGFyZ3MuZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgZnVuY3Rpb24gKCkge1xuICAgICAgcGF0aC5hbmltYXRlKHsgJ3BhdGgnOiBwYXRoQ29uZmlnLnRvIH0sIHBhdGhDb25maWcudG9TcGVlZCwgYXJncy5lYXNlSW4pO1xuICAgIH0pO1xuXG4gICAgYXJncy5lbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW91dCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHBhdGguYW5pbWF0ZSh7ICdwYXRoJzogcGF0aENvbmZpZy5mcm9tIH0sIHBhdGhDb25maWcuZnJvbVNwZWVkLCBhcmdzLmVhc2VPdXQpO1xuICAgIH0pO1xuICB9XG5cbiAgdmFyIHNuYXBFbHMgPSBbXG4gICAge2VsOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXJyb3ctdXAnKSwgZWFzZUluOiBtaW5hLmVhc2VpbiwgZWFzZU91dDogbWluYS5lYXNlb3V0LCB0b1NwZWVkOiAzMDAsIGZyb21TcGVlZDogMTUwfSxcbiAgICB7ZWw6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hcnJvdy1kb3duJyksIGVhc2VJbjogbWluYS5lYXNlaW4sIGVhc2VPdXQ6IG1pbmEuZWFzZW91dCwgdG9TcGVlZDogMzAwLCBmcm9tU3BlZWQ6IDE1MH0sXG4gICAge2VsOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXJyb3ctbmV4dCcpLCBlYXNlSW46IG1pbmEuZWFzZWluLCBlYXNlT3V0OiBtaW5hLmJvdW5jZSwgdG9TcGVlZDogMzAwLCBmcm9tU3BlZWQ6IDUwMH0sXG4gICAge2VsOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXJyb3ctcHJldicpLCBlYXNlSW46IG1pbmEuZWFzZWluLCBlYXNlT3V0OiBtaW5hLmJvdW5jZSwgdG9TcGVlZDogMzAwLCBmcm9tU3BlZWQ6IDUwMH1cbiAgXTtcblxuICBmb3IgKHZhciBpPTA7IGk8c25hcEVscy5sZW5ndGg7IGkrKykge1xuICAgIHNuYXBNb3JwaEhvdmVyKHNuYXBFbHNbaV0pO1xuICB9XG59O1xuXG5pZiAoJCgnYm9keScpLmhhc0NsYXNzKCdob21lJykpIHtcbiAgbW9ycGhFbHMoKTtcbn1cblxuJChkb2N1bWVudCkub24oJ2hvbWVwYWdlT25FbnRlcicsIGZ1bmN0aW9uKCkge1xuICBtb3JwaEVscygpO1xufSk7XG4iXX0=
