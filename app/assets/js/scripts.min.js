"use strict";function directionAwareButton(){$(".btn").on("mouseenter",function(e){var o=$(this).offset(),n=e.pageX-o.left,t=e.pageY-o.top;$(this).find("span").css({top:t,left:n})}).on("mouseout",function(e){var o=$(this).offset(),n=e.pageX-o.left,t=e.pageY-o.top;$(this).find("span").css({top:t,left:n})})}function parallax(){var e=$(".devices"),o=$("img.desktop"),n=$("img.laptop"),t=$("img.mobile"),a=e.width(),r=e.height();$(window).resize(function(){a=e.width(),r=e.height()}),$(window).on("mousemove deviceorientation",function(e){function i(e){TweenLite.to(e.el,1,{css:{transform:"translateX("+d/e.posLeft+"px) translateY("+u/e.posTop+"px)"},ease:Expo.easeOut,overwrite:"all"})}var s=window.matchMedia("(max-width: 767px)").matches,c=s?Math.round(50*e.originalEvent.gamma):e.pageX,l=s?Math.round(50*e.originalEvent.beta):e.pageY,d=a/2-c,u=r/2-l;$("#deviceOrientation").text("gamma: "+e.originalEvent.gamma+" beta: "+e.originalEvent.beta);for(var m=[{el:o,posLeft:75,posTop:35},{el:n,posLeft:45,posTop:15},{el:t,posLeft:55,posTop:25}],p=0;p<m.length;p++)i(m[p])})}function paginationArrowsMove(){$(".pagination a").each(function(e){$(this).click(function(o){o.preventDefault(),$.scrollify.move(e)})}),$(".arrow-down").click(function(){$.scrollify.next()}),$(".arrow-up").click(function(){$.scrollify.previous()})}var $document=$(document),$body=$("body"),$barbaWrapper=$("#barba-wrapper"),pageTransitions=function(){var e=Barba.BaseView.extend({namespace:"homepage",onEnter:function(){$document.trigger("homepageOnEnter"),$body.addClass("home"),$body.attr("id","home")},onEnterCompleted:function(){$document.trigger("homepageOnEnterCompleted"),$body.removeClass().addClass("home")},onLeave:function(){$document.trigger("homepageOnLeave")},onLeaveCompleted:function(){$document.trigger("homepageOnLeaveCompleted")}}),o=Barba.BaseView.extend({namespace:"projects",onEnter:function(){$document.trigger("projectsOnEnter"),$body.addClass("projects"),$body.attr("id","projects")},onEnterCompleted:function(){$document.trigger("projectsOnEnterCompleted"),$body.removeClass().addClass("projects")},onLeave:function(){$document.trigger("projectsOnLeave")},onLeaveCompleted:function(){$document.trigger("projectsOnLeaveCompleted")}}),n=Barba.BaseView.extend({namespace:"about",onEnter:function(){$document.trigger("aboutOnEnter"),$body.addClass("about"),$body.attr("id","about")},onEnterCompleted:function(){$document.trigger("aboutOnEnterCompleted"),$body.removeClass().addClass("about")},onLeave:function(){$document.trigger("aboutOnLeave")},onLeaveCompleted:function(){$document.trigger("aboutOnLeaveCompleted")}});e.init(),o.init(),n.init(),Barba.Pjax.start(),Barba.Prefetch.init();var t=750,a=Barba.BaseTransition.extend({start:function(){Promise.all([this.newContainerLoading,this.transitionOut()]).then(this.transitionIn.bind(this))},transitionOut:function(){var e=$(this.oldContainer);e.removeClass("transition-in").addClass("transition-out"),setTimeout(function(){return e.show().promise()},t)},transitionIn:function(){var e=this,o=this,n=$(this.newContainer);setTimeout(function(){$(e.oldContainer).hide(),$(e.oldContainer).show(),o.done()},t),n.css({visibility:"visible"}),n.addClass("transition-in").removeClass("transition-out")}});Barba.Pjax.getTransition=function(){return a},Barba.Dispatcher.on("newPageReady",function(e,o){switch($($document).trigger("allPagesEnter"),!0){case"projects"===o.namespace&&"projects"===e.namespace:$barbaWrapper.addClass("tertiary-transition"),setTimeout(function(){window.scrollTo(0,0)},t);break;case"homepage"===e.namespace:$barbaWrapper.removeClass("fade-in"),setTimeout(function(){window.scrollTo(0,0),$barbaWrapper.addClass("fade-in")},t),console.log("homepage");break;default:$barbaWrapper.removeClass(),setTimeout(function(){window.scrollTo(0,0)},t)}})};$(function(){return pageTransitions()});var about=function(){$document.on("aboutOnEnter",function(){console.log("aboutOnEnter")}),$document.on("aboutOnEnterCompleted",function(){console.log("aboutOnEnterCompleted")}),$document.on("aboutOnLeave",function(){console.log("aboutOnLeave")}),$document.on("aboutOnLeaveCompleted",function(){console.log("aboutOnLeaveCompleted")})};$(function(){return about()}),directionAwareButton(),$($document).on("allPagesEnter",function(){directionAwareButton()}),$(document).on("homepageOnEnterCompleted",function(){$(".carousel").slick({infinite:!0,variableWidth:!0,slidesToShow:1,prevArrow:$(".arrow-prev"),nextArrow:$(".arrow-next")}),$(".btn").click(function(){$(this).closest(".circle").addClass("active")})});var homePage=function(){$document.on("homepageOnEnter",function(){console.log("homepageOnEnter")}),$document.on("homepageOnEnterCompleted",function(){console.log("homepageOnEnterCompleted")}),$document.on("homepageOnLeave",function(){console.log("homepageOnLeave")}),$document.on("homepageOnLeaveCompleted",function(){console.log("homepageOnLeaveCompleted")})};$(function(){return homePage()});var $body=$("body"),$navToggle=$(".nav, nav ul li a");$navToggle.on("click",function(){$(this).toggleClass("is-closed"),$(this).hasClass("is-closed")?$body.removeClass("is-open"):$body.addClass("is-open")}),$(document).on("homepageOnEnterCompleted",function(){parallax()});var projects=function(){$document.on("projectsOnEnter",function(){console.log("projectsOnEnter")}),$document.on("projectsOnEnterCompleted",function(){console.log("projectsOnEnterCompleted")}),$document.on("projectsOnLeave",function(){console.log("projectsOnLeave")}),$document.on("projectsOnLeaveCompleted",function(){console.log("projectsOnLeaveCompleted")})};$(function(){return projects()});var settings={section:".scroll-section",easing:"easeOutExpo",scrollSpeed:1e3,offset:0,standardScrollElements:"body:not(.home)",scrollbars:!0,setHeights:!0,overflowScroll:!0,updateHash:!1,touchScroll:!0,before:function(e,o){var n=o[e].attr("data-section-name");$(".pagination .active").removeClass("active"),$(".pagination").find('a[href="#'+n+'"]').addClass("active"),$(".scroll-section").eq(e).removeClass("active previous next").addClass("active").siblings(".scroll-section").removeClass("active"),$(".scroll-section").eq(e-1).removeClass("active previous next").addClass("previous").siblings(".scroll-section").removeClass("previous"),$(".scroll-section").eq(e+1).removeClass("active previous next").addClass("next").siblings(".scroll-section").removeClass("next"),e===o.length-1?$(".arrow-down").addClass("disabled"):0===e?$(".arrow-up").addClass("disabled"):$(".arrow-up, .arrow-down").removeClass("disabled")}};$("body").hasClass("home")&&($.scrollify(settings),window.scrollTo(0,0),$.scrollify.move(0)),$(document).on("homepageOnEnter",function(){window.scrollTo(0,0),$.scrollify.move(0),paginationArrowsMove()}),$(document).on("homepageOnEnterCompleted",function(){$.scrollify(settings)}),$(document).on("homepageOnLeaveCompleted",function(){$.scrollify.destroy()});var morphEls=function(){function e(e){var o=Snap(e.el),n=o.select("path"),t={toSpeed:e.toSpeed,fromSpeed:e.fromSpeed,from:n.attr("d"),to:e.el.getAttribute("data-morph-active")};e.el.addEventListener("mouseover",function(){n.animate({path:t.to},t.toSpeed,e.easeIn)}),e.el.addEventListener("mouseout",function(){n.animate({path:t.from},t.fromSpeed,e.easeOut)})}for(var o=[{el:document.querySelector(".arrow-up"),easeIn:mina.easein,easeOut:mina.bounce,toSpeed:300,fromSpeed:500},{el:document.querySelector(".arrow-down"),easeIn:mina.easein,easeOut:mina.bounce,toSpeed:300,fromSpeed:500},{el:document.querySelector(".arrow-next"),easeIn:mina.easein,easeOut:mina.bounce,toSpeed:300,fromSpeed:500},{el:document.querySelector(".arrow-prev"),easeIn:mina.easein,easeOut:mina.bounce,toSpeed:300,fromSpeed:500}],n=0;n<o.length;n++)e(o[n])};morphEls(),$(document).on("homepageOnEnter",function(){morphEls()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl9iYXJiYVRyYW5zaXRpb25zLmpzIiwiYnV0dG9uRWZmZWN0LmpzIiwicGFyYWxsYXguanMiLCJzY3JvbGxpZnkuanMiLCJhYm91dC5qcyIsImNhcm91c2Vscy5qcyIsImhvbWUuanMiLCJuYXZpZ2F0aW9uLmpzIiwicHJvamVjdHMuanMiLCJzbmFwRWxlbWVudHMuanMiXSwibmFtZXMiOlsiZGlyZWN0aW9uQXdhcmVCdXR0b24iLCIkIiwib24iLCJlIiwicGFyZW50T2Zmc2V0IiwidGhpcyIsIm9mZnNldCIsInJlbFgiLCJwYWdlWCIsImxlZnQiLCJyZWxZIiwicGFnZVkiLCJ0b3AiLCJmaW5kIiwiY3NzIiwicGFyYWxsYXgiLCIkY29udGFpbmVyIiwiJGRlc2t0b3AiLCIkbGFwdG9wIiwiJG1vYmlsZSIsImNvbnRhaW5lcl93Iiwid2lkdGgiLCJjb250YWluZXJfaCIsImhlaWdodCIsIndpbmRvdyIsInJlc2l6ZSIsImV2ZW50IiwidHJhbnNsYXRlVHdlZW4iLCJhcmdzIiwiVHdlZW5MaXRlIiwidG8iLCJlbCIsInRyYW5zZm9ybSIsInBvc0xlZnQiLCJwb3NUb3AiLCJlYXNlIiwiRXhwbyIsImVhc2VPdXQiLCJvdmVyd3JpdGUiLCJpc01vYmlsZSIsIm1hdGNoTWVkaWEiLCJtYXRjaGVzIiwicG9zX3giLCJNYXRoIiwicm91bmQiLCJvcmlnaW5hbEV2ZW50IiwiZ2FtbWEiLCJwb3NfeSIsImJldGEiLCJ0ZXh0IiwicGFyYWxsYXhQcm9wc0FycmF5IiwiaSIsImxlbmd0aCIsInBhZ2luYXRpb25BcnJvd3NNb3ZlIiwiZWFjaCIsImNsaWNrIiwicHJldmVudERlZmF1bHQiLCJzY3JvbGxpZnkiLCJtb3ZlIiwibmV4dCIsInByZXZpb3VzIiwiJGRvY3VtZW50IiwiZG9jdW1lbnQiLCIkYm9keSIsIiRiYXJiYVdyYXBwZXIiLCJwYWdlVHJhbnNpdGlvbnMiLCJIb21lcGFnZSIsIkJhcmJhIiwiQmFzZVZpZXciLCJleHRlbmQiLCJuYW1lc3BhY2UiLCJvbkVudGVyIiwidHJpZ2dlciIsImFkZENsYXNzIiwiYXR0ciIsIm9uRW50ZXJDb21wbGV0ZWQiLCJyZW1vdmVDbGFzcyIsIm9uTGVhdmUiLCJvbkxlYXZlQ29tcGxldGVkIiwiUHJvamVjdHMiLCJBYm91dCIsImluaXQiLCJQamF4Iiwic3RhcnQiLCJQcmVmZXRjaCIsInNwZWVkIiwidHJhbnNpdGlvbiIsIkJhc2VUcmFuc2l0aW9uIiwiUHJvbWlzZSIsImFsbCIsIm5ld0NvbnRhaW5lckxvYWRpbmciLCJ0cmFuc2l0aW9uT3V0IiwidGhlbiIsInRyYW5zaXRpb25JbiIsImJpbmQiLCIkZWxPbGQiLCJvbGRDb250YWluZXIiLCJzZXRUaW1lb3V0Iiwic2hvdyIsInByb21pc2UiLCJfdGhpczIiLCJfdGhpcyIsIiRlbE5ldyIsIm5ld0NvbnRhaW5lciIsImhpZGUiLCJkb25lIiwidmlzaWJpbGl0eSIsImdldFRyYW5zaXRpb24iLCJEaXNwYXRjaGVyIiwiY3VycmVudFN0YXR1cyIsIm9sZFN0YXR1cyIsInNjcm9sbFRvIiwiY29uc29sZSIsImxvZyIsImFib3V0Iiwic2xpY2siLCJpbmZpbml0ZSIsInZhcmlhYmxlV2lkdGgiLCJzbGlkZXNUb1Nob3ciLCJwcmV2QXJyb3ciLCJuZXh0QXJyb3ciLCJjbG9zZXN0IiwiaG9tZVBhZ2UiLCIkbmF2VG9nZ2xlIiwidG9nZ2xlQ2xhc3MiLCJoYXNDbGFzcyIsInByb2plY3RzIiwic2V0dGluZ3MiLCJzZWN0aW9uIiwiZWFzaW5nIiwic2Nyb2xsU3BlZWQiLCJzdGFuZGFyZFNjcm9sbEVsZW1lbnRzIiwic2Nyb2xsYmFycyIsInNldEhlaWdodHMiLCJvdmVyZmxvd1Njcm9sbCIsInVwZGF0ZUhhc2giLCJ0b3VjaFNjcm9sbCIsImJlZm9yZSIsInBhbmVscyIsInJlZiIsImVxIiwic2libGluZ3MiLCJkZXN0cm95IiwibW9ycGhFbHMiLCJzbmFwTW9ycGhIb3ZlciIsInMiLCJTbmFwIiwicGF0aCIsInNlbGVjdCIsInBhdGhDb25maWciLCJ0b1NwZWVkIiwiZnJvbVNwZWVkIiwiZnJvbSIsImdldEF0dHJpYnV0ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJhbmltYXRlIiwiZWFzZUluIiwic25hcEVscyIsInF1ZXJ5U2VsZWN0b3IiLCJtaW5hIiwiZWFzZWluIiwiYm91bmNlIl0sIm1hcHBpbmdzIjoiQUFBQSxZQ0FBLFNBQUFBLHdCQUNBQyxFQUFBLFFBQ0FDLEdBQUEsYUFBQSxTQUFBQyxHQUNBLEdBQUFDLEdBQUFILEVBQUFJLE1BQUFDLFNBQ0FDLEVBQUFKLEVBQUFLLE1BQUFKLEVBQUFLLEtBQ0FDLEVBQUFQLEVBQUFRLE1BQUFQLEVBQUFRLEdBQ0FYLEdBQUFJLE1BQUFRLEtBQUEsUUFBQUMsS0FBQUYsSUFBQUYsRUFBQUQsS0FBQUYsTUFFQUwsR0FBQSxXQUFBLFNBQUFDLEdBQ0EsR0FBQUMsR0FBQUgsRUFBQUksTUFBQUMsU0FDQUMsRUFBQUosRUFBQUssTUFBQUosRUFBQUssS0FDQUMsRUFBQVAsRUFBQVEsTUFBQVAsRUFBQVEsR0FDQVgsR0FBQUksTUFBQVEsS0FBQSxRQUFBQyxLQUFBRixJQUFBRixFQUFBRCxLQUFBRixNQ1pBLFFBQUFRLFlBQ0EsR0FBQUMsR0FBQWYsRUFBQSxZQUNBZ0IsRUFBQWhCLEVBQUEsZUFDQWlCLEVBQUFqQixFQUFBLGNBQ0FrQixFQUFBbEIsRUFBQSxjQUNBbUIsRUFBQUosRUFBQUssUUFDQUMsRUFBQU4sRUFBQU8sUUFFQXRCLEdBQUF1QixRQUFBQyxPQUFBLFdBQ0FMLEVBQUFKLEVBQUFLLFFBQ0FDLEVBQUFOLEVBQUFPLFdBR0F0QixFQUFBdUIsUUFBQXRCLEdBQUEsOEJBQUEsU0FBQXdCLEdBU0EsUUFBQUMsR0FBQUMsR0FDQUMsVUFBQUMsR0FBQUYsRUFBQUcsR0FBQSxHQUNBakIsS0FDQWtCLFVBQUEsY0FBQXZCLEVBQUFtQixFQUFBSyxRQUFBLGtCQUFBckIsRUFBQWdCLEVBQUFNLE9BQUEsT0FFQUMsS0FBQUMsS0FBQUMsUUFDQUMsVUFBQSxRQWRBLEdBQUFDLEdBQUFmLE9BQUFnQixXQUFBLHNCQUFBQyxRQUNBQyxF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QUFBLFdBQ0FQLEVBQUFRLFNBQUFSLEtBQUFFLEVBQUF2SCxJQUFBdUgsRUFBQUMsUUFBQTFILEVBQUFnSSxVQUdBaEksRUFBQUcsR0FBQTJILGlCQUFBLFdBQUEsV0FDQVAsRUFBQVEsU0FBQVIsS0FBQUUsRUFBQUcsTUFBQUgsRUFBQUUsVUFBQTNILEVBQUFTLFdBV0EsSUFBQSxHQVBBd0gsS0FDQTlILEdBQUErQixTQUFBZ0csY0FBQSxhQUFBRixPQUFBRyxLQUFBQyxPQUFBM0gsUUFBQTBILEtBQUFFLE9BQUFYLFFBQUEsSUFBQUMsVUFBQSxNQUNBeEgsR0FBQStCLFNBQUFnRyxjQUFBLGVBQUFGLE9BQUFHLEtBQUFDLE9BQUEzSCxRQUFBMEgsS0FBQUUsT0FBQVgsUUFBQSxJQUFBQyxVQUFBLE1BQ0F4SCxHQUFBK0IsU0FBQWdHLGNBQUEsZUFBQUYsT0FBQUcsS0FBQUMsT0FBQTNILFFBQUEwSCxLQUFBRSxPQUFBWCxRQUFBLElBQUFDLFVBQUEsTUFDQXhILEdBQUErQixTQUFBZ0csY0FBQSxlQUFBRixPQUFBRyxLQUFBQyxPQUFBM0gsUUFBQTBILEtBQUFFLE9BQUFYLFFBQUEsSUFBQUMsVUFBQSxNQUdBcEcsRUFBQSxFQUFBQSxFQUFBMEcsRUFBQXpHLE9BQUFELElBQ0E2RixFQUFBYSxFQUFBMUcsSUFJQTRGLFlBRUE5SSxFQUFBNkQsVUFBQTVELEdBQUEsa0JBQUEsV0FDQTZJIiwiZmlsZSI6InNjcmlwdHMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgJGRvY3VtZW50ID0gJChkb2N1bWVudCk7XG52YXIgJGJvZHkgPSAkKCdib2R5Jyk7XG52YXIgJGJhcmJhV3JhcHBlciA9ICQoJyNiYXJiYS13cmFwcGVyJyk7XG5cbnZhciBwYWdlVHJhbnNpdGlvbnMgPSBmdW5jdGlvbigpIHtcblxuICB2YXIgSG9tZXBhZ2UgPSBCYXJiYS5CYXNlVmlldy5leHRlbmQoe1xuICAgIG5hbWVzcGFjZTogJ2hvbWVwYWdlJyxcbiAgICBvbkVudGVyOiBmdW5jdGlvbiBvbkVudGVyKCkge1xuICAgICAgJGRvY3VtZW50LnRyaWdnZXIoJ2hvbWVwYWdlT25FbnRlcicpO1xuICAgICAgJGJvZHkuYWRkQ2xhc3MoJ2hvbWUnKTtcbiAgICAgICRib2R5LmF0dHIoJ2lkJywgJ2hvbWUnKTtcbiAgICB9LFxuICAgIG9uRW50ZXJDb21wbGV0ZWQ6IGZ1bmN0aW9uIG9uRW50ZXJDb21wbGV0ZWQoKSB7XG4gICAgICAkZG9jdW1lbnQudHJpZ2dlcignaG9tZXBhZ2VPbkVudGVyQ29tcGxldGVkJyk7XG4gICAgICAkYm9keS5yZW1vdmVDbGFzcygpLmFkZENsYXNzKCdob21lJyk7XG4gICAgfSxcbiAgICBvbkxlYXZlOiBmdW5jdGlvbiBvbkxlYXZlKCkge1xuICAgICAgJGRvY3VtZW50LnRyaWdnZXIoJ2hvbWVwYWdlT25MZWF2ZScpO1xuICAgIH0sXG4gICAgb25MZWF2ZUNvbXBsZXRlZDogZnVuY3Rpb24gb25MZWF2ZUNvbXBsZXRlZCgpIHtcbiAgICAgICRkb2N1bWVudC50cmlnZ2VyKCdob21lcGFnZU9uTGVhdmVDb21wbGV0ZWQnKTtcbiAgICB9XG4gIH0pO1xuXG4gIHZhciBQcm9qZWN0cyA9IEJhcmJhLkJhc2VWaWV3LmV4dGVuZCh7XG4gICAgbmFtZXNwYWNlOiAncHJvamVjdHMnLFxuICAgIG9uRW50ZXI6IGZ1bmN0aW9uIG9uRW50ZXIoKSB7XG4gICAgICAkZG9jdW1lbnQudHJpZ2dlcigncHJvamVjdHNPbkVudGVyJyk7XG4gICAgICAkYm9keS5hZGRDbGFzcygncHJvamVjdHMnKTtcbiAgICAgICRib2R5LmF0dHIoJ2lkJywgJ3Byb2plY3RzJyk7XG4gICAgfSxcbiAgICBvbkVudGVyQ29tcGxldGVkOiBmdW5jdGlvbiBvbkVudGVyQ29tcGxldGVkKCkge1xuICAgICAgJGRvY3VtZW50LnRyaWdnZXIoJ3Byb2plY3RzT25FbnRlckNvbXBsZXRlZCcpO1xuICAgICAgJGJvZHkucmVtb3ZlQ2xhc3MoKS5hZGRDbGFzcygncHJvamVjdHMnKTtcbiAgICB9LFxuICAgIG9uTGVhdmU6IGZ1bmN0aW9uIG9uTGVhdmUoKSB7XG4gICAgICAkZG9jdW1lbnQudHJpZ2dlcigncHJvamVjdHNPbkxlYXZlJyk7XG4gICAgfSxcbiAgICBvbkxlYXZlQ29tcGxldGVkOiBmdW5jdGlvbiBvbkxlYXZlQ29tcGxldGVkKCkge1xuICAgICAgJGRvY3VtZW50LnRyaWdnZXIoJ3Byb2plY3RzT25MZWF2ZUNvbXBsZXRlZCcpO1xuICAgIH1cbiAgfSk7XG5cbiAgdmFyIEFib3V0ID0gQmFyYmEuQmFzZVZpZXcuZXh0ZW5kKHtcbiAgICBuYW1lc3BhY2U6ICdhYm91dCcsXG4gICAgb25FbnRlcjogZnVuY3Rpb24gb25FbnRlcigpIHtcbiAgICAgICRkb2N1bWVudC50cmlnZ2VyKCdhYm91dE9uRW50ZXInKTtcbiAgICAgICRib2R5LmFkZENsYXNzKCdhYm91dCcpO1xuICAgICAgJGJvZHkuYXR0cignaWQnLCAnYWJvdXQnKTtcbiAgICB9LFxuICAgIG9uRW50ZXJDb21wbGV0ZWQ6IGZ1bmN0aW9uIG9uRW50ZXJDb21wbGV0ZWQoKSB7XG4gICAgICAkZG9jdW1lbnQudHJpZ2dlcignYWJvdXRPbkVudGVyQ29tcGxldGVkJyk7XG4gICAgICAkYm9keS5yZW1vdmVDbGFzcygpLmFkZENsYXNzKCdhYm91dCcpO1xuICAgIH0sXG4gICAgb25MZWF2ZTogZnVuY3Rpb24gb25MZWF2ZSgpIHtcbiAgICAgICRkb2N1bWVudC50cmlnZ2VyKCdhYm91dE9uTGVhdmUnKTtcbiAgICB9LFxuICAgIG9uTGVhdmVDb21wbGV0ZWQ6IGZ1bmN0aW9uIG9uTGVhdmVDb21wbGV0ZWQoKSB7XG4gICAgICAkZG9jdW1lbnQudHJpZ2dlcignYWJvdXRPbkxlYXZlQ29tcGxldGVkJyk7XG4gICAgfVxuICB9KTtcblxuICBIb21lcGFnZS5pbml0KCk7XG4gIFByb2plY3RzLmluaXQoKTtcbiAgQWJvdXQuaW5pdCgpO1xuXG4gIEJhcmJhLlBqYXguc3RhcnQoKTtcbiAgQmFyYmEuUHJlZmV0Y2guaW5pdCgpO1xuXG4gIHZhciBzcGVlZCA9IDc1MDtcblxuICB2YXIgdHJhbnNpdGlvbiA9IEJhcmJhLkJhc2VUcmFuc2l0aW9uLmV4dGVuZCh7XG4gICAgc3RhcnQ6IGZ1bmN0aW9uIHN0YXJ0KCkge1xuICAgICAgUHJvbWlzZS5hbGwoW3RoaXMubmV3Q29udGFpbmVyTG9hZGluZywgdGhpcy50cmFuc2l0aW9uT3V0KCldKS50aGVuKHRoaXMudHJhbnNpdGlvbkluLmJpbmQodGhpcykpO1xuICAgIH0sXG4gICAgdHJhbnNpdGlvbk91dDogZnVuY3Rpb24gdHJhbnNpdGlvbk91dCgpIHtcbiAgICAgIHZhciAkZWxPbGQgPSAkKHRoaXMub2xkQ29udGFpbmVyKTtcblxuICAgICAgJGVsT2xkLnJlbW92ZUNsYXNzKCd0cmFuc2l0aW9uLWluJykuYWRkQ2xhc3MoJ3RyYW5zaXRpb24tb3V0Jyk7XG5cbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gJGVsT2xkLnNob3coKS5wcm9taXNlKCk7XG4gICAgICB9LCBzcGVlZCk7XG4gICAgfSxcbiAgICB0cmFuc2l0aW9uSW46IGZ1bmN0aW9uIHRyYW5zaXRpb25JbigpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgdmFyICRlbE5ldyA9ICQodGhpcy5uZXdDb250YWluZXIpO1xuXG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJChfdGhpczIub2xkQ29udGFpbmVyKS5oaWRlKCk7XG4gICAgICAgICQoX3RoaXMyLm9sZENvbnRhaW5lcikuc2hvdygpO1xuICAgICAgICBfdGhpcy5kb25lKCk7XG4gICAgICB9LCBzcGVlZCk7XG5cbiAgICAgICRlbE5ldy5jc3Moe1xuICAgICAgICB2aXNpYmlsaXR5OiAndmlzaWJsZSdcbiAgICAgIH0pO1xuXG4gICAgICAkZWxOZXcuYWRkQ2xhc3MoJ3RyYW5zaXRpb24taW4nKS5yZW1vdmVDbGFzcygndHJhbnNpdGlvbi1vdXQnKTtcbiAgICB9XG4gIH0pO1xuXG4gIEJhcmJhLlBqYXguZ2V0VHJhbnNpdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdHJhbnNpdGlvbjtcbiAgfTtcblxuICBCYXJiYS5EaXNwYXRjaGVyLm9uKCduZXdQYWdlUmVhZHknLCBmdW5jdGlvbiAoY3VycmVudFN0YXR1cywgb2xkU3RhdHVzKSB7XG5cbiAgICAkKCRkb2N1bWVudCkudHJpZ2dlcignYWxsUGFnZXNFbnRlcicpO1xuXG4gICAgc3dpdGNoICh0cnVlKSB7XG5cbiAgICAgIGNhc2Ugb2xkU3RhdHVzLm5hbWVzcGFjZSA9PT0gJ3Byb2plY3RzJyAmJiBjdXJyZW50U3RhdHVzLm5hbWVzcGFjZSA9PT0gJ3Byb2plY3RzJzpcbiAgICAgICAgJGJhcmJhV3JhcHBlci5hZGRDbGFzcygndGVydGlhcnktdHJhbnNpdGlvbicpO1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7XG4gICAgICAgIH0sIHNwZWVkKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgY3VycmVudFN0YXR1cy5uYW1lc3BhY2UgPT09ICdob21lcGFnZSc6XG4gICAgICAgICRiYXJiYVdyYXBwZXIucmVtb3ZlQ2xhc3MoJ2ZhZGUtaW4nKTtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgd2luZG93LnNjcm9sbFRvKDAsIDApO1xuICAgICAgICAgICRiYXJiYVdyYXBwZXIuYWRkQ2xhc3MoJ2ZhZGUtaW4nKTtcbiAgICAgICAgfSwgc3BlZWQpO1xuICAgICAgICBjb25zb2xlLmxvZygnaG9tZXBhZ2UnKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgICRiYXJiYVdyYXBwZXIucmVtb3ZlQ2xhc3MoKTtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgd2luZG93LnNjcm9sbFRvKDAsIDApO1xuICAgICAgICB9LCBzcGVlZCk7XG4gICAgfVxuICB9KTtcbn07XG5cbiQoZnVuY3Rpb24gKCkge1xuICByZXR1cm4gcGFnZVRyYW5zaXRpb25zKCk7XG59KTtcbiIsImZ1bmN0aW9uIGRpcmVjdGlvbkF3YXJlQnV0dG9uKCkge1xuICAkKCcuYnRuJylcbiAgICAub24oJ21vdXNlZW50ZXInLCBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgcGFyZW50T2Zmc2V0ID0gJCh0aGlzKS5vZmZzZXQoKSxcbiAgICAgICAgcmVsWCA9IGUucGFnZVggLSBwYXJlbnRPZmZzZXQubGVmdCxcbiAgICAgICAgcmVsWSA9IGUucGFnZVkgLSBwYXJlbnRPZmZzZXQudG9wO1xuICAgICAgJCh0aGlzKS5maW5kKCdzcGFuJykuY3NzKHt0b3A6cmVsWSwgbGVmdDpyZWxYfSlcbiAgICB9KVxuICAgIC5vbignbW91c2VvdXQnLCBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgcGFyZW50T2Zmc2V0ID0gJCh0aGlzKS5vZmZzZXQoKSxcbiAgICAgICAgcmVsWCA9IGUucGFnZVggLSBwYXJlbnRPZmZzZXQubGVmdCxcbiAgICAgICAgcmVsWSA9IGUucGFnZVkgLSBwYXJlbnRPZmZzZXQudG9wO1xuICAgICAgJCh0aGlzKS5maW5kKCdzcGFuJykuY3NzKHt0b3A6cmVsWSwgbGVmdDpyZWxYfSlcbiAgICB9KTtcbn1cblxuZGlyZWN0aW9uQXdhcmVCdXR0b24oKTtcblxuJCgkZG9jdW1lbnQpLm9uKCdhbGxQYWdlc0VudGVyJywgZnVuY3Rpb24oKSB7XG4gIGRpcmVjdGlvbkF3YXJlQnV0dG9uKCk7XG59KTtcbiIsImZ1bmN0aW9uIHBhcmFsbGF4KCkge1xuICB2YXIgJGNvbnRhaW5lciA9ICQoJy5kZXZpY2VzJyk7XG4gIHZhciAkZGVza3RvcCA9ICQoJ2ltZy5kZXNrdG9wJyk7XG4gIHZhciAkbGFwdG9wID0gJCgnaW1nLmxhcHRvcCcpO1xuICB2YXIgJG1vYmlsZSA9ICQoJ2ltZy5tb2JpbGUnKTtcbiAgdmFyIGNvbnRhaW5lcl93ID0gJGNvbnRhaW5lci53aWR0aCgpO1xuICB2YXIgY29udGFpbmVyX2ggPSAkY29udGFpbmVyLmhlaWdodCgpO1xuXG4gICQod2luZG93KS5yZXNpemUoZnVuY3Rpb24gKCkge1xuICAgIGNvbnRhaW5lcl93ID0gJGNvbnRhaW5lci53aWR0aCgpO1xuICAgIGNvbnRhaW5lcl9oID0gJGNvbnRhaW5lci5oZWlnaHQoKTtcbiAgfSk7XG5cbiAgJCh3aW5kb3cpLm9uKCdtb3VzZW1vdmUgZGV2aWNlb3JpZW50YXRpb24nLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICB2YXIgaXNNb2JpbGUgPSB3aW5kb3cubWF0Y2hNZWRpYSgnKG1heC13aWR0aDogNzY3cHgpJykubWF0Y2hlcztcbiAgICB2YXIgcG9zX3ggPSBpc01vYmlsZSA/IE1hdGgucm91bmQoZXZlbnQub3JpZ2luYWxFdmVudC5nYW1tYSAqIDUwKSA6IGV2ZW50LnBhZ2VYO1xuICAgIHZhciBwb3NfeSA9IGlzTW9iaWxlID8gTWF0aC5yb3VuZChldmVudC5vcmlnaW5hbEV2ZW50LmJldGEgKiA1MCkgOiBldmVudC5wYWdlWTtcbiAgICB2YXIgbGVmdCA9IGNvbnRhaW5lcl93IC8gMiAtIHBvc194O1xuICAgIHZhciB0b3AgPSBjb250YWluZXJfaCAvIDIgLSBwb3NfeTtcblxuICAgICQoJyNkZXZpY2VPcmllbnRhdGlvbicpLnRleHQoJ2dhbW1hOiAnICsgZXZlbnQub3JpZ2luYWxFdmVudC5nYW1tYSArICcgYmV0YTogJyArIGV2ZW50Lm9yaWdpbmFsRXZlbnQuYmV0YSk7XG5cbiAgICBmdW5jdGlvbiB0cmFuc2xhdGVUd2VlbihhcmdzKSB7XG4gICAgICBUd2VlbkxpdGUudG8oYXJncy5lbCwgMSwge1xuICAgICAgICBjc3M6IHtcbiAgICAgICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGVYKCcgKyBsZWZ0IC8gYXJncy5wb3NMZWZ0ICsgJ3B4KSB0cmFuc2xhdGVZKCcgKyB0b3AgLyBhcmdzLnBvc1RvcCArICdweCknXG4gICAgICAgIH0sXG4gICAgICAgIGVhc2U6IEV4cG8uZWFzZU91dCxcbiAgICAgICAgb3ZlcndyaXRlOiAnYWxsJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgdmFyIHBhcmFsbGF4UHJvcHNBcnJheSA9IFtcbiAgICAgIHsgZWw6ICRkZXNrdG9wLCBwb3NMZWZ0OiA3NSwgcG9zVG9wOiAzNX0sXG4gICAgICB7IGVsOiAkbGFwdG9wLCBwb3NMZWZ0OiA0NSwgcG9zVG9wOiAxNX0sXG4gICAgICB7IGVsOiAkbW9iaWxlLCBwb3NMZWZ0OiA1NSwgcG9zVG9wOiAyNX1cbiAgICBdO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXJhbGxheFByb3BzQXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRyYW5zbGF0ZVR3ZWVuKHBhcmFsbGF4UHJvcHNBcnJheVtpXSk7XG4gICAgfVxuICB9KTtcbiAgLy9cbiAgLy92YXIgY3Vyc29yT25EaXYgPSBmYWxzZTtcbiAgLy9cbiAgLy8kKGRvY3VtZW50KS5vbih7XG4gIC8vICAgIG1vdXNlZW50ZXI6IGZ1bmN0aW9uKCl7XG4gIC8vICAgICAgY3Vyc29yT25EaXYgPSB0cnVlO1xuICAvLyAgICB9LFxuICAvLyAgICBtb3VzZWxlYXZlOiBmdW5jdGlvbigpe1xuICAvLyAgICAgIGN1cnNvck9uRGl2ID0gZmFsc2U7XG4gIC8vICAgIH1cbiAgLy8gIH0sXG4gIC8vICAnLmNpcmNsZSdcbiAgLy8pO1xuICAvL1xuICAvLyQoZG9jdW1lbnQpLm1vdXNlbW92ZShmdW5jdGlvbihlKSB7XG4gIC8vXG4gIC8vICBpZiAoY3Vyc29yT25EaXYpIHtcbiAgLy8gICAgJCgnLmN1c3RvbS1jdXJzb3InKS5wb3NpdGlvbih7XG4gIC8vICAgICAgbXk6ICdsZWZ0IGNlbnRlcicsXG4gIC8vICAgICAgb2Y6IGUsXG4gIC8vICAgICAgY29sbGlzaW9uOiAnbm9uZSdcbiAgLy8gICAgfSk7XG4gIC8vICB9XG4gIC8vXG4gIC8vfSk7XG59XG5cbiQoZG9jdW1lbnQpLm9uKCdob21lcGFnZU9uRW50ZXJDb21wbGV0ZWQnLCBmdW5jdGlvbigpIHtcbiAgcGFyYWxsYXgoKTtcbn0pO1xuIiwidmFyIHNldHRpbmdzID0ge1xuICBzZWN0aW9uIDogJy5zY3JvbGwtc2VjdGlvbicsXG4gIGVhc2luZzogJ2Vhc2VPdXRFeHBvJyxcbiAgc2Nyb2xsU3BlZWQ6IDEwMDAsXG4gIG9mZnNldCA6IDAsXG4gIHN0YW5kYXJkU2Nyb2xsRWxlbWVudHM6ICdib2R5Om5vdCguaG9tZSknLFxuICBzY3JvbGxiYXJzOiB0cnVlLFxuICBzZXRIZWlnaHRzOiB0cnVlLFxuICBvdmVyZmxvd1Njcm9sbDogdHJ1ZSxcbiAgdXBkYXRlSGFzaDogZmFsc2UsXG4gIHRvdWNoU2Nyb2xsOiB0cnVlLFxuICBiZWZvcmU6ZnVuY3Rpb24oaSwgcGFuZWxzKSB7XG5cbiAgICB2YXIgcmVmID0gcGFuZWxzW2ldLmF0dHIoJ2RhdGEtc2VjdGlvbi1uYW1lJyk7XG4gICAgJCgnLnBhZ2luYXRpb24gLmFjdGl2ZScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAkKCcucGFnaW5hdGlvbicpLmZpbmQoJ2FbaHJlZj1cIiMnICsgcmVmICsgJ1wiXScpLmFkZENsYXNzKCdhY3RpdmUnKTtcblxuICAgICQoJy5zY3JvbGwtc2VjdGlvbicpLmVxKGkpXG4gICAgICAucmVtb3ZlQ2xhc3MoJ2FjdGl2ZSBwcmV2aW91cyBuZXh0JylcbiAgICAgIC5hZGRDbGFzcygnYWN0aXZlJylcbiAgICAgIC5zaWJsaW5ncygnLnNjcm9sbC1zZWN0aW9uJylcbiAgICAgIC5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG5cbiAgICAkKCcuc2Nyb2xsLXNlY3Rpb24nKS5lcShpIC0gMSlcbiAgICAgIC5yZW1vdmVDbGFzcygnYWN0aXZlIHByZXZpb3VzIG5leHQnKVxuICAgICAgLmFkZENsYXNzKCdwcmV2aW91cycpXG4gICAgICAuc2libGluZ3MoJy5zY3JvbGwtc2VjdGlvbicpXG4gICAgICAucmVtb3ZlQ2xhc3MoJ3ByZXZpb3VzJyk7XG5cbiAgICAkKCcuc2Nyb2xsLXNlY3Rpb24nKS5lcShpICsgMSlcbiAgICAgIC5yZW1vdmVDbGFzcygnYWN0aXZlIHByZXZpb3VzIG5leHQnKVxuICAgICAgLmFkZENsYXNzKCduZXh0JylcbiAgICAgIC5zaWJsaW5ncygnLnNjcm9sbC1zZWN0aW9uJylcbiAgICAgIC5yZW1vdmVDbGFzcygnbmV4dCcpO1xuXG4gICAgaWYgKGkgPT09IHBhbmVscy5sZW5ndGggLSAxKSB7XG4gICAgICAkKCcuYXJyb3ctZG93bicpLmFkZENsYXNzKCdkaXNhYmxlZCcpO1xuICAgIH0gZWxzZSBpZiAoaSA9PT0gMCkge1xuICAgICAgJCgnLmFycm93LXVwJykuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICQoJy5hcnJvdy11cCwgLmFycm93LWRvd24nKS5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcbiAgICB9XG4gIH1cbn07XG5cbmZ1bmN0aW9uIHBhZ2luYXRpb25BcnJvd3NNb3ZlKCkge1xuICAkKCcucGFnaW5hdGlvbiBhJykuZWFjaChmdW5jdGlvbiAoaSkge1xuICAgICQodGhpcykuY2xpY2soZnVuY3Rpb24gKGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICQuc2Nyb2xsaWZ5Lm1vdmUoaSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gICQoJy5hcnJvdy1kb3duJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICQuc2Nyb2xsaWZ5Lm5leHQoKTtcbiAgfSk7XG5cbiAgJCgnLmFycm93LXVwJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICQuc2Nyb2xsaWZ5LnByZXZpb3VzKCk7XG4gIH0pO1xufVxuXG5cbmlmKCQoJ2JvZHknKS5oYXNDbGFzcygnaG9tZScpKSB7XG4gICQuc2Nyb2xsaWZ5KHNldHRpbmdzKTtcbiAgd2luZG93LnNjcm9sbFRvKDAsIDApO1xuICAkLnNjcm9sbGlmeS5tb3ZlKDApO1xufVxuXG4kKGRvY3VtZW50KS5vbignaG9tZXBhZ2VPbkVudGVyJywgZnVuY3Rpb24oKSB7XG4gIHdpbmRvdy5zY3JvbGxUbygwLCAwKTtcbiAgJC5zY3JvbGxpZnkubW92ZSgwKTtcbiAgcGFnaW5hdGlvbkFycm93c01vdmUoKTtcbn0pO1xuXG4kKGRvY3VtZW50KS5vbignaG9tZXBhZ2VPbkVudGVyQ29tcGxldGVkJywgZnVuY3Rpb24oKSB7XG4gICQuc2Nyb2xsaWZ5KHNldHRpbmdzKTtcbn0pO1xuXG4kKGRvY3VtZW50KS5vbignaG9tZXBhZ2VPbkxlYXZlQ29tcGxldGVkJywgZnVuY3Rpb24oKSB7XG4gICQuc2Nyb2xsaWZ5LmRlc3Ryb3koKTtcbn0pO1xuXG5cbiIsInZhciBhYm91dCA9IGZ1bmN0aW9uKCkge1xuXG4gICRkb2N1bWVudC5vbignYWJvdXRPbkVudGVyJywgZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coJ2Fib3V0T25FbnRlcicpO1xuICB9KTtcblxuICAkZG9jdW1lbnQub24oJ2Fib3V0T25FbnRlckNvbXBsZXRlZCcsIGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKCdhYm91dE9uRW50ZXJDb21wbGV0ZWQnKTtcbiAgfSk7XG5cbiAgJGRvY3VtZW50Lm9uKCdhYm91dE9uTGVhdmUnLCBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygnYWJvdXRPbkxlYXZlJyk7XG4gIH0pO1xuXG4gICRkb2N1bWVudC5vbignYWJvdXRPbkxlYXZlQ29tcGxldGVkJywgZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coJ2Fib3V0T25MZWF2ZUNvbXBsZXRlZCcpO1xuICB9KTtcbn07XG5cbiQoZnVuY3Rpb24gKCkge1xuICByZXR1cm4gYWJvdXQoKTtcbn0pO1xuIiwiJChkb2N1bWVudCkub24oJ2hvbWVwYWdlT25FbnRlckNvbXBsZXRlZCcsIGZ1bmN0aW9uKCkge1xuICAkKCcuY2Fyb3VzZWwnKS5zbGljayh7XG4gICAgaW5maW5pdGU6IHRydWUsXG4gICAgdmFyaWFibGVXaWR0aDogdHJ1ZSxcbiAgICBzbGlkZXNUb1Nob3c6IDEsXG4gICAgcHJldkFycm93OiAkKCcuYXJyb3ctcHJldicpLFxuICAgIG5leHRBcnJvdzogJCgnLmFycm93LW5leHQnKVxuICB9KTtcblxuICAkKCcuYnRuJykuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgJCh0aGlzKS5jbG9zZXN0KCcuY2lyY2xlJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICB9KVxufSk7XG4iLCJ2YXIgaG9tZVBhZ2UgPSBmdW5jdGlvbigpIHtcblxuICAkZG9jdW1lbnQub24oJ2hvbWVwYWdlT25FbnRlcicsIGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKCdob21lcGFnZU9uRW50ZXInKTtcbiAgfSk7XG5cbiAgJGRvY3VtZW50Lm9uKCdob21lcGFnZU9uRW50ZXJDb21wbGV0ZWQnLCBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygnaG9tZXBhZ2VPbkVudGVyQ29tcGxldGVkJyk7XG4gIH0pO1xuXG4gICRkb2N1bWVudC5vbignaG9tZXBhZ2VPbkxlYXZlJywgZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coJ2hvbWVwYWdlT25MZWF2ZScpO1xuICB9KTtcblxuICAkZG9jdW1lbnQub24oJ2hvbWVwYWdlT25MZWF2ZUNvbXBsZXRlZCcsIGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKCdob21lcGFnZU9uTGVhdmVDb21wbGV0ZWQnKTtcbiAgfSk7XG59O1xuXG4kKGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIGhvbWVQYWdlKCk7XG59KTtcbiIsInZhciAkYm9keSA9ICQoJ2JvZHknKTtcbnZhciAkbmF2VG9nZ2xlID0gJCgnLm5hdiwgbmF2IHVsIGxpIGEnKTtcblxuJG5hdlRvZ2dsZS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgJCh0aGlzKS50b2dnbGVDbGFzcygnaXMtY2xvc2VkJyk7XG4gIGlmKCEkKHRoaXMpLmhhc0NsYXNzKCdpcy1jbG9zZWQnKSkge1xuICAgICRib2R5LmFkZENsYXNzKCdpcy1vcGVuJyk7XG4gIH0gZWxzZSB7XG4gICAgJGJvZHkucmVtb3ZlQ2xhc3MoJ2lzLW9wZW4nKTtcbiAgfVxufSk7XG4iLCJ2YXIgcHJvamVjdHMgPSBmdW5jdGlvbigpIHtcblxuICAkZG9jdW1lbnQub24oJ3Byb2plY3RzT25FbnRlcicsIGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKCdwcm9qZWN0c09uRW50ZXInKTtcbiAgfSk7XG5cbiAgJGRvY3VtZW50Lm9uKCdwcm9qZWN0c09uRW50ZXJDb21wbGV0ZWQnLCBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygncHJvamVjdHNPbkVudGVyQ29tcGxldGVkJyk7XG4gIH0pO1xuXG4gICRkb2N1bWVudC5vbigncHJvamVjdHNPbkxlYXZlJywgZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coJ3Byb2plY3RzT25MZWF2ZScpO1xuICB9KTtcblxuICAkZG9jdW1lbnQub24oJ3Byb2plY3RzT25MZWF2ZUNvbXBsZXRlZCcsIGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKCdwcm9qZWN0c09uTGVhdmVDb21wbGV0ZWQnKTtcbiAgfSk7XG59O1xuXG4kKGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHByb2plY3RzKCk7XG59KTtcbiIsInZhciBtb3JwaEVscyA9IGZ1bmN0aW9uKCkge1xuICBmdW5jdGlvbiBzbmFwTW9ycGhIb3ZlcihhcmdzKSB7XG4gICAgdmFyIHMgPSBTbmFwKGFyZ3MuZWwpO1xuICAgIHZhciBwYXRoID0gcy5zZWxlY3QoJ3BhdGgnKTtcblxuICAgIHZhciBwYXRoQ29uZmlnID0ge1xuICAgICAgdG9TcGVlZDogYXJncy50b1NwZWVkLFxuICAgICAgZnJvbVNwZWVkOiBhcmdzLmZyb21TcGVlZCxcbiAgICAgIGZyb206IHBhdGguYXR0cignZCcpLFxuICAgICAgdG86IGFyZ3MuZWwuZ2V0QXR0cmlidXRlKCdkYXRhLW1vcnBoLWFjdGl2ZScpXG4gICAgfTtcblxuICAgIGFyZ3MuZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgZnVuY3Rpb24gKCkge1xuICAgICAgcGF0aC5hbmltYXRlKHsgJ3BhdGgnOiBwYXRoQ29uZmlnLnRvIH0sIHBhdGhDb25maWcudG9TcGVlZCwgYXJncy5lYXNlSW4pO1xuICAgIH0pO1xuXG4gICAgYXJncy5lbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW91dCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHBhdGguYW5pbWF0ZSh7ICdwYXRoJzogcGF0aENvbmZpZy5mcm9tIH0sIHBhdGhDb25maWcuZnJvbVNwZWVkLCBhcmdzLmVhc2VPdXQpO1xuICAgIH0pO1xuICB9XG5cbiAgdmFyIHNuYXBFbHMgPSBbXG4gICAge2VsOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXJyb3ctdXAnKSwgZWFzZUluOiBtaW5hLmVhc2VpbiwgZWFzZU91dDogbWluYS5ib3VuY2UsIHRvU3BlZWQ6IDMwMCwgZnJvbVNwZWVkOiA1MDB9LFxuICAgIHtlbDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFycm93LWRvd24nKSwgZWFzZUluOiBtaW5hLmVhc2VpbiwgZWFzZU91dDogbWluYS5ib3VuY2UsIHRvU3BlZWQ6IDMwMCwgZnJvbVNwZWVkOiA1MDB9LFxuICAgIHtlbDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFycm93LW5leHQnKSwgZWFzZUluOiBtaW5hLmVhc2VpbiwgZWFzZU91dDogbWluYS5ib3VuY2UsIHRvU3BlZWQ6IDMwMCwgZnJvbVNwZWVkOiA1MDB9LFxuICAgIHtlbDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFycm93LXByZXYnKSwgZWFzZUluOiBtaW5hLmVhc2VpbiwgZWFzZU91dDogbWluYS5ib3VuY2UsIHRvU3BlZWQ6IDMwMCwgZnJvbVNwZWVkOiA1MDB9XG4gIF07XG5cbiAgZm9yICh2YXIgaT0wOyBpPHNuYXBFbHMubGVuZ3RoOyBpKyspIHtcbiAgICBzbmFwTW9ycGhIb3ZlcihzbmFwRWxzW2ldKTtcbiAgfVxufTtcblxubW9ycGhFbHMoKTtcblxuJChkb2N1bWVudCkub24oJ2hvbWVwYWdlT25FbnRlcicsIGZ1bmN0aW9uKCkge1xuICBtb3JwaEVscygpO1xufSk7XG4iXX0=
