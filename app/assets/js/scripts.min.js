"use strict";function directionAwareButton(){$(".btn").on("mouseenter",function(e){var o=$(this).offset(),n=e.pageX-o.left,t=e.pageY-o.top;$(this).find("span").css({top:t,left:n})}).on("mouseout",function(e){var o=$(this).offset(),n=e.pageX-o.left,t=e.pageY-o.top;$(this).find("span").css({top:t,left:n})})}function parallax(){var e=$(".devices"),o=$("img.desktop"),n=$("img.laptop"),t=$("img.mobile"),a=e.width(),i=e.height();$(window).resize(function(){a=e.width(),i=e.height()}),$(window).on("mousemove deviceorientation",function(e){function s(e){TweenLite.to(e.el,1,{css:{transform:"translateX("+d/e.posLeft+"px) translateY("+u/e.posTop+"px)"},ease:Expo.easeOut,overwrite:"all"})}var r=window.matchMedia("(max-width: 767px)").matches,c=r?Math.round(50*e.originalEvent.gamma):e.pageX,l=r?Math.round(50*e.originalEvent.beta):e.pageY,d=a/2-c,u=i/2-l;$("#deviceOrientation").text("gamma: "+e.originalEvent.gamma+" beta: "+e.originalEvent.beta);for(var p=[{el:o,posLeft:75,posTop:35},{el:n,posLeft:45,posTop:15},{el:t,posLeft:55,posTop:25}],m=0;m<p.length;m++)s(p[m])})}function paginationArrowsMove(){$(".pagination a").each(function(e){$(this).click(function(o){o.preventDefault(),$.scrollify.move(e)})}),$(".arrow-down").click(function(){$.scrollify.next()}),$(".arrow-up").click(function(){$.scrollify.previous()})}var $document=$(document),$body=$("body"),$barbaWrapper=$("#barba-wrapper"),pageTransitions=function(){var e=Barba.BaseView.extend({namespace:"homepage",onEnter:function(){$document.trigger("homepageOnEnter"),$body.addClass("home"),$body.attr("id","home")},onEnterCompleted:function(){$document.trigger("homepageOnEnterCompleted"),$body.removeClass().addClass("home")},onLeave:function(){$document.trigger("homepageOnLeave")},onLeaveCompleted:function(){$document.trigger("homepageOnLeaveCompleted")}}),o=Barba.BaseView.extend({namespace:"projects",onEnter:function(){$document.trigger("projectsOnEnter"),$body.addClass("projects"),$body.attr("id","projects")},onEnterCompleted:function(){$document.trigger("projectsOnEnterCompleted"),$body.removeClass().addClass("projects")},onLeave:function(){$document.trigger("projectsOnLeave")},onLeaveCompleted:function(){$document.trigger("projectsOnLeaveCompleted")}}),n=Barba.BaseView.extend({namespace:"about",onEnter:function(){$document.trigger("aboutOnEnter"),$body.addClass("about"),$body.attr("id","about")},onEnterCompleted:function(){$document.trigger("aboutOnEnterCompleted"),$body.removeClass().addClass("about")},onLeave:function(){$document.trigger("aboutOnLeave")},onLeaveCompleted:function(){$document.trigger("aboutOnLeaveCompleted")}});e.init(),o.init(),n.init(),Barba.Pjax.start(),Barba.Prefetch.init();var t=750,a=Barba.BaseTransition.extend({start:function(){Promise.all([this.newContainerLoading,this.transitionOut()]).then(this.transitionIn.bind(this))},transitionOut:function(){var e=$(this.oldContainer);e.removeClass("transition-in").addClass("transition-out"),setTimeout(function(){return e.show().promise()},t)},transitionIn:function(){var e=this,o=this,n=$(this.newContainer);setTimeout(function(){$(e.oldContainer).hide(),$(e.oldContainer).show(),o.done()},t),n.css({visibility:"visible"}),n.addClass("transition-in").removeClass("transition-out")}});Barba.Pjax.getTransition=function(){return a},Barba.Dispatcher.on("newPageReady",function(e,o){switch($($document).trigger("allPagesEnter"),!0){case"projects"===o.namespace&&"projects"===e.namespace:$barbaWrapper.addClass("tertiary-transition"),setTimeout(function(){window.scrollTo(0,0)},t);break;case"homepage"===e.namespace:$barbaWrapper.removeClass("fade-in"),setTimeout(function(){window.scrollTo(0,0),$barbaWrapper.addClass("fade-in")},t),console.log("homepage");break;default:$barbaWrapper.removeClass(),setTimeout(function(){window.scrollTo(0,0)},t)}})};$(function(){return pageTransitions()});var about=function(){$document.on("aboutOnEnter",function(){console.log("aboutOnEnter")}),$document.on("aboutOnEnterCompleted",function(){console.log("aboutOnEnterCompleted")}),$document.on("aboutOnLeave",function(){console.log("aboutOnLeave")}),$document.on("aboutOnLeaveCompleted",function(){console.log("aboutOnLeaveCompleted")})};$(function(){return about()}),directionAwareButton(),$($document).on("allPagesEnter",function(){directionAwareButton()}),$(document).on("homepageOnEnterCompleted",function(){$(".carousel").slick({infinite:!0,variableWidth:!0,slidesToShow:1,prevArrow:$(".prev"),nextArrow:$(".next")}),$(".btn").click(function(){$(this).closest(".circle").addClass("active")})});var homePage=function(){$document.on("homepageOnEnter",function(){console.log("homepageOnEnter")}),$document.on("homepageOnEnterCompleted",function(){console.log("homepageOnEnterCompleted")}),$document.on("homepageOnLeave",function(){console.log("homepageOnLeave")}),$document.on("homepageOnLeaveCompleted",function(){console.log("homepageOnLeaveCompleted")})};$(function(){return homePage()});var $body=$("body"),$navToggle=$(".nav, nav ul li a");$navToggle.on("click",function(){$(this).toggleClass("is-closed"),$(this).hasClass("is-closed")?$body.removeClass("is-open"):$body.addClass("is-open")}),$(document).on("homepageOnEnterCompleted",function(){parallax()});var projects=function(){$document.on("projectsOnEnter",function(){console.log("projectsOnEnter")}),$document.on("projectsOnEnterCompleted",function(){console.log("projectsOnEnterCompleted")}),$document.on("projectsOnLeave",function(){console.log("projectsOnLeave")}),$document.on("projectsOnLeaveCompleted",function(){console.log("projectsOnLeaveCompleted")})};$(function(){return projects()});var settings={section:".scroll-section",easing:"easeOutExpo",scrollSpeed:1e3,offset:0,standardScrollElements:"body:not(.home)",scrollbars:!0,setHeights:!0,overflowScroll:!0,updateHash:!1,touchScroll:!0,before:function(e,o){var n=o[e].attr("data-section-name");$(".pagination .active").removeClass("active"),$(".pagination").find('a[href="#'+n+'"]').addClass("active"),$(".scroll-section").eq(e).removeClass("active previous next").addClass("active").siblings(".scroll-section").removeClass("active"),$(".scroll-section").eq(e-1).removeClass("active previous next").addClass("previous").siblings(".scroll-section").removeClass("previous"),$(".scroll-section").eq(e+1).removeClass("active previous next").addClass("next").siblings(".scroll-section").removeClass("next"),e===o.length-1?$(".arrow-down").addClass("disabled"):0===e?$(".arrow-up").addClass("disabled"):$(".arrow-up, .arrow-down").removeClass("disabled")}};paginationArrowsMove(),$("body").hasClass("home")&&($.scrollify(settings),$.scrollify.move(0),window.scrollTo(0,0)),$(document).on("homepageOnEnter",function(){window.scrollTo(0,0),$.scrollify.move(0)}),$(document).on("homepageOnEnterCompleted",function(){$.scrollify(settings),paginationArrowsMove()}),$(document).on("homepageOnLeaveCompleted",function(){$.scrollify.destroy()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl9iYXJiYVRyYW5zaXRpb25zLmpzIiwiYnV0dG9uRWZmZWN0LmpzIiwicGFyYWxsYXguanMiLCJzY3JvbGxpZnkuanMiLCJhYm91dC5qcyIsImNhcm91c2Vscy5qcyIsImhvbWUuanMiLCJuYXZpZ2F0aW9uLmpzIiwicHJvamVjdHMuanMiXSwibmFtZXMiOlsiZGlyZWN0aW9uQXdhcmVCdXR0b24iLCIkIiwib24iLCJlIiwicGFyZW50T2Zmc2V0IiwidGhpcyIsIm9mZnNldCIsInJlbFgiLCJwYWdlWCIsImxlZnQiLCJyZWxZIiwicGFnZVkiLCJ0b3AiLCJmaW5kIiwiY3NzIiwicGFyYWxsYXgiLCIkY29udGFpbmVyIiwiJGRlc2t0b3AiLCIkbGFwdG9wIiwiJG1vYmlsZSIsImNvbnRhaW5lcl93Iiwid2lkdGgiLCJjb250YWluZXJfaCIsImhlaWdodCIsIndpbmRvdyIsInJlc2l6ZSIsImV2ZW50IiwidHJhbnNsYXRlVHdlZW4iLCJhcmdzIiwiVHdlZW5MaXRlIiwidG8iLCJlbCIsInRyYW5zZm9ybSIsInBvc0xlZnQiLCJwb3NUb3AiLCJlYXNlIiwiRXhwbyIsImVhc2VPdXQiLCJvdmVyd3JpdGUiLCJpc01vYmlsZSIsIm1hdGNoTWVkaWEiLCJtYXRjaGVzIiwicG9zX3giLCJNYXRoIiwicm91bmQiLCJvcmlnaW5hbEV2ZW50IiwiZ2FtbWEiLCJwb3NfeSIsImJldGEiLCJ0ZXh0IiwicGFyYWxsYXhQcm9wc0FycmF5IiwiaSIsImxlbmd0aCIsInBhZ2luYXRpb25BcnJvd3NNb3ZlIiwiZWFjaCIsImNsaWNrIiwicHJldmVudERlZmF1bHQiLCJzY3JvbGxpZnkiLCJtb3ZlIiwibmV4dCIsInByZXZpb3VzIiwiJGRvY3VtZW50IiwiZG9jdW1lbnQiLCIkYm9keSIsIiRiYXJiYVdyYXBwZXIiLCJwYWdlVHJhbnNpdGlvbnMiLCJIb21lcGFnZSIsIkJhcmJhIiwiQmFzZVZpZXciLCJleHRlbmQiLCJuYW1lc3BhY2UiLCJvbkVudGVyIiwidHJpZ2dlciIsImFkZENsYXNzIiwiYXR0ciIsIm9uRW50ZXJDb21wbGV0ZWQiLCJyZW1vdmVDbGFzcyIsIm9uTGVhdmUiLCJvbkxlYXZlQ29tcGxldGVkIiwiUHJvamVjdHMiLCJBYm91dCIsImluaXQiLCJQamF4Iiwic3RhcnQiLCJQcmVmZXRjaCIsInNwZWVkIiwidHJhbnNpdGlvbiIsIkJhc2VUcmFuc2l0aW9uIiwiUHJvbWlzZSIsImFsbCIsIm5ld0NvbnRhaW5lckxvYWRpbmciLCJ0cmFuc2l0aW9uT3V0IiwidGhlbiIsInRyYW5zaXRpb25JbiIsImJpbmQiLCIkZWxPbGQiLCJvbGRDb250YWluZXIiLCJzZXRUaW1lb3V0Iiwic2hvdyIsInByb21pc2UiLCJfdGhpczIiLCJfdGhpcyIsIiRlbE5ldyIsIm5ld0NvbnRhaW5lciIsImhpZGUiLCJkb25lIiwidmlzaWJpbGl0eSIsImdldFRyYW5zaXRpb24iLCJEaXNwYXRjaGVyIiwiY3VycmVudFN0YXR1cyIsIm9sZFN0YXR1cyIsInNjcm9sbFRvIiwiY29uc29sZSIsImxvZyIsImFib3V0Iiwic2xpY2siLCJpbmZpbml0ZSIsInZhcmlhYmxlV2lkdGgiLCJzbGlkZXNUb1Nob3ciLCJwcmV2QXJyb3ciLCJuZXh0QXJyb3ciLCJjbG9zZXN0IiwiaG9tZVBhZ2UiLCIkbmF2VG9nZ2xlIiwidG9nZ2xlQ2xhc3MiLCJoYXNDbGFzcyIsInByb2plY3RzIiwic2V0dGluZ3MiLCJzZWN0aW9uIiwiZWFzaW5nIiwic2Nyb2xsU3BlZWQiLCJzdGFuZGFyZFNjcm9sbEVsZW1lbnRzIiwic2Nyb2xsYmFycyIsInNldEhlaWdodHMiLCJvdmVyZmxvd1Njcm9sbCIsInVwZGF0ZUhhc2giLCJ0b3VjaFNjcm9sbCIsImJlZm9yZSIsInBhbmVscyIsInJlZiIsImVxIiwic2libGluZ3MiLCJkZXN0cm95Il0sIm1hcHBpbmdzIjoiQUFBQSxZQ0FBLFNBQUFBLHdCQUNBQyxFQUFBLFFBQ0FDLEdBQUEsYUFBQSxTQUFBQyxHQUNBLEdBQUFDLEdBQUFILEVBQUFJLE1BQUFDLFNBQ0FDLEVBQUFK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SSxHQUFBekYsRUFBQSxHQUNBeUIsWUFBQSx3QkFDQUgsU0FBQSxRQUNBb0UsU0FBQSxtQkFDQWpFLFlBQUEsUUFFQXpCLElBQUF1RixFQUFBdEYsT0FBQSxFQUNBbkQsRUFBQSxlQUFBd0UsU0FBQSxZQUNBLElBQUF0QixFQUNBbEQsRUFBQSxhQUFBd0UsU0FBQSxZQUVBeEUsRUFBQSwwQkFBQTJFLFlBQUEsYUFzQkF2Qix3QkFFQXBELEVBQUEsUUFBQTRILFNBQUEsVUFDQTVILEVBQUF3RCxVQUFBc0UsVUFDQTlILEVBQUF3RCxVQUFBQyxLQUFBLEdBQ0FsQyxPQUFBdUYsU0FBQSxFQUFBLElBR0E5RyxFQUFBNkQsVUFBQTVELEdBQUEsa0JBQUEsV0FDQXNCLE9BQUF1RixTQUFBLEVBQUEsR0FDQTlHLEVBQUF3RCxVQUFBQyxLQUFBLEtBR0F6RCxFQUFBNkQsVUFBQTVELEdBQUEsMkJBQUEsV0FDQUQsRUFBQXdELFVBQUFzRSxVQUNBMUUseUJBR0FwRCxFQUFBNkQsVUFBQTVELEdBQUEsMkJBQUEsV0FDQUQsRUFBQXdELFVBQUFxRiIsImZpbGUiOiJzY3JpcHRzLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxudmFyICRkb2N1bWVudCA9ICQoZG9jdW1lbnQpO1xudmFyICRib2R5ID0gJCgnYm9keScpO1xudmFyICRiYXJiYVdyYXBwZXIgPSAkKCcjYmFyYmEtd3JhcHBlcicpO1xuXG52YXIgcGFnZVRyYW5zaXRpb25zID0gZnVuY3Rpb24oKSB7XG5cbiAgdmFyIEhvbWVwYWdlID0gQmFyYmEuQmFzZVZpZXcuZXh0ZW5kKHtcbiAgICBuYW1lc3BhY2U6ICdob21lcGFnZScsXG4gICAgb25FbnRlcjogZnVuY3Rpb24gb25FbnRlcigpIHtcbiAgICAgICRkb2N1bWVudC50cmlnZ2VyKCdob21lcGFnZU9uRW50ZXInKTtcbiAgICAgICRib2R5LmFkZENsYXNzKCdob21lJyk7XG4gICAgICAkYm9keS5hdHRyKCdpZCcsICdob21lJyk7XG4gICAgfSxcbiAgICBvbkVudGVyQ29tcGxldGVkOiBmdW5jdGlvbiBvbkVudGVyQ29tcGxldGVkKCkge1xuICAgICAgJGRvY3VtZW50LnRyaWdnZXIoJ2hvbWVwYWdlT25FbnRlckNvbXBsZXRlZCcpO1xuICAgICAgJGJvZHkucmVtb3ZlQ2xhc3MoKS5hZGRDbGFzcygnaG9tZScpO1xuICAgIH0sXG4gICAgb25MZWF2ZTogZnVuY3Rpb24gb25MZWF2ZSgpIHtcbiAgICAgICRkb2N1bWVudC50cmlnZ2VyKCdob21lcGFnZU9uTGVhdmUnKTtcbiAgICB9LFxuICAgIG9uTGVhdmVDb21wbGV0ZWQ6IGZ1bmN0aW9uIG9uTGVhdmVDb21wbGV0ZWQoKSB7XG4gICAgICAkZG9jdW1lbnQudHJpZ2dlcignaG9tZXBhZ2VPbkxlYXZlQ29tcGxldGVkJyk7XG4gICAgfVxuICB9KTtcblxuICB2YXIgUHJvamVjdHMgPSBCYXJiYS5CYXNlVmlldy5leHRlbmQoe1xuICAgIG5hbWVzcGFjZTogJ3Byb2plY3RzJyxcbiAgICBvbkVudGVyOiBmdW5jdGlvbiBvbkVudGVyKCkge1xuICAgICAgJGRvY3VtZW50LnRyaWdnZXIoJ3Byb2plY3RzT25FbnRlcicpO1xuICAgICAgJGJvZHkuYWRkQ2xhc3MoJ3Byb2plY3RzJyk7XG4gICAgICAkYm9keS5hdHRyKCdpZCcsICdwcm9qZWN0cycpO1xuICAgIH0sXG4gICAgb25FbnRlckNvbXBsZXRlZDogZnVuY3Rpb24gb25FbnRlckNvbXBsZXRlZCgpIHtcbiAgICAgICRkb2N1bWVudC50cmlnZ2VyKCdwcm9qZWN0c09uRW50ZXJDb21wbGV0ZWQnKTtcbiAgICAgICRib2R5LnJlbW92ZUNsYXNzKCkuYWRkQ2xhc3MoJ3Byb2plY3RzJyk7XG4gICAgfSxcbiAgICBvbkxlYXZlOiBmdW5jdGlvbiBvbkxlYXZlKCkge1xuICAgICAgJGRvY3VtZW50LnRyaWdnZXIoJ3Byb2plY3RzT25MZWF2ZScpO1xuICAgIH0sXG4gICAgb25MZWF2ZUNvbXBsZXRlZDogZnVuY3Rpb24gb25MZWF2ZUNvbXBsZXRlZCgpIHtcbiAgICAgICRkb2N1bWVudC50cmlnZ2VyKCdwcm9qZWN0c09uTGVhdmVDb21wbGV0ZWQnKTtcbiAgICB9XG4gIH0pO1xuXG4gIHZhciBBYm91dCA9IEJhcmJhLkJhc2VWaWV3LmV4dGVuZCh7XG4gICAgbmFtZXNwYWNlOiAnYWJvdXQnLFxuICAgIG9uRW50ZXI6IGZ1bmN0aW9uIG9uRW50ZXIoKSB7XG4gICAgICAkZG9jdW1lbnQudHJpZ2dlcignYWJvdXRPbkVudGVyJyk7XG4gICAgICAkYm9keS5hZGRDbGFzcygnYWJvdXQnKTtcbiAgICAgICRib2R5LmF0dHIoJ2lkJywgJ2Fib3V0Jyk7XG4gICAgfSxcbiAgICBvbkVudGVyQ29tcGxldGVkOiBmdW5jdGlvbiBvbkVudGVyQ29tcGxldGVkKCkge1xuICAgICAgJGRvY3VtZW50LnRyaWdnZXIoJ2Fib3V0T25FbnRlckNvbXBsZXRlZCcpO1xuICAgICAgJGJvZHkucmVtb3ZlQ2xhc3MoKS5hZGRDbGFzcygnYWJvdXQnKTtcbiAgICB9LFxuICAgIG9uTGVhdmU6IGZ1bmN0aW9uIG9uTGVhdmUoKSB7XG4gICAgICAkZG9jdW1lbnQudHJpZ2dlcignYWJvdXRPbkxlYXZlJyk7XG4gICAgfSxcbiAgICBvbkxlYXZlQ29tcGxldGVkOiBmdW5jdGlvbiBvbkxlYXZlQ29tcGxldGVkKCkge1xuICAgICAgJGRvY3VtZW50LnRyaWdnZXIoJ2Fib3V0T25MZWF2ZUNvbXBsZXRlZCcpO1xuICAgIH1cbiAgfSk7XG5cbiAgSG9tZXBhZ2UuaW5pdCgpO1xuICBQcm9qZWN0cy5pbml0KCk7XG4gIEFib3V0LmluaXQoKTtcblxuICBCYXJiYS5QamF4LnN0YXJ0KCk7XG4gIEJhcmJhLlByZWZldGNoLmluaXQoKTtcblxuICB2YXIgc3BlZWQgPSA3NTA7XG5cbiAgdmFyIHRyYW5zaXRpb24gPSBCYXJiYS5CYXNlVHJhbnNpdGlvbi5leHRlbmQoe1xuICAgIHN0YXJ0OiBmdW5jdGlvbiBzdGFydCgpIHtcbiAgICAgIFByb21pc2UuYWxsKFt0aGlzLm5ld0NvbnRhaW5lckxvYWRpbmcsIHRoaXMudHJhbnNpdGlvbk91dCgpXSkudGhlbih0aGlzLnRyYW5zaXRpb25Jbi5iaW5kKHRoaXMpKTtcbiAgICB9LFxuICAgIHRyYW5zaXRpb25PdXQ6IGZ1bmN0aW9uIHRyYW5zaXRpb25PdXQoKSB7XG4gICAgICB2YXIgJGVsT2xkID0gJCh0aGlzLm9sZENvbnRhaW5lcik7XG5cbiAgICAgICRlbE9sZC5yZW1vdmVDbGFzcygndHJhbnNpdGlvbi1pbicpLmFkZENsYXNzKCd0cmFuc2l0aW9uLW91dCcpO1xuXG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICRlbE9sZC5zaG93KCkucHJvbWlzZSgpO1xuICAgICAgfSwgc3BlZWQpO1xuICAgIH0sXG4gICAgdHJhbnNpdGlvbkluOiBmdW5jdGlvbiB0cmFuc2l0aW9uSW4oKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgIHZhciAkZWxOZXcgPSAkKHRoaXMubmV3Q29udGFpbmVyKTtcblxuICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoX3RoaXMyLm9sZENvbnRhaW5lcikuaGlkZSgpO1xuICAgICAgICAkKF90aGlzMi5vbGRDb250YWluZXIpLnNob3coKTtcbiAgICAgICAgX3RoaXMuZG9uZSgpO1xuICAgICAgfSwgc3BlZWQpO1xuXG4gICAgICAkZWxOZXcuY3NzKHtcbiAgICAgICAgdmlzaWJpbGl0eTogJ3Zpc2libGUnXG4gICAgICB9KTtcblxuICAgICAgJGVsTmV3LmFkZENsYXNzKCd0cmFuc2l0aW9uLWluJykucmVtb3ZlQ2xhc3MoJ3RyYW5zaXRpb24tb3V0Jyk7XG4gICAgfVxuICB9KTtcblxuICBCYXJiYS5QamF4LmdldFRyYW5zaXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRyYW5zaXRpb247XG4gIH07XG5cbiAgQmFyYmEuRGlzcGF0Y2hlci5vbignbmV3UGFnZVJlYWR5JywgZnVuY3Rpb24gKGN1cnJlbnRTdGF0dXMsIG9sZFN0YXR1cykge1xuXG4gICAgJCgkZG9jdW1lbnQpLnRyaWdnZXIoJ2FsbFBhZ2VzRW50ZXInKTtcblxuICAgIHN3aXRjaCAodHJ1ZSkge1xuXG4gICAgICBjYXNlIG9sZFN0YXR1cy5uYW1lc3BhY2UgPT09ICdwcm9qZWN0cycgJiYgY3VycmVudFN0YXR1cy5uYW1lc3BhY2UgPT09ICdwcm9qZWN0cyc6XG4gICAgICAgICRiYXJiYVdyYXBwZXIuYWRkQ2xhc3MoJ3RlcnRpYXJ5LXRyYW5zaXRpb24nKTtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgd2luZG93LnNjcm9sbFRvKDAsIDApO1xuICAgICAgICB9LCBzcGVlZCk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIGN1cnJlbnRTdGF0dXMubmFtZXNwYWNlID09PSAnaG9tZXBhZ2UnOlxuICAgICAgICAkYmFyYmFXcmFwcGVyLnJlbW92ZUNsYXNzKCdmYWRlLWluJyk7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHdpbmRvdy5zY3JvbGxUbygwLCAwKTtcbiAgICAgICAgICAkYmFyYmFXcmFwcGVyLmFkZENsYXNzKCdmYWRlLWluJyk7XG4gICAgICAgIH0sIHNwZWVkKTtcbiAgICAgICAgY29uc29sZS5sb2coJ2hvbWVwYWdlJyk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICAkYmFyYmFXcmFwcGVyLnJlbW92ZUNsYXNzKCk7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHdpbmRvdy5zY3JvbGxUbygwLCAwKTtcbiAgICAgICAgfSwgc3BlZWQpO1xuICAgIH1cbiAgfSk7XG59O1xuXG4kKGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHBhZ2VUcmFuc2l0aW9ucygpO1xufSk7XG4iLCJmdW5jdGlvbiBkaXJlY3Rpb25Bd2FyZUJ1dHRvbigpIHtcbiAgJCgnLmJ0bicpXG4gICAgLm9uKCdtb3VzZWVudGVyJywgZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIHBhcmVudE9mZnNldCA9ICQodGhpcykub2Zmc2V0KCksXG4gICAgICAgIHJlbFggPSBlLnBhZ2VYIC0gcGFyZW50T2Zmc2V0LmxlZnQsXG4gICAgICAgIHJlbFkgPSBlLnBhZ2VZIC0gcGFyZW50T2Zmc2V0LnRvcDtcbiAgICAgICQodGhpcykuZmluZCgnc3BhbicpLmNzcyh7dG9wOnJlbFksIGxlZnQ6cmVsWH0pXG4gICAgfSlcbiAgICAub24oJ21vdXNlb3V0JywgZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIHBhcmVudE9mZnNldCA9ICQodGhpcykub2Zmc2V0KCksXG4gICAgICAgIHJlbFggPSBlLnBhZ2VYIC0gcGFyZW50T2Zmc2V0LmxlZnQsXG4gICAgICAgIHJlbFkgPSBlLnBhZ2VZIC0gcGFyZW50T2Zmc2V0LnRvcDtcbiAgICAgICQodGhpcykuZmluZCgnc3BhbicpLmNzcyh7dG9wOnJlbFksIGxlZnQ6cmVsWH0pXG4gICAgfSk7XG59XG5cbmRpcmVjdGlvbkF3YXJlQnV0dG9uKCk7XG5cbiQoJGRvY3VtZW50KS5vbignYWxsUGFnZXNFbnRlcicsIGZ1bmN0aW9uKCkge1xuICBkaXJlY3Rpb25Bd2FyZUJ1dHRvbigpO1xufSk7XG4iLCJmdW5jdGlvbiBwYXJhbGxheCgpIHtcbiAgdmFyICRjb250YWluZXIgPSAkKCcuZGV2aWNlcycpO1xuICB2YXIgJGRlc2t0b3AgPSAkKCdpbWcuZGVza3RvcCcpO1xuICB2YXIgJGxhcHRvcCA9ICQoJ2ltZy5sYXB0b3AnKTtcbiAgdmFyICRtb2JpbGUgPSAkKCdpbWcubW9iaWxlJyk7XG4gIHZhciBjb250YWluZXJfdyA9ICRjb250YWluZXIud2lkdGgoKTtcbiAgdmFyIGNvbnRhaW5lcl9oID0gJGNvbnRhaW5lci5oZWlnaHQoKTtcblxuICAkKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uICgpIHtcbiAgICBjb250YWluZXJfdyA9ICRjb250YWluZXIud2lkdGgoKTtcbiAgICBjb250YWluZXJfaCA9ICRjb250YWluZXIuaGVpZ2h0KCk7XG4gIH0pO1xuXG4gICQod2luZG93KS5vbignbW91c2Vtb3ZlIGRldmljZW9yaWVudGF0aW9uJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgdmFyIGlzTW9iaWxlID0gd2luZG93Lm1hdGNoTWVkaWEoJyhtYXgtd2lkdGg6IDc2N3B4KScpLm1hdGNoZXM7XG4gICAgdmFyIHBvc194ID0gaXNNb2JpbGUgPyBNYXRoLnJvdW5kKGV2ZW50Lm9yaWdpbmFsRXZlbnQuZ2FtbWEgKiA1MCkgOiBldmVudC5wYWdlWDtcbiAgICB2YXIgcG9zX3kgPSBpc01vYmlsZSA/IE1hdGgucm91bmQoZXZlbnQub3JpZ2luYWxFdmVudC5iZXRhICogNTApIDogZXZlbnQucGFnZVk7XG4gICAgdmFyIGxlZnQgPSBjb250YWluZXJfdyAvIDIgLSBwb3NfeDtcbiAgICB2YXIgdG9wID0gY29udGFpbmVyX2ggLyAyIC0gcG9zX3k7XG5cbiAgICAkKCcjZGV2aWNlT3JpZW50YXRpb24nKS50ZXh0KCdnYW1tYTogJyArIGV2ZW50Lm9yaWdpbmFsRXZlbnQuZ2FtbWEgKyAnIGJldGE6ICcgKyBldmVudC5vcmlnaW5hbEV2ZW50LmJldGEpO1xuXG4gICAgZnVuY3Rpb24gdHJhbnNsYXRlVHdlZW4oYXJncykge1xuICAgICAgVHdlZW5MaXRlLnRvKGFyZ3MuZWwsIDEsIHtcbiAgICAgICAgY3NzOiB7XG4gICAgICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlWCgnICsgbGVmdCAvIGFyZ3MucG9zTGVmdCArICdweCkgdHJhbnNsYXRlWSgnICsgdG9wIC8gYXJncy5wb3NUb3AgKyAncHgpJ1xuICAgICAgICB9LFxuICAgICAgICBlYXNlOiBFeHBvLmVhc2VPdXQsXG4gICAgICAgIG92ZXJ3cml0ZTogJ2FsbCdcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHZhciBwYXJhbGxheFByb3BzQXJyYXkgPSBbXG4gICAgICB7IGVsOiAkZGVza3RvcCwgcG9zTGVmdDogNzUsIHBvc1RvcDogMzV9LFxuICAgICAgeyBlbDogJGxhcHRvcCwgcG9zTGVmdDogNDUsIHBvc1RvcDogMTV9LFxuICAgICAgeyBlbDogJG1vYmlsZSwgcG9zTGVmdDogNTUsIHBvc1RvcDogMjV9XG4gICAgXTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFyYWxsYXhQcm9wc0FycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICB0cmFuc2xhdGVUd2VlbihwYXJhbGxheFByb3BzQXJyYXlbaV0pO1xuICAgIH1cbiAgfSk7XG4gIC8vXG4gIC8vdmFyIGN1cnNvck9uRGl2ID0gZmFsc2U7XG4gIC8vXG4gIC8vJChkb2N1bWVudCkub24oe1xuICAvLyAgICBtb3VzZWVudGVyOiBmdW5jdGlvbigpe1xuICAvLyAgICAgIGN1cnNvck9uRGl2ID0gdHJ1ZTtcbiAgLy8gICAgfSxcbiAgLy8gICAgbW91c2VsZWF2ZTogZnVuY3Rpb24oKXtcbiAgLy8gICAgICBjdXJzb3JPbkRpdiA9IGZhbHNlO1xuICAvLyAgICB9XG4gIC8vICB9LFxuICAvLyAgJy5jaXJjbGUnXG4gIC8vKTtcbiAgLy9cbiAgLy8kKGRvY3VtZW50KS5tb3VzZW1vdmUoZnVuY3Rpb24oZSkge1xuICAvL1xuICAvLyAgaWYgKGN1cnNvck9uRGl2KSB7XG4gIC8vICAgICQoJy5jdXN0b20tY3Vyc29yJykucG9zaXRpb24oe1xuICAvLyAgICAgIG15OiAnbGVmdCBjZW50ZXInLFxuICAvLyAgICAgIG9mOiBlLFxuICAvLyAgICAgIGNvbGxpc2lvbjogJ25vbmUnXG4gIC8vICAgIH0pO1xuICAvLyAgfVxuICAvL1xuICAvL30pO1xufVxuXG4kKGRvY3VtZW50KS5vbignaG9tZXBhZ2VPbkVudGVyQ29tcGxldGVkJywgZnVuY3Rpb24oKSB7XG4gIHBhcmFsbGF4KCk7XG59KTtcbiIsInZhciBzZXR0aW5ncyA9IHtcbiAgc2VjdGlvbiA6ICcuc2Nyb2xsLXNlY3Rpb24nLFxuICBlYXNpbmc6ICdlYXNlT3V0RXhwbycsXG4gIHNjcm9sbFNwZWVkOiAxMDAwLFxuICBvZmZzZXQgOiAwLFxuICBzdGFuZGFyZFNjcm9sbEVsZW1lbnRzOiAnYm9keTpub3QoLmhvbWUpJyxcbiAgc2Nyb2xsYmFyczogdHJ1ZSxcbiAgc2V0SGVpZ2h0czogdHJ1ZSxcbiAgb3ZlcmZsb3dTY3JvbGw6IHRydWUsXG4gIHVwZGF0ZUhhc2g6IGZhbHNlLFxuICB0b3VjaFNjcm9sbDogdHJ1ZSxcbiAgYmVmb3JlOmZ1bmN0aW9uKGksIHBhbmVscykge1xuXG4gICAgdmFyIHJlZiA9IHBhbmVsc1tpXS5hdHRyKCdkYXRhLXNlY3Rpb24tbmFtZScpO1xuICAgICQoJy5wYWdpbmF0aW9uIC5hY3RpdmUnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgJCgnLnBhZ2luYXRpb24nKS5maW5kKCdhW2hyZWY9XCIjJyArIHJlZiArICdcIl0nKS5hZGRDbGFzcygnYWN0aXZlJyk7XG5cbiAgICAkKCcuc2Nyb2xsLXNlY3Rpb24nKS5lcShpKVxuICAgICAgLnJlbW92ZUNsYXNzKCdhY3RpdmUgcHJldmlvdXMgbmV4dCcpXG4gICAgICAuYWRkQ2xhc3MoJ2FjdGl2ZScpXG4gICAgICAuc2libGluZ3MoJy5zY3JvbGwtc2VjdGlvbicpXG4gICAgICAucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuXG4gICAgJCgnLnNjcm9sbC1zZWN0aW9uJykuZXEoaSAtIDEpXG4gICAgICAucmVtb3ZlQ2xhc3MoJ2FjdGl2ZSBwcmV2aW91cyBuZXh0JylcbiAgICAgIC5hZGRDbGFzcygncHJldmlvdXMnKVxuICAgICAgLnNpYmxpbmdzKCcuc2Nyb2xsLXNlY3Rpb24nKVxuICAgICAgLnJlbW92ZUNsYXNzKCdwcmV2aW91cycpO1xuXG4gICAgJCgnLnNjcm9sbC1zZWN0aW9uJykuZXEoaSArIDEpXG4gICAgICAucmVtb3ZlQ2xhc3MoJ2FjdGl2ZSBwcmV2aW91cyBuZXh0JylcbiAgICAgIC5hZGRDbGFzcygnbmV4dCcpXG4gICAgICAuc2libGluZ3MoJy5zY3JvbGwtc2VjdGlvbicpXG4gICAgICAucmVtb3ZlQ2xhc3MoJ25leHQnKTtcblxuICAgIGlmIChpID09PSBwYW5lbHMubGVuZ3RoIC0gMSkge1xuICAgICAgJCgnLmFycm93LWRvd24nKS5hZGRDbGFzcygnZGlzYWJsZWQnKTtcbiAgICB9IGVsc2UgaWYgKGkgPT09IDApIHtcbiAgICAgICQoJy5hcnJvdy11cCcpLmFkZENsYXNzKCdkaXNhYmxlZCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkKCcuYXJyb3ctdXAsIC5hcnJvdy1kb3duJykucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XG4gICAgfVxuICB9XG59O1xuXG5mdW5jdGlvbiBwYWdpbmF0aW9uQXJyb3dzTW92ZSgpIHtcbiAgJCgnLnBhZ2luYXRpb24gYScpLmVhY2goZnVuY3Rpb24gKGkpIHtcbiAgICAkKHRoaXMpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAkLnNjcm9sbGlmeS5tb3ZlKGkpO1xuICAgIH0pO1xuICB9KTtcblxuICAkKCcuYXJyb3ctZG93bicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAkLnNjcm9sbGlmeS5uZXh0KCk7XG4gIH0pO1xuXG4gICQoJy5hcnJvdy11cCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAkLnNjcm9sbGlmeS5wcmV2aW91cygpO1xuICB9KTtcbn1cblxucGFnaW5hdGlvbkFycm93c01vdmUoKTtcblxuaWYoJCgnYm9keScpLmhhc0NsYXNzKCdob21lJykpIHtcbiAgJC5zY3JvbGxpZnkoc2V0dGluZ3MpO1xuICAkLnNjcm9sbGlmeS5tb3ZlKDApO1xuICB3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7XG59XG5cbiQoZG9jdW1lbnQpLm9uKCdob21lcGFnZU9uRW50ZXInLCBmdW5jdGlvbigpIHtcbiAgd2luZG93LnNjcm9sbFRvKDAsIDApO1xuICAkLnNjcm9sbGlmeS5tb3ZlKDApO1xufSk7XG5cbiQoZG9jdW1lbnQpLm9uKCdob21lcGFnZU9uRW50ZXJDb21wbGV0ZWQnLCBmdW5jdGlvbigpIHtcbiAgJC5zY3JvbGxpZnkoc2V0dGluZ3MpO1xuICBwYWdpbmF0aW9uQXJyb3dzTW92ZSgpO1xufSk7XG5cbiQoZG9jdW1lbnQpLm9uKCdob21lcGFnZU9uTGVhdmVDb21wbGV0ZWQnLCBmdW5jdGlvbigpIHtcbiAgJC5zY3JvbGxpZnkuZGVzdHJveSgpO1xufSk7XG5cblxuIiwidmFyIGFib3V0ID0gZnVuY3Rpb24oKSB7XG5cbiAgJGRvY3VtZW50Lm9uKCdhYm91dE9uRW50ZXInLCBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygnYWJvdXRPbkVudGVyJyk7XG4gIH0pO1xuXG4gICRkb2N1bWVudC5vbignYWJvdXRPbkVudGVyQ29tcGxldGVkJywgZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coJ2Fib3V0T25FbnRlckNvbXBsZXRlZCcpO1xuICB9KTtcblxuICAkZG9jdW1lbnQub24oJ2Fib3V0T25MZWF2ZScsIGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKCdhYm91dE9uTGVhdmUnKTtcbiAgfSk7XG5cbiAgJGRvY3VtZW50Lm9uKCdhYm91dE9uTGVhdmVDb21wbGV0ZWQnLCBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygnYWJvdXRPbkxlYXZlQ29tcGxldGVkJyk7XG4gIH0pO1xufTtcblxuJChmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBhYm91dCgpO1xufSk7XG4iLCIkKGRvY3VtZW50KS5vbignaG9tZXBhZ2VPbkVudGVyQ29tcGxldGVkJywgZnVuY3Rpb24oKSB7XG4gICQoJy5jYXJvdXNlbCcpLnNsaWNrKHtcbiAgICBpbmZpbml0ZTogdHJ1ZSxcbiAgICB2YXJpYWJsZVdpZHRoOiB0cnVlLFxuICAgIHNsaWRlc1RvU2hvdzogMSxcbiAgICBwcmV2QXJyb3c6ICQoJy5wcmV2JyksXG4gICAgbmV4dEFycm93OiAkKCcubmV4dCcpXG4gIH0pO1xuXG4gICQoJy5idG4nKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAkKHRoaXMpLmNsb3Nlc3QoJy5jaXJjbGUnKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gIH0pXG59KTtcbiIsInZhciBob21lUGFnZSA9IGZ1bmN0aW9uKCkge1xuXG4gICRkb2N1bWVudC5vbignaG9tZXBhZ2VPbkVudGVyJywgZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coJ2hvbWVwYWdlT25FbnRlcicpO1xuICB9KTtcblxuICAkZG9jdW1lbnQub24oJ2hvbWVwYWdlT25FbnRlckNvbXBsZXRlZCcsIGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKCdob21lcGFnZU9uRW50ZXJDb21wbGV0ZWQnKTtcbiAgfSk7XG5cbiAgJGRvY3VtZW50Lm9uKCdob21lcGFnZU9uTGVhdmUnLCBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygnaG9tZXBhZ2VPbkxlYXZlJyk7XG4gIH0pO1xuXG4gICRkb2N1bWVudC5vbignaG9tZXBhZ2VPbkxlYXZlQ29tcGxldGVkJywgZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coJ2hvbWVwYWdlT25MZWF2ZUNvbXBsZXRlZCcpO1xuICB9KTtcbn07XG5cbiQoZnVuY3Rpb24gKCkge1xuICByZXR1cm4gaG9tZVBhZ2UoKTtcbn0pO1xuIiwidmFyICRib2R5ID0gJCgnYm9keScpO1xudmFyICRuYXZUb2dnbGUgPSAkKCcubmF2LCBuYXYgdWwgbGkgYScpO1xuXG4kbmF2VG9nZ2xlLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdpcy1jbG9zZWQnKTtcbiAgaWYoISQodGhpcykuaGFzQ2xhc3MoJ2lzLWNsb3NlZCcpKSB7XG4gICAgJGJvZHkuYWRkQ2xhc3MoJ2lzLW9wZW4nKTtcbiAgfSBlbHNlIHtcbiAgICAkYm9keS5yZW1vdmVDbGFzcygnaXMtb3BlbicpO1xuICB9XG59KTtcbiIsInZhciBwcm9qZWN0cyA9IGZ1bmN0aW9uKCkge1xuXG4gICRkb2N1bWVudC5vbigncHJvamVjdHNPbkVudGVyJywgZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coJ3Byb2plY3RzT25FbnRlcicpO1xuICB9KTtcblxuICAkZG9jdW1lbnQub24oJ3Byb2plY3RzT25FbnRlckNvbXBsZXRlZCcsIGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKCdwcm9qZWN0c09uRW50ZXJDb21wbGV0ZWQnKTtcbiAgfSk7XG5cbiAgJGRvY3VtZW50Lm9uKCdwcm9qZWN0c09uTGVhdmUnLCBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygncHJvamVjdHNPbkxlYXZlJyk7XG4gIH0pO1xuXG4gICRkb2N1bWVudC5vbigncHJvamVjdHNPbkxlYXZlQ29tcGxldGVkJywgZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coJ3Byb2plY3RzT25MZWF2ZUNvbXBsZXRlZCcpO1xuICB9KTtcbn07XG5cbiQoZnVuY3Rpb24gKCkge1xuICByZXR1cm4gcHJvamVjdHMoKTtcbn0pO1xuIl19
