"use strict";function directionAwareButton(){$(".btn").on("mouseenter",function(e){var o=$(this).offset(),n=e.pageX-o.left,t=e.pageY-o.top;$(this).find("span").css({top:t,left:n})}).on("mouseout",function(e){var o=$(this).offset(),n=e.pageX-o.left,t=e.pageY-o.top;$(this).find("span").css({top:t,left:n})})}function parallax(){var e=$(".devices"),o=$("img.desktop"),n=$("img.laptop"),t=$("img.mobile"),a=e.width(),s=e.height();$(window).resize(function(){a=e.width(),s=e.height()}),$(window).on("mousemove deviceorientation",function(e){function i(e){TweenLite.to(e.el,1,{css:{transform:"translateX("+d/e.posLeft+"px) translateY("+u/e.posTop+"px)"},ease:Expo.easeOut,overwrite:"all"})}var r=window.matchMedia("(max-width: 767px)").matches,c=r?Math.round(50*e.originalEvent.gamma):e.pageX,l=r?Math.round(50*e.originalEvent.beta):e.pageY,d=a/2-c,u=s/2-l;$("#deviceOrientation").text("gamma: "+e.originalEvent.gamma+" beta: "+e.originalEvent.beta);for(var m=[{el:o,posLeft:75,posTop:35},{el:n,posLeft:45,posTop:15},{el:t,posLeft:55,posTop:25}],p=0;p<m.length;p++)i(m[p])})}function paginationArrowsMove(){$(".pagination a").each(function(e){$(this).click(function(o){o.preventDefault(),$.scrollify.move(e)})}),$(".arrow-down").click(function(){$.scrollify.next()}),$(".arrow-up").click(function(){$.scrollify.previous()})}var $document=$(document),$body=$("body"),$barbaWrapper=$("#barba-wrapper"),pageTransitions=function(){var e=Barba.BaseView.extend({namespace:"homepage",onEnter:function(){$document.trigger("homepageOnEnter"),$body.addClass("home"),$body.attr("id","home")},onEnterCompleted:function(){$document.trigger("homepageOnEnterCompleted"),$body.removeClass().addClass("home")},onLeave:function(){$document.trigger("homepageOnLeave")},onLeaveCompleted:function(){$document.trigger("homepageOnLeaveCompleted")}}),o=Barba.BaseView.extend({namespace:"projects",onEnter:function(){$document.trigger("projectsOnEnter"),$body.addClass("projects"),$body.attr("id","projects")},onEnterCompleted:function(){$document.trigger("projectsOnEnterCompleted"),$body.removeClass().addClass("projects")},onLeave:function(){$document.trigger("projectsOnLeave")},onLeaveCompleted:function(){$document.trigger("projectsOnLeaveCompleted")}}),n=Barba.BaseView.extend({namespace:"about",onEnter:function(){$document.trigger("aboutOnEnter"),$body.addClass("about"),$body.attr("id","about")},onEnterCompleted:function(){$document.trigger("aboutOnEnterCompleted"),$body.removeClass().addClass("about")},onLeave:function(){$document.trigger("aboutOnLeave")},onLeaveCompleted:function(){$document.trigger("aboutOnLeaveCompleted")}});e.init(),o.init(),n.init(),Barba.Pjax.start(),Barba.Prefetch.init();var t=750,a=Barba.BaseTransition.extend({start:function(){Promise.all([this.newContainerLoading,this.transitionOut()]).then(this.transitionIn.bind(this))},transitionOut:function(){var e=$(this.oldContainer);e.removeClass("transition-in").addClass("transition-out"),setTimeout(function(){return e.show().promise()},t)},transitionIn:function(){var e=this,o=this,n=$(this.newContainer);setTimeout(function(){$(e.oldContainer).hide(),$(e.oldContainer).show(),o.done()},t),n.css({visibility:"visible"}),n.addClass("transition-in").removeClass("transition-out")}});Barba.Pjax.getTransition=function(){return a},Barba.Dispatcher.on("newPageReady",function(e,o){switch($($document).trigger("allPagesEnter"),!0){case"projects"===o.namespace&&"projects"===e.namespace:$barbaWrapper.addClass("tertiary-transition"),setTimeout(function(){window.scrollTo(0,0)},t);break;case"homepage"===e.namespace:$barbaWrapper.removeClass("fade-in"),setTimeout(function(){window.scrollTo(0,0),$barbaWrapper.addClass("fade-in")},t),console.log("homepage");break;default:$barbaWrapper.removeClass(),setTimeout(function(){window.scrollTo(0,0)},t)}})};$(function(){return pageTransitions()});var about=function(){$document.on("aboutOnEnter",function(){console.log("aboutOnEnter")}),$document.on("aboutOnEnterCompleted",function(){console.log("aboutOnEnterCompleted")}),$document.on("aboutOnLeave",function(){console.log("aboutOnLeave")}),$document.on("aboutOnLeaveCompleted",function(){console.log("aboutOnLeaveCompleted")})};$(function(){return about()}),directionAwareButton(),$($document).on("allPagesEnter",function(){directionAwareButton()}),$(document).on("homepageOnEnterCompleted",function(){$(".carousel").slick({infinite:!0,variableWidth:!0,slidesToShow:1,prevArrow:$(".arrow-prev"),nextArrow:$(".arrow-next")}),$(".slick-active").addClass("active"),$(".carousel").on("afterChange",function(){$(this).find(".slide.slick-active").addClass("animate").siblings().removeClass("animate")}),$(".carousel .slick-active").addClass("animate")});var homePage=function(){function e(){$("section.intro").addClass("landing-animation"),setTimeout(function(){$("section.intro").removeClass("landing-animation")},2e3)}e(),$document.on("homepageOnEnter",function(){console.log("homepageOnEnter"),e()}),$document.on("homepageOnEnterCompleted",function(){console.log("homepageOnEnterCompleted")}),$document.on("homepageOnLeave",function(){console.log("homepageOnLeave")}),$document.on("homepageOnLeaveCompleted",function(){console.log("homepageOnLeaveCompleted")})};$("body").hasClass("home")&&$(function(){return homePage()});var $body=$("body"),$navToggle=$(".nav"),$navItem=$("nav ul li a");$navToggle.on("click",function(){$(this).toggleClass("is-closed"),$(this).hasClass("is-closed")?$body.removeClass("is-open"):$body.addClass("is-open")}),$navItem.on("click",function(){$navToggle.toggleClass("is-closed"),$navToggle.hasClass("is-closed")?$body.removeClass("is-open"):$body.addClass("is-open")}),$(document).on("homepageOnEnterCompleted",function(){parallax()});var projects=function(){$document.on("projectsOnEnter",function(){console.log("projectsOnEnter")}),$document.on("projectsOnEnterCompleted",function(){console.log("projectsOnEnterCompleted")}),$document.on("projectsOnLeave",function(){console.log("projectsOnLeave")}),$document.on("projectsOnLeaveCompleted",function(){console.log("projectsOnLeaveCompleted")})};$(function(){return projects()});var settings={section:".scroll-section",easing:"easeOutExpo",scrollSpeed:1e3,offset:0,standardScrollElements:"body:not(.home)",scrollbars:!0,setHeights:!0,overflowScroll:!0,updateHash:!1,touchScroll:!0,before:function(e,o){var n=o[e].attr("data-section-name");$(".pagination .active").removeClass("active"),$(".pagination").find('a[href="#'+n+'"]').addClass("active"),$(".scroll-section").eq(e).removeClass("active previous next").addClass("active").siblings(".scroll-section").removeClass("active"),$(".scroll-section").eq(e-1).removeClass("active previous next").addClass("previous").siblings(".scroll-section").removeClass("previous"),$(".scroll-section").eq(e+1).removeClass("active previous next").addClass("next").siblings(".scroll-section").removeClass("next"),e===o.length-1?$(".arrow-down").addClass("disabled"):0===e?$(".arrow-up").addClass("disabled"):$(".arrow-up, .arrow-down").removeClass("disabled")}};$("body").hasClass("home")&&($.scrollify(settings),window.scrollTo(0,0),$.scrollify.move(0)),$(document).on("homepageOnEnter",function(){window.scrollTo(0,0),$.scrollify.move(0),paginationArrowsMove()}),$(document).on("homepageOnEnterCompleted",function(){$.scrollify(settings)}),$(document).on("homepageOnLeaveCompleted",function(){$.scrollify.destroy()});var morphEls=function(){function e(e){var o=Snap(e.el),n=o.select("path"),t={toSpeed:e.toSpeed,fromSpeed:e.fromSpeed,from:n.attr("d"),to:e.el.getAttribute("data-morph-active")};e.el.addEventListener("mouseover",function(){n.animate({path:t.to},t.toSpeed,e.easeIn)}),e.el.addEventListener("mouseout",function(){n.animate({path:t.from},t.fromSpeed,e.easeOut)})}for(var o=[{el:document.querySelector(".arrow-up"),easeIn:mina.easein,easeOut:mina.easeout,toSpeed:300,fromSpeed:150},{el:document.querySelector(".arrow-down"),easeIn:mina.easein,easeOut:mina.easeout,toSpeed:300,fromSpeed:150},{el:document.querySelector(".arrow-next"),easeIn:mina.easein,easeOut:mina.bounce,toSpeed:300,fromSpeed:500},{el:document.querySelector(".arrow-prev"),easeIn:mina.easein,easeOut:mina.bounce,toSpeed:300,fromSpeed:500}],n=0;n<o.length;n++)e(o[n])};$("body").hasClass("home")&&morphEls(),$(document).on("homepageOnEnter",function(){morphEls()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl9iYXJiYVRyYW5zaXRpb25zLmpzIiwiYnV0dG9uRWZmZWN0LmpzIiwicGFyYWxsYXguanMiLCJzY3JvbGxpZnkuanMiLCJhYm91dC5qcyIsImNhcm91c2Vscy5qcyIsImhvbWUuanMiLCJuYXZpZ2F0aW9uLmpzIiwicHJvamVjdHMuanMiLCJzbmFwRWxlbWVudHMuanMiXSwibmFtZXMiOlsiZGlyZWN0aW9uQXdhcmVCdXR0b24iLCIkIiwib24iLCJlIiwicGFyZW50T2Zmc2V0IiwidGhpcyIsIm9mZnNldCIsInJlbFgiLCJwYWdlWCIsImxlZnQiLCJyZWxZIiwicGFnZVkiLCJ0b3AiLCJmaW5kIiwiY3NzIiwicGFyYWxsYXgiLCIkY29udGFpbmVyIiwiJGRlc2t0b3AiLCIkbGFwdG9wIiwiJG1vYmlsZSIsImNvbnRhaW5lcl93Iiwid2lkdGgiLCJjb250YWluZXJfaCIsImhlaWdodCIsIndpbmRvdyIsInJlc2l6ZSIsImV2ZW50IiwidHJhbnNsYXRlVHdlZW4iLCJhcmdzIiwiVHdlZW5MaXRlIiwidG8iLCJlbCIsInRyYW5zZm9ybSIsInBvc0xlZnQiLCJwb3NUb3AiLCJlYXNlIiwiRXhwbyIsImVhc2VPdXQiLCJvdmVyd3JpdGUiLCJpc01vYmlsZSIsIm1hdGNoTWVkaWEiLCJtYXRjaGVzIiwicG9zX3giLCJNYXRoIiwicm91bmQiLCJvcmlnaW5hbEV2ZW50IiwiZ2FtbWEiLCJwb3NfeSIsImJldGEiLCJ0ZXh0IiwicGFyYWxsYXhQcm9wc0FycmF5IiwiaSIsImxlbmd0aCIsInBhZ2luYXRpb25BcnJvd3NNb3ZlIiwiZWFjaCIsImNsaWNrIiwicHJldmVudERlZmF1bHQiLCJzY3JvbGxpZnkiLCJtb3ZlIiwibmV4dCIsInByZXZpb3VzIiwiJGRvY3VtZW50IiwiZG9jdW1lbnQiLCIkYm9keSIsIiRiYXJiYVdyYXBwZXIiLCJwYWdlVHJhbnNpdGlvbnMiLCJIb21lcGFnZSIsIkJhcmJhIiwiQmFzZVZpZXciLCJleHRlbmQiLCJuYW1lc3BhY2UiLCJvbkVudGVyIiwidHJpZ2dlciIsImFkZENsYXNzIiwiYXR0ciIsIm9uRW50ZXJDb21wbGV0ZWQiLCJyZW1vdmVDbGFzcyIsIm9uTGVhdmUiLCJvbkxlYXZlQ29tcGxldGVkIiwiUHJvamVjdHMiLCJBYm91dCIsImluaXQiLCJQamF4Iiwic3RhcnQiLCJQcmVmZXRjaCIsInNwZWVkIiwidHJhbnNpdGlvbiIsIkJhc2VUcmFuc2l0aW9uIiwiUHJvbWlzZSIsImFsbCIsIm5ld0NvbnRhaW5lckxvYWRpbmciLCJ0cmFuc2l0aW9uT3V0IiwidGhlbiIsInRyYW5zaXRpb25JbiIsImJpbmQiLCIkZWxPbGQiLCJvbGRDb250YWluZXIiLCJzZXRUaW1lb3V0Iiwic2hvdyIsInByb21pc2UiLCJfdGhpczIiLCJfdGhpcyIsIiRlbE5ldyIsIm5ld0NvbnRhaW5lciIsImhpZGUiLCJkb25lIiwidmlzaWJpbGl0eSIsImdldFRyYW5zaXRpb24iLCJEaXNwYXRjaGVyIiwiY3VycmVudFN0YXR1cyIsIm9sZFN0YXR1cyIsInNjcm9sbFRvIiwiY29uc29sZSIsImxvZyIsImFib3V0Iiwic2xpY2siLCJpbmZpbml0ZSIsInZhcmlhYmxlV2lkdGgiLCJzbGlkZXNUb1Nob3ciLCJwcmV2QXJyb3ciLCJuZXh0QXJyb3ciLCJzaWJsaW5ncyIsImhvbWVQYWdlIiwibGFuZGluZ1BhZ2VJbnRyb0FuaW1hdGlvbiIsImhhc0NsYXNzIiwiJG5hdlRvZ2dsZSIsIiRuYXZJdGVtIiwidG9nZ2xlQ2xhc3MiLCJwcm9qZWN0cyIsInNldHRpbmdzIiwic2VjdGlvbiIsImVhc2luZyIsInNjcm9sbFNwZWVkIiwic3RhbmRhcmRTY3JvbGxFbGVtZW50cyIsInNjcm9sbGJhcnMiLCJzZXRIZWlnaHRzIiwib3ZlcmZsb3dTY3JvbGwiLCJ1cGRhdGVIYXNoIiwidG91Y2hTY3JvbGwiLCJiZWZvcmUiLCJwYW5lbHMiLCJyZWYiLCJlcSIsImRlc3Ryb3kiLCJtb3JwaEVscyIsInNuYXBNb3JwaEhvdmVyIiwicyIsIlNuYXAiLCJwYXRoIiwic2VsZWN0IiwicGF0aENvbmZpZyIsInRvU3BlZWQiLCJmcm9tU3BlZWQiLCJmcm9tIiwiZ2V0QXR0cmlidXRlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImFuaW1hdGUiLCJlYXNlSW4iLCJzbmFwRWxzIiwicXVlcnlTZWxlY3RvciIsIm1pbmEiLCJlYXNlaW4iLCJlYXNlb3V0IiwiYm91bmNlIl0sIm1hcHBpbmdzIjoiQUFBQSxZQ0FBLFNBQUFBLHdCQUNBQyxFQUFBLFFBQ0FDLEdBQUEsYUFBQSxTQUFBQyxHQUNBLEdBQUFDLEdBQUFILEVBQUFJLE1BQUFDLFNBQ0FDLEVBQUFKLEVBQUFLLE1BQUFKLEVBQUFLLEtBQ0FDLEVBQUFQLEVBQUFRLE1BQUFQLEVBQUFRLEdBQ0FYLEdBQUFJLE1BQUFRLEtBQUEsUUFBQUMsS0FBQUYsSUFBQUYsRUFBQUQsS0FBQUYsTUFFQUwsR0FBQSxXQUFBLFNBQUFDLEdBQ0EsR0FBQUMsR0FBQUgsRUFBQUksTUFBQUMsU0FDQUMsRUFBQUosRUFBQUssTUFBQUosRUFBQUssS0FDQUMsRUFBQVAsRUFBQVEsTUFBQVAsRUFBQVEsR0FDQVgsR0FBQUksTUFBQVEsS0FBQSxRQUFBQyxLQUFBRixJQUFBRixFQUFBRCxLQUFBRixNQ1pBLFFBQUFRLFlBQ0EsR0FBQUMsR0FBQWYsRUFBQSxZQUNBZ0IsRUFBQWhCLEVBQUEsZUFDQWlCLEVBQUFqQixFQUFBLGNBQ0FrQixFQUFBbEIsRUFBQSxjQUNBbUIsRUFBQUosRUFBQUssUUFDQUMsRUFBQU4sRUFBQU8sUUFFQXRCLEdBQUF1QixRQUFBQyxPQUFBLFdBQ0FMLEVBQUFKLEVBQUFLLFFBQ0FDLEVBQUFOLEVBQUFPLFdBR0F0QixFQUFBdUIsUUFBQXRCLEdBQUEsOEJBQUEsU0FBQXdCLEdBU0EsUUFBQUMsR0FBQUMsR0FDQUMsVUFBQUMsR0FBQUYsRUFBQUcsR0FBQSxHQUNBakIsS0FDQWtCLFVBQUEsY0FBQXZCLEVBQUFtQixFQUFBSyxRQUFBLGtCQUFBckIsRUFBQWdCLEVBQUFNLE9BQUEsT0FFQUMsS0FBQUMsS0FBQUMsUUFDQUMsVUFBQSxRQWRB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LEVBQUEzRyxJQUlBbEQsR0FBQSxRQUFBMkgsU0FBQSxTQUNBb0IsV0FHQS9JLEVBQUE2RCxVQUFBNUQsR0FBQSxrQkFBQSxXQUNBOEkiLCJmaWxlIjoic2NyaXB0cy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnZhciAkZG9jdW1lbnQgPSAkKGRvY3VtZW50KTtcbnZhciAkYm9keSA9ICQoJ2JvZHknKTtcbnZhciAkYmFyYmFXcmFwcGVyID0gJCgnI2JhcmJhLXdyYXBwZXInKTtcblxudmFyIHBhZ2VUcmFuc2l0aW9ucyA9IGZ1bmN0aW9uKCkge1xuXG4gIHZhciBIb21lcGFnZSA9IEJhcmJhLkJhc2VWaWV3LmV4dGVuZCh7XG4gICAgbmFtZXNwYWNlOiAnaG9tZXBhZ2UnLFxuICAgIG9uRW50ZXI6IGZ1bmN0aW9uIG9uRW50ZXIoKSB7XG4gICAgICAkZG9jdW1lbnQudHJpZ2dlcignaG9tZXBhZ2VPbkVudGVyJyk7XG4gICAgICAkYm9keS5hZGRDbGFzcygnaG9tZScpO1xuICAgICAgJGJvZHkuYXR0cignaWQnLCAnaG9tZScpO1xuICAgIH0sXG4gICAgb25FbnRlckNvbXBsZXRlZDogZnVuY3Rpb24gb25FbnRlckNvbXBsZXRlZCgpIHtcbiAgICAgICRkb2N1bWVudC50cmlnZ2VyKCdob21lcGFnZU9uRW50ZXJDb21wbGV0ZWQnKTtcbiAgICAgICRib2R5LnJlbW92ZUNsYXNzKCkuYWRkQ2xhc3MoJ2hvbWUnKTtcbiAgICB9LFxuICAgIG9uTGVhdmU6IGZ1bmN0aW9uIG9uTGVhdmUoKSB7XG4gICAgICAkZG9jdW1lbnQudHJpZ2dlcignaG9tZXBhZ2VPbkxlYXZlJyk7XG4gICAgfSxcbiAgICBvbkxlYXZlQ29tcGxldGVkOiBmdW5jdGlvbiBvbkxlYXZlQ29tcGxldGVkKCkge1xuICAgICAgJGRvY3VtZW50LnRyaWdnZXIoJ2hvbWVwYWdlT25MZWF2ZUNvbXBsZXRlZCcpO1xuICAgIH1cbiAgfSk7XG5cbiAgdmFyIFByb2plY3RzID0gQmFyYmEuQmFzZVZpZXcuZXh0ZW5kKHtcbiAgICBuYW1lc3BhY2U6ICdwcm9qZWN0cycsXG4gICAgb25FbnRlcjogZnVuY3Rpb24gb25FbnRlcigpIHtcbiAgICAgICRkb2N1bWVudC50cmlnZ2VyKCdwcm9qZWN0c09uRW50ZXInKTtcbiAgICAgICRib2R5LmFkZENsYXNzKCdwcm9qZWN0cycpO1xuICAgICAgJGJvZHkuYXR0cignaWQnLCAncHJvamVjdHMnKTtcbiAgICB9LFxuICAgIG9uRW50ZXJDb21wbGV0ZWQ6IGZ1bmN0aW9uIG9uRW50ZXJDb21wbGV0ZWQoKSB7XG4gICAgICAkZG9jdW1lbnQudHJpZ2dlcigncHJvamVjdHNPbkVudGVyQ29tcGxldGVkJyk7XG4gICAgICAkYm9keS5yZW1vdmVDbGFzcygpLmFkZENsYXNzKCdwcm9qZWN0cycpO1xuICAgIH0sXG4gICAgb25MZWF2ZTogZnVuY3Rpb24gb25MZWF2ZSgpIHtcbiAgICAgICRkb2N1bWVudC50cmlnZ2VyKCdwcm9qZWN0c09uTGVhdmUnKTtcbiAgICB9LFxuICAgIG9uTGVhdmVDb21wbGV0ZWQ6IGZ1bmN0aW9uIG9uTGVhdmVDb21wbGV0ZWQoKSB7XG4gICAgICAkZG9jdW1lbnQudHJpZ2dlcigncHJvamVjdHNPbkxlYXZlQ29tcGxldGVkJyk7XG4gICAgfVxuICB9KTtcblxuICB2YXIgQWJvdXQgPSBCYXJiYS5CYXNlVmlldy5leHRlbmQoe1xuICAgIG5hbWVzcGFjZTogJ2Fib3V0JyxcbiAgICBvbkVudGVyOiBmdW5jdGlvbiBvbkVudGVyKCkge1xuICAgICAgJGRvY3VtZW50LnRyaWdnZXIoJ2Fib3V0T25FbnRlcicpO1xuICAgICAgJGJvZHkuYWRkQ2xhc3MoJ2Fib3V0Jyk7XG4gICAgICAkYm9keS5hdHRyKCdpZCcsICdhYm91dCcpO1xuICAgIH0sXG4gICAgb25FbnRlckNvbXBsZXRlZDogZnVuY3Rpb24gb25FbnRlckNvbXBsZXRlZCgpIHtcbiAgICAgICRkb2N1bWVudC50cmlnZ2VyKCdhYm91dE9uRW50ZXJDb21wbGV0ZWQnKTtcbiAgICAgICRib2R5LnJlbW92ZUNsYXNzKCkuYWRkQ2xhc3MoJ2Fib3V0Jyk7XG4gICAgfSxcbiAgICBvbkxlYXZlOiBmdW5jdGlvbiBvbkxlYXZlKCkge1xuICAgICAgJGRvY3VtZW50LnRyaWdnZXIoJ2Fib3V0T25MZWF2ZScpO1xuICAgIH0sXG4gICAgb25MZWF2ZUNvbXBsZXRlZDogZnVuY3Rpb24gb25MZWF2ZUNvbXBsZXRlZCgpIHtcbiAgICAgICRkb2N1bWVudC50cmlnZ2VyKCdhYm91dE9uTGVhdmVDb21wbGV0ZWQnKTtcbiAgICB9XG4gIH0pO1xuXG4gIEhvbWVwYWdlLmluaXQoKTtcbiAgUHJvamVjdHMuaW5pdCgpO1xuICBBYm91dC5pbml0KCk7XG5cbiAgQmFyYmEuUGpheC5zdGFydCgpO1xuICBCYXJiYS5QcmVmZXRjaC5pbml0KCk7XG5cbiAgdmFyIHNwZWVkID0gNzUwO1xuXG4gIHZhciB0cmFuc2l0aW9uID0gQmFyYmEuQmFzZVRyYW5zaXRpb24uZXh0ZW5kKHtcbiAgICBzdGFydDogZnVuY3Rpb24gc3RhcnQoKSB7XG4gICAgICBQcm9taXNlLmFsbChbdGhpcy5uZXdDb250YWluZXJMb2FkaW5nLCB0aGlzLnRyYW5zaXRpb25PdXQoKV0pLnRoZW4odGhpcy50cmFuc2l0aW9uSW4uYmluZCh0aGlzKSk7XG4gICAgfSxcbiAgICB0cmFuc2l0aW9uT3V0OiBmdW5jdGlvbiB0cmFuc2l0aW9uT3V0KCkge1xuICAgICAgdmFyICRlbE9sZCA9ICQodGhpcy5vbGRDb250YWluZXIpO1xuXG4gICAgICAkZWxPbGQucmVtb3ZlQ2xhc3MoJ3RyYW5zaXRpb24taW4nKS5hZGRDbGFzcygndHJhbnNpdGlvbi1vdXQnKTtcblxuICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAkZWxPbGQuc2hvdygpLnByb21pc2UoKTtcbiAgICAgIH0sIHNwZWVkKTtcbiAgICB9LFxuICAgIHRyYW5zaXRpb25JbjogZnVuY3Rpb24gdHJhbnNpdGlvbkluKCkge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICB2YXIgJGVsTmV3ID0gJCh0aGlzLm5ld0NvbnRhaW5lcik7XG5cbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAkKF90aGlzMi5vbGRDb250YWluZXIpLmhpZGUoKTtcbiAgICAgICAgJChfdGhpczIub2xkQ29udGFpbmVyKS5zaG93KCk7XG4gICAgICAgIF90aGlzLmRvbmUoKTtcbiAgICAgIH0sIHNwZWVkKTtcblxuICAgICAgJGVsTmV3LmNzcyh7XG4gICAgICAgIHZpc2liaWxpdHk6ICd2aXNpYmxlJ1xuICAgICAgfSk7XG5cbiAgICAgICRlbE5ldy5hZGRDbGFzcygndHJhbnNpdGlvbi1pbicpLnJlbW92ZUNsYXNzKCd0cmFuc2l0aW9uLW91dCcpO1xuICAgIH1cbiAgfSk7XG5cbiAgQmFyYmEuUGpheC5nZXRUcmFuc2l0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0cmFuc2l0aW9uO1xuICB9O1xuXG4gIEJhcmJhLkRpc3BhdGNoZXIub24oJ25ld1BhZ2VSZWFkeScsIGZ1bmN0aW9uIChjdXJyZW50U3RhdHVzLCBvbGRTdGF0dXMpIHtcblxuICAgICQoJGRvY3VtZW50KS50cmlnZ2VyKCdhbGxQYWdlc0VudGVyJyk7XG5cbiAgICBzd2l0Y2ggKHRydWUpIHtcblxuICAgICAgY2FzZSBvbGRTdGF0dXMubmFtZXNwYWNlID09PSAncHJvamVjdHMnICYmIGN1cnJlbnRTdGF0dXMubmFtZXNwYWNlID09PSAncHJvamVjdHMnOlxuICAgICAgICAkYmFyYmFXcmFwcGVyLmFkZENsYXNzKCd0ZXJ0aWFyeS10cmFuc2l0aW9uJyk7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHdpbmRvdy5zY3JvbGxUbygwLCAwKTtcbiAgICAgICAgfSwgc3BlZWQpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBjdXJyZW50U3RhdHVzLm5hbWVzcGFjZSA9PT0gJ2hvbWVwYWdlJzpcbiAgICAgICAgJGJhcmJhV3JhcHBlci5yZW1vdmVDbGFzcygnZmFkZS1pbicpO1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7XG4gICAgICAgICAgJGJhcmJhV3JhcHBlci5hZGRDbGFzcygnZmFkZS1pbicpO1xuICAgICAgICB9LCBzcGVlZCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdob21lcGFnZScpO1xuICAgICAgICBicmVhaztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgJGJhcmJhV3JhcHBlci5yZW1vdmVDbGFzcygpO1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7XG4gICAgICAgIH0sIHNwZWVkKTtcbiAgICB9XG4gIH0pO1xufTtcblxuJChmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBwYWdlVHJhbnNpdGlvbnMoKTtcbn0pO1xuIiwiZnVuY3Rpb24gZGlyZWN0aW9uQXdhcmVCdXR0b24oKSB7XG4gICQoJy5idG4nKVxuICAgIC5vbignbW91c2VlbnRlcicsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciBwYXJlbnRPZmZzZXQgPSAkKHRoaXMpLm9mZnNldCgpLFxuICAgICAgICByZWxYID0gZS5wYWdlWCAtIHBhcmVudE9mZnNldC5sZWZ0LFxuICAgICAgICByZWxZID0gZS5wYWdlWSAtIHBhcmVudE9mZnNldC50b3A7XG4gICAgICAkKHRoaXMpLmZpbmQoJ3NwYW4nKS5jc3Moe3RvcDpyZWxZLCBsZWZ0OnJlbFh9KVxuICAgIH0pXG4gICAgLm9uKCdtb3VzZW91dCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciBwYXJlbnRPZmZzZXQgPSAkKHRoaXMpLm9mZnNldCgpLFxuICAgICAgICByZWxYID0gZS5wYWdlWCAtIHBhcmVudE9mZnNldC5sZWZ0LFxuICAgICAgICByZWxZID0gZS5wYWdlWSAtIHBhcmVudE9mZnNldC50b3A7XG4gICAgICAkKHRoaXMpLmZpbmQoJ3NwYW4nKS5jc3Moe3RvcDpyZWxZLCBsZWZ0OnJlbFh9KVxuICAgIH0pO1xufVxuXG5kaXJlY3Rpb25Bd2FyZUJ1dHRvbigpO1xuXG4kKCRkb2N1bWVudCkub24oJ2FsbFBhZ2VzRW50ZXInLCBmdW5jdGlvbigpIHtcbiAgZGlyZWN0aW9uQXdhcmVCdXR0b24oKTtcbn0pO1xuIiwiZnVuY3Rpb24gcGFyYWxsYXgoKSB7XG4gIHZhciAkY29udGFpbmVyID0gJCgnLmRldmljZXMnKTtcbiAgdmFyICRkZXNrdG9wID0gJCgnaW1nLmRlc2t0b3AnKTtcbiAgdmFyICRsYXB0b3AgPSAkKCdpbWcubGFwdG9wJyk7XG4gIHZhciAkbW9iaWxlID0gJCgnaW1nLm1vYmlsZScpO1xuICB2YXIgY29udGFpbmVyX3cgPSAkY29udGFpbmVyLndpZHRoKCk7XG4gIHZhciBjb250YWluZXJfaCA9ICRjb250YWluZXIuaGVpZ2h0KCk7XG5cbiAgJCh3aW5kb3cpLnJlc2l6ZShmdW5jdGlvbiAoKSB7XG4gICAgY29udGFpbmVyX3cgPSAkY29udGFpbmVyLndpZHRoKCk7XG4gICAgY29udGFpbmVyX2ggPSAkY29udGFpbmVyLmhlaWdodCgpO1xuICB9KTtcblxuICAkKHdpbmRvdykub24oJ21vdXNlbW92ZSBkZXZpY2VvcmllbnRhdGlvbicsIGZ1bmN0aW9uIChldmVudCkge1xuICAgIHZhciBpc01vYmlsZSA9IHdpbmRvdy5tYXRjaE1lZGlhKCcobWF4LXdpZHRoOiA3NjdweCknKS5tYXRjaGVzO1xuICAgIHZhciBwb3NfeCA9IGlzTW9iaWxlID8gTWF0aC5yb3VuZChldmVudC5vcmlnaW5hbEV2ZW50LmdhbW1hICogNTApIDogZXZlbnQucGFnZVg7XG4gICAgdmFyIHBvc195ID0gaXNNb2JpbGUgPyBNYXRoLnJvdW5kKGV2ZW50Lm9yaWdpbmFsRXZlbnQuYmV0YSAqIDUwKSA6IGV2ZW50LnBhZ2VZO1xuICAgIHZhciBsZWZ0ID0gY29udGFpbmVyX3cgLyAyIC0gcG9zX3g7XG4gICAgdmFyIHRvcCA9IGNvbnRhaW5lcl9oIC8gMiAtIHBvc195O1xuXG4gICAgJCgnI2RldmljZU9yaWVudGF0aW9uJykudGV4dCgnZ2FtbWE6ICcgKyBldmVudC5vcmlnaW5hbEV2ZW50LmdhbW1hICsgJyBiZXRhOiAnICsgZXZlbnQub3JpZ2luYWxFdmVudC5iZXRhKTtcblxuICAgIGZ1bmN0aW9uIHRyYW5zbGF0ZVR3ZWVuKGFyZ3MpIHtcbiAgICAgIFR3ZWVuTGl0ZS50byhhcmdzLmVsLCAxLCB7XG4gICAgICAgIGNzczoge1xuICAgICAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVgoJyArIGxlZnQgLyBhcmdzLnBvc0xlZnQgKyAncHgpIHRyYW5zbGF0ZVkoJyArIHRvcCAvIGFyZ3MucG9zVG9wICsgJ3B4KSdcbiAgICAgICAgfSxcbiAgICAgICAgZWFzZTogRXhwby5lYXNlT3V0LFxuICAgICAgICBvdmVyd3JpdGU6ICdhbGwnXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB2YXIgcGFyYWxsYXhQcm9wc0FycmF5ID0gW1xuICAgICAgeyBlbDogJGRlc2t0b3AsIHBvc0xlZnQ6IDc1LCBwb3NUb3A6IDM1fSxcbiAgICAgIHsgZWw6ICRsYXB0b3AsIHBvc0xlZnQ6IDQ1LCBwb3NUb3A6IDE1fSxcbiAgICAgIHsgZWw6ICRtb2JpbGUsIHBvc0xlZnQ6IDU1LCBwb3NUb3A6IDI1fVxuICAgIF07XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhcmFsbGF4UHJvcHNBcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgdHJhbnNsYXRlVHdlZW4ocGFyYWxsYXhQcm9wc0FycmF5W2ldKTtcbiAgICB9XG4gIH0pO1xufVxuXG4kKGRvY3VtZW50KS5vbignaG9tZXBhZ2VPbkVudGVyQ29tcGxldGVkJywgZnVuY3Rpb24oKSB7XG4gIHBhcmFsbGF4KCk7XG59KTtcbiIsInZhciBzZXR0aW5ncyA9IHtcbiAgc2VjdGlvbiA6ICcuc2Nyb2xsLXNlY3Rpb24nLFxuICBlYXNpbmc6ICdlYXNlT3V0RXhwbycsXG4gIHNjcm9sbFNwZWVkOiAxMDAwLFxuICBvZmZzZXQgOiAwLFxuICBzdGFuZGFyZFNjcm9sbEVsZW1lbnRzOiAnYm9keTpub3QoLmhvbWUpJyxcbiAgc2Nyb2xsYmFyczogdHJ1ZSxcbiAgc2V0SGVpZ2h0czogdHJ1ZSxcbiAgb3ZlcmZsb3dTY3JvbGw6IHRydWUsXG4gIHVwZGF0ZUhhc2g6IGZhbHNlLFxuICB0b3VjaFNjcm9sbDogdHJ1ZSxcbiAgYmVmb3JlOmZ1bmN0aW9uKGksIHBhbmVscykge1xuXG4gICAgdmFyIHJlZiA9IHBhbmVsc1tpXS5hdHRyKCdkYXRhLXNlY3Rpb24tbmFtZScpO1xuICAgICQoJy5wYWdpbmF0aW9uIC5hY3RpdmUnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgJCgnLnBhZ2luYXRpb24nKS5maW5kKCdhW2hyZWY9XCIjJyArIHJlZiArICdcIl0nKS5hZGRDbGFzcygnYWN0aXZlJyk7XG5cbiAgICAkKCcuc2Nyb2xsLXNlY3Rpb24nKS5lcShpKVxuICAgICAgLnJlbW92ZUNsYXNzKCdhY3RpdmUgcHJldmlvdXMgbmV4dCcpXG4gICAgICAuYWRkQ2xhc3MoJ2FjdGl2ZScpXG4gICAgICAuc2libGluZ3MoJy5zY3JvbGwtc2VjdGlvbicpXG4gICAgICAucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuXG4gICAgJCgnLnNjcm9sbC1zZWN0aW9uJykuZXEoaSAtIDEpXG4gICAgICAucmVtb3ZlQ2xhc3MoJ2FjdGl2ZSBwcmV2aW91cyBuZXh0JylcbiAgICAgIC5hZGRDbGFzcygncHJldmlvdXMnKVxuICAgICAgLnNpYmxpbmdzKCcuc2Nyb2xsLXNlY3Rpb24nKVxuICAgICAgLnJlbW92ZUNsYXNzKCdwcmV2aW91cycpO1xuXG4gICAgJCgnLnNjcm9sbC1zZWN0aW9uJykuZXEoaSArIDEpXG4gICAgICAucmVtb3ZlQ2xhc3MoJ2FjdGl2ZSBwcmV2aW91cyBuZXh0JylcbiAgICAgIC5hZGRDbGFzcygnbmV4dCcpXG4gICAgICAuc2libGluZ3MoJy5zY3JvbGwtc2VjdGlvbicpXG4gICAgICAucmVtb3ZlQ2xhc3MoJ25leHQnKTtcblxuICAgIGlmIChpID09PSBwYW5lbHMubGVuZ3RoIC0gMSkge1xuICAgICAgJCgnLmFycm93LWRvd24nKS5hZGRDbGFzcygnZGlzYWJsZWQnKTtcbiAgICB9IGVsc2UgaWYgKGkgPT09IDApIHtcbiAgICAgICQoJy5hcnJvdy11cCcpLmFkZENsYXNzKCdkaXNhYmxlZCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkKCcuYXJyb3ctdXAsIC5hcnJvdy1kb3duJykucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XG4gICAgfVxuICB9XG59O1xuXG5mdW5jdGlvbiBwYWdpbmF0aW9uQXJyb3dzTW92ZSgpIHtcbiAgJCgnLnBhZ2luYXRpb24gYScpLmVhY2goZnVuY3Rpb24gKGkpIHtcbiAgICAkKHRoaXMpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAkLnNjcm9sbGlmeS5tb3ZlKGkpO1xuICAgIH0pO1xuICB9KTtcblxuICAkKCcuYXJyb3ctZG93bicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAkLnNjcm9sbGlmeS5uZXh0KCk7XG4gIH0pO1xuXG4gICQoJy5hcnJvdy11cCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAkLnNjcm9sbGlmeS5wcmV2aW91cygpO1xuICB9KTtcbn1cblxuXG5pZigkKCdib2R5JykuaGFzQ2xhc3MoJ2hvbWUnKSkge1xuICAkLnNjcm9sbGlmeShzZXR0aW5ncyk7XG4gIHdpbmRvdy5zY3JvbGxUbygwLCAwKTtcbiAgJC5zY3JvbGxpZnkubW92ZSgwKTtcbn1cblxuJChkb2N1bWVudCkub24oJ2hvbWVwYWdlT25FbnRlcicsIGZ1bmN0aW9uKCkge1xuICB3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7XG4gICQuc2Nyb2xsaWZ5Lm1vdmUoMCk7XG4gIHBhZ2luYXRpb25BcnJvd3NNb3ZlKCk7XG59KTtcblxuJChkb2N1bWVudCkub24oJ2hvbWVwYWdlT25FbnRlckNvbXBsZXRlZCcsIGZ1bmN0aW9uKCkge1xuICAkLnNjcm9sbGlmeShzZXR0aW5ncyk7XG59KTtcblxuJChkb2N1bWVudCkub24oJ2hvbWVwYWdlT25MZWF2ZUNvbXBsZXRlZCcsIGZ1bmN0aW9uKCkge1xuICAkLnNjcm9sbGlmeS5kZXN0cm95KCk7XG59KTtcblxuXG4iLCJ2YXIgYWJvdXQgPSBmdW5jdGlvbigpIHtcblxuICAkZG9jdW1lbnQub24oJ2Fib3V0T25FbnRlcicsIGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKCdhYm91dE9uRW50ZXInKTtcbiAgfSk7XG5cbiAgJGRvY3VtZW50Lm9uKCdhYm91dE9uRW50ZXJDb21wbGV0ZWQnLCBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygnYWJvdXRPbkVudGVyQ29tcGxldGVkJyk7XG4gIH0pO1xuXG4gICRkb2N1bWVudC5vbignYWJvdXRPbkxlYXZlJywgZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coJ2Fib3V0T25MZWF2ZScpO1xuICB9KTtcblxuICAkZG9jdW1lbnQub24oJ2Fib3V0T25MZWF2ZUNvbXBsZXRlZCcsIGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKCdhYm91dE9uTGVhdmVDb21wbGV0ZWQnKTtcbiAgfSk7XG59O1xuXG4kKGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIGFib3V0KCk7XG59KTtcbiIsIiQoZG9jdW1lbnQpLm9uKCdob21lcGFnZU9uRW50ZXJDb21wbGV0ZWQnLCBmdW5jdGlvbigpIHtcbiAgJCgnLmNhcm91c2VsJykuc2xpY2soe1xuICAgIGluZmluaXRlOiB0cnVlLFxuICAgIHZhcmlhYmxlV2lkdGg6IHRydWUsXG4gICAgc2xpZGVzVG9TaG93OiAxLFxuICAgIHByZXZBcnJvdzogJCgnLmFycm93LXByZXYnKSxcbiAgICBuZXh0QXJyb3c6ICQoJy5hcnJvdy1uZXh0JylcbiAgfSk7XG5cbiAgJCgnLnNsaWNrLWFjdGl2ZScpLmFkZENsYXNzKCdhY3RpdmUnKTtcblxuICAkKCcuY2Fyb3VzZWwnKS5vbignYWZ0ZXJDaGFuZ2UnLCBmdW5jdGlvbigpIHtcbiAgICAkKHRoaXMpLmZpbmQoJy5zbGlkZS5zbGljay1hY3RpdmUnKS5hZGRDbGFzcygnYW5pbWF0ZScpXG4gICAgICAuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnYW5pbWF0ZScpO1xuICB9KTtcblxuICAkKCcuY2Fyb3VzZWwgLnNsaWNrLWFjdGl2ZScpLmFkZENsYXNzKCdhbmltYXRlJyk7XG5cbn0pO1xuIiwidmFyIGhvbWVQYWdlID0gZnVuY3Rpb24oKSB7XG5cbiAgZnVuY3Rpb24gbGFuZGluZ1BhZ2VJbnRyb0FuaW1hdGlvbigpIHtcbiAgICAkKCdzZWN0aW9uLmludHJvJykuYWRkQ2xhc3MoJ2xhbmRpbmctYW5pbWF0aW9uJyk7XG5cbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgJCgnc2VjdGlvbi5pbnRybycpLnJlbW92ZUNsYXNzKCdsYW5kaW5nLWFuaW1hdGlvbicpO1xuICAgIH0sIDIwMDApXG4gIH1cblxuICBsYW5kaW5nUGFnZUludHJvQW5pbWF0aW9uKCk7XG5cbiAgJGRvY3VtZW50Lm9uKCdob21lcGFnZU9uRW50ZXInLCBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygnaG9tZXBhZ2VPbkVudGVyJyk7XG4gICAgbGFuZGluZ1BhZ2VJbnRyb0FuaW1hdGlvbigpO1xuICB9KTtcblxuICAkZG9jdW1lbnQub24oJ2hvbWVwYWdlT25FbnRlckNvbXBsZXRlZCcsIGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKCdob21lcGFnZU9uRW50ZXJDb21wbGV0ZWQnKTtcbiAgfSk7XG5cbiAgJGRvY3VtZW50Lm9uKCdob21lcGFnZU9uTGVhdmUnLCBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygnaG9tZXBhZ2VPbkxlYXZlJyk7XG4gIH0pO1xuXG4gICRkb2N1bWVudC5vbignaG9tZXBhZ2VPbkxlYXZlQ29tcGxldGVkJywgZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coJ2hvbWVwYWdlT25MZWF2ZUNvbXBsZXRlZCcpO1xuICB9KTtcbn07XG5cblxuaWYgKCQoJ2JvZHknKS5oYXNDbGFzcygnaG9tZScpKSB7XG4gICQoZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBob21lUGFnZSgpO1xuICB9KTtcbn1cbiIsInZhciAkYm9keSA9ICQoJ2JvZHknKTtcbnZhciAkbmF2VG9nZ2xlID0gJCgnLm5hdicpO1xudmFyICRuYXZJdGVtID0gJCgnbmF2IHVsIGxpIGEnKTtcblxuJG5hdlRvZ2dsZS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgJCh0aGlzKS50b2dnbGVDbGFzcygnaXMtY2xvc2VkJyk7XG5cbiAgaWYoISQodGhpcykuaGFzQ2xhc3MoJ2lzLWNsb3NlZCcpKSB7XG4gICAgJGJvZHkuYWRkQ2xhc3MoJ2lzLW9wZW4nKTtcbiAgfSBlbHNlIHtcbiAgICAkYm9keS5yZW1vdmVDbGFzcygnaXMtb3BlbicpO1xuICB9XG59KTtcblxuJG5hdkl0ZW0ub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICRuYXZUb2dnbGUudG9nZ2xlQ2xhc3MoJ2lzLWNsb3NlZCcpO1xuICBpZighJG5hdlRvZ2dsZS5oYXNDbGFzcygnaXMtY2xvc2VkJykpIHtcbiAgICAkYm9keS5hZGRDbGFzcygnaXMtb3BlbicpO1xuICB9IGVsc2Uge1xuICAgICRib2R5LnJlbW92ZUNsYXNzKCdpcy1vcGVuJyk7XG4gIH1cbn0pO1xuIiwidmFyIHByb2plY3RzID0gZnVuY3Rpb24oKSB7XG5cbiAgJGRvY3VtZW50Lm9uKCdwcm9qZWN0c09uRW50ZXInLCBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygncHJvamVjdHNPbkVudGVyJyk7XG4gIH0pO1xuXG4gICRkb2N1bWVudC5vbigncHJvamVjdHNPbkVudGVyQ29tcGxldGVkJywgZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coJ3Byb2plY3RzT25FbnRlckNvbXBsZXRlZCcpO1xuICB9KTtcblxuICAkZG9jdW1lbnQub24oJ3Byb2plY3RzT25MZWF2ZScsIGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKCdwcm9qZWN0c09uTGVhdmUnKTtcbiAgfSk7XG5cbiAgJGRvY3VtZW50Lm9uKCdwcm9qZWN0c09uTGVhdmVDb21wbGV0ZWQnLCBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygncHJvamVjdHNPbkxlYXZlQ29tcGxldGVkJyk7XG4gIH0pO1xufTtcblxuJChmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBwcm9qZWN0cygpO1xufSk7XG4iLCJ2YXIgbW9ycGhFbHMgPSBmdW5jdGlvbigpIHtcbiAgZnVuY3Rpb24gc25hcE1vcnBoSG92ZXIoYXJncykge1xuICAgIHZhciBzID0gU25hcChhcmdzLmVsKTtcbiAgICB2YXIgcGF0aCA9IHMuc2VsZWN0KCdwYXRoJyk7XG5cbiAgICB2YXIgcGF0aENvbmZpZyA9IHtcbiAgICAgIHRvU3BlZWQ6IGFyZ3MudG9TcGVlZCxcbiAgICAgIGZyb21TcGVlZDogYXJncy5mcm9tU3BlZWQsXG4gICAgICBmcm9tOiBwYXRoLmF0dHIoJ2QnKSxcbiAgICAgIHRvOiBhcmdzLmVsLmdldEF0dHJpYnV0ZSgnZGF0YS1tb3JwaC1hY3RpdmUnKVxuICAgIH07XG5cbiAgICBhcmdzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHBhdGguYW5pbWF0ZSh7ICdwYXRoJzogcGF0aENvbmZpZy50byB9LCBwYXRoQ29uZmlnLnRvU3BlZWQsIGFyZ3MuZWFzZUluKTtcbiAgICB9KTtcblxuICAgIGFyZ3MuZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBwYXRoLmFuaW1hdGUoeyAncGF0aCc6IHBhdGhDb25maWcuZnJvbSB9LCBwYXRoQ29uZmlnLmZyb21TcGVlZCwgYXJncy5lYXNlT3V0KTtcbiAgICB9KTtcbiAgfVxuXG4gIHZhciBzbmFwRWxzID0gW1xuICAgIHtlbDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFycm93LXVwJyksIGVhc2VJbjogbWluYS5lYXNlaW4sIGVhc2VPdXQ6IG1pbmEuZWFzZW91dCwgdG9TcGVlZDogMzAwLCBmcm9tU3BlZWQ6IDE1MH0sXG4gICAge2VsOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXJyb3ctZG93bicpLCBlYXNlSW46IG1pbmEuZWFzZWluLCBlYXNlT3V0OiBtaW5hLmVhc2VvdXQsIHRvU3BlZWQ6IDMwMCwgZnJvbVNwZWVkOiAxNTB9LFxuICAgIHtlbDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFycm93LW5leHQnKSwgZWFzZUluOiBtaW5hLmVhc2VpbiwgZWFzZU91dDogbWluYS5ib3VuY2UsIHRvU3BlZWQ6IDMwMCwgZnJvbVNwZWVkOiA1MDB9LFxuICAgIHtlbDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFycm93LXByZXYnKSwgZWFzZUluOiBtaW5hLmVhc2VpbiwgZWFzZU91dDogbWluYS5ib3VuY2UsIHRvU3BlZWQ6IDMwMCwgZnJvbVNwZWVkOiA1MDB9XG4gIF07XG5cbiAgZm9yICh2YXIgaT0wOyBpPHNuYXBFbHMubGVuZ3RoOyBpKyspIHtcbiAgICBzbmFwTW9ycGhIb3ZlcihzbmFwRWxzW2ldKTtcbiAgfVxufTtcblxuaWYgKCQoJ2JvZHknKS5oYXNDbGFzcygnaG9tZScpKSB7XG4gIG1vcnBoRWxzKCk7XG59XG5cbiQoZG9jdW1lbnQpLm9uKCdob21lcGFnZU9uRW50ZXInLCBmdW5jdGlvbigpIHtcbiAgbW9ycGhFbHMoKTtcbn0pO1xuIl19
